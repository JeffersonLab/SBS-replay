-------[ 2021-01-01 00:00:00 ]


## track constraint widths:
sbs.frontconstraintwidth_x = 0.75 # m
sbs.frontconstraintwidth_y = 0.20 # m
sbs.backconstraintwidth_x = 0.30 # m
sbs.backconstraintwidth_y = 0.30 # m
sbs.backconstraint_x0 = 0.0 
sbs.backconstraint_y0 = 0.0
sbs.frontconstraint_x0 = 0.0
sbs.frontconstraint_y0 = 0.0

----------[ 2023-12-31 11:59:59 ] # start GEN-RP

sbs.gemorigin_xyz = 0.0 0.0 4.105
sbs.optics_origin = 0.0 0.0 4.105

sbs.polarimetermode = 1

# In g4sbs, the first GEM is 40 cm upstream of the front face of the analyzer
# analyzer thickness is 8.89 cm. Therefore the center of the analyzer
# is at 40 + 8.89/2 cm = 
sbs.z0analyzer = 0.44445

sbs.backconstraint_x0 = 0.0 0.042
sbs.backconstraint_y0 = 0.0 0.0
sbs.backconstraintwidth_x = 0.03 0.5
sbs.backconstraintwidth_y = 0.03 0.5

# in the polarimeter mode we basically use the analyzer as front constraint point, and the width is the entire active area:
sbs.frontconstraint_x0 = 0.056 0.0
sbs.frontconstraint_y0 = 0.0 0.0
sbs.frontconstraintwidth_x = 0.12 1.05
sbs.frontconstraintwidth_y = 0.06 0.3
#sbs.frontconstraintwidth_x = 0.12 0.03
#sbs.frontconstraintwidth_y = 0.06 0.03

sbs.optics_order = 4

sbs.optics_parameters = 
  -0.0017648973    0.003530632  -0.0042587505     0.41654707  0 0 0 0 0
     0.37048922   -0.047282056    0.072596662     0.18234163  1 0 0 0 0
   -0.067207514     0.17721545    -0.23430492    -0.50392795  2 0 0 0 0
     0.13000199    -0.31564901     0.36322521     0.47525505  3 0 0 0 0
    -0.03399487    0.055340021    0.063498027    -0.22647042  4 0 0 0 0
    0.045795799    0.055745871     0.85285245    -0.32062557  0 1 0 0 0
   -0.070612755    -0.61106481      1.4739916      2.0545049  1 1 0 0 0
     0.82973714       2.411435     -5.2835577     -4.6102517  2 1 0 0 0
    -0.48143409      -3.358653      8.3024524      5.4114874  3 1 0 0 0
    0.011665627      2.5346648     -8.0565431     -3.4566669  0 2 0 0 0
     -1.5969512     -6.0412236        22.2412      16.669885  1 2 0 0 0
     -1.1951655      -9.134111      16.217476      8.3808874  2 2 0 0 0
     -5.2031076      13.986655     -60.740548     -3.7766101  0 3 0 0 0
     -21.654758     -33.972773      79.306323      95.434686  1 3 0 0 0
      38.209008      12.228689     -44.608532     -133.83895  0 4 0 0 0
    -0.51204026     0.15715208    -0.21601927    -0.78564537  0 0 1 0 0
     0.52666078     -1.2294815      1.6309863      4.3622081  1 0 1 0 0
      -1.408193      3.5596574     -4.8369618     -6.9156954  2 0 1 0 0
     0.82043767       -1.69196     0.60834273      3.1444184  3 0 1 0 0
     0.87167446      2.0273158      -4.924903     -7.9915117  0 1 1 0 0
     -6.3454173     -15.996599      37.191685       38.40755  1 1 1 0 0
      7.7490185      31.028547     -73.658274     -49.618811  2 1 1 0 0
      -1.384491      31.784526      -96.39967     -51.899862  0 2 1 0 0
      3.5096345      22.193815      -16.03346     -6.7267623  1 2 1 0 0
     -4.1276682      85.643959     -243.37186     -166.38802  0 3 1 0 0
    -0.97507374      2.0966446     -2.5745181     -9.3636533  0 0 2 0 0
      5.1337245     -12.239796      17.030429      30.981504  1 0 2 0 0
     -5.2968045      12.458548     -12.277236     -21.627275  2 0 2 0 0
      11.139164      26.218595     -61.965461      -74.10846  0 1 2 0 0
     -31.127957     -98.593686      236.53079      187.08542  1 1 2 0 0
     -26.789613        15.6797     -40.379322      -7.082912  0 2 2 0 0
     -6.1028137      13.340274     -17.337539     -45.446723  0 0 3 0 0
      14.069347     -31.607067      36.922821      66.593394  1 0 3 0 0
      36.261722      105.44102     -253.81685     -235.49854  0 1 3 0 0
     -13.143261      26.451011     -30.295339     -75.002196  0 0 4 0 0
    -0.19283577       0.748934     -3.4088818      1.4009822  0 0 0 1 0
     0.30847109      2.7921647     -7.0179636     -9.8658616  1 0 0 1 0
     -3.6150189     -10.804415      24.309973      21.741925  2 0 0 1 0
      2.0437461      15.450046     -37.953791     -21.845909  3 0 0 1 0
    -0.23377304     -21.470979      67.576214      25.090643  0 1 0 1 0
       13.67399      50.432636     -184.29683      -121.2514  1 1 0 1 0
      9.1153789       79.73573     -147.32729     -85.216344  2 1 0 1 0
      67.788222     -152.39697      674.18818     -30.978153  0 2 0 1 0
      294.85939      313.40924     -733.55168     -1047.4627  1 2 0 1 0
     -409.57065     -113.33299      364.87283      1387.3321  0 3 0 1 0
     -3.6822969     -9.1959551      23.191819      38.369559  0 0 1 1 0
      27.258483      71.052745     -168.47641      -181.7792  1 0 1 1 0
      -32.70839     -143.11388      342.67648      229.90483  2 0 1 1 0
      11.926596     -266.03245      799.53927      360.64156  0 1 1 1 0
     -29.664809     -202.28582      203.42165       201.8723  1 1 1 1 0
     -9.8235105     -705.43005      1976.5017      1463.8116  0 2 1 1 0
     -47.926262     -115.79066      276.53368      354.60128  0 0 2 1 0
      130.37163      453.62703     -1102.8497     -885.06287  1 0 2 1 0
       228.8171     -118.35215      252.27169      -259.3537  0 1 2 1 0
     -153.68065     -484.18058      1181.2854       1121.912  0 0 3 1 0
     0.57797408      44.695372     -139.76437     -45.253915  0 0 0 2 0
     -28.357657     -104.10034      379.37742      220.30376  1 0 0 2 0
     -19.747622      -169.9861      324.17743      201.80393  2 0 0 2 0
     -289.06949      526.37016     -2410.8704       455.0499  0 1 0 2 0
     -1335.4763     -775.50594      1776.6173      3643.2763  1 1 0 2 0
      1296.1583      303.38669     -749.46197     -4139.4116  0 2 0 2 0
     -29.371653      545.23251     -1631.4984     -616.22952  0 0 1 2 0
      71.654134      442.20652     -528.85004     -685.38005  1 0 1 2 0
      330.20243      1177.1174     -3132.2834      -3321.193  0 1 1 2 0
     -504.41867      195.09285     -285.92784      1144.9061  0 0 2 2 0
      405.35039      -554.6227      2724.7497     -1077.0621  0 0 0 3 0
      2014.7613      247.28069     -390.93001     -3955.6314  1 0 0 3 0
     -420.27201     -99.172506     -24.012458      1160.6046  0 1 0 3 0
     -903.60999      1162.4503     -3702.6533      563.55559  0 0 1 3 0
      -2579.073     -310.91226       49.54245      7087.2149  0 0 0 4 0
  3.5813527e-13  -1.972456e-12  7.9046163e-12 -2.9520361e-12  0 0 0 0 1
 -9.2677708e-13   5.177133e-12 -2.0664102e-11  7.7698164e-12  1 0 0 0 1
 -1.2672456e-12  5.9549075e-12 -2.1466967e-11  5.7207012e-12  2 0 0 0 1
  3.0978842e-13 -1.2123708e-12   3.907678e-12 -1.1324979e-12  3 0 0 0 1
  2.1739426e-12 -1.0141678e-11  3.4091739e-11 -6.9837035e-12  0 1 0 0 1
  5.2380035e-12 -2.6246505e-11  9.3286187e-11  -2.454773e-11  1 1 0 0 1
 -1.3376709e-12  8.0303772e-12 -2.7729453e-11  5.1955439e-12  2 1 0 0 1
 -7.1849587e-13  3.0099786e-12 -1.1572845e-11  2.8518802e-12  0 2 0 0 1
  6.5728659e-13 -3.1750257e-12  1.2977874e-11 -4.7497828e-12  1 2 0 0 1
  3.2508618e-14 -4.0459822e-13  1.4954643e-12 -2.3655891e-13  0 3 0 0 1
  2.0183646e-12 -1.2529121e-11  5.3689437e-11  -2.286447e-11  0 0 1 0 1
 -4.7333309e-15 -5.7310124e-14  6.5013242e-13  3.6619235e-13  1 0 1 0 1
  1.3813694e-13 -2.4293205e-12  9.7946415e-12 -3.5079336e-12  2 0 1 0 1
   9.741175e-13 -3.7473649e-12  1.1891254e-11 -2.4044738e-12  0 1 1 0 1
 -1.1092937e-12  3.3390221e-12 -1.1033765e-11  2.6244357e-12  1 1 1 0 1
  3.5390389e-13 -1.5383487e-12  5.9108898e-12 -2.0236047e-12  0 2 1 0 1
 -3.8653167e-13  3.1221371e-12 -1.3407988e-11  5.6657915e-12  0 0 2 0 1
 -8.8745534e-14 -1.2364852e-12  4.4019647e-12   -4.78741e-13  1 0 2 0 1
 -6.6264052e-13  4.9634202e-13 -1.1594711e-12  1.8084377e-12  0 1 2 0 1
   2.728096e-13 -1.0491462e-12  4.3649041e-12 -2.2802724e-12  0 0 3 0 1
 -1.1376969e-12   7.580233e-12 -3.3762473e-11  1.5312783e-11  0 0 0 1 1
  2.1193185e-12 -1.0898462e-11  4.1791482e-11 -1.3701214e-11  1 0 0 1 1
 -2.9578249e-13  3.3127656e-12 -1.2638239e-11  3.9159304e-12  2 0 0 1 1
 -5.9798001e-13  1.8458154e-12 -8.9255018e-12  6.0137087e-12  0 1 0 1 1
 -7.9145024e-14 -3.5097841e-13  1.7169406e-12 -1.4338658e-12  1 1 0 1 1
  9.2164983e-14  1.3681824e-13 -4.7242361e-13 -3.0317287e-13  0 2 0 1 1
  3.8319646e-13 -1.2060641e-12  4.2252004e-12 -1.4840233e-12  0 0 1 1 1
 -2.5204722e-13  6.7058379e-13 -2.6261985e-12  1.0835273e-12  1 0 1 1 1
  4.4567499e-13 -1.9645356e-13  1.0708714e-12 -1.6834624e-12  0 1 1 1 1
  1.4033056e-12  5.0842271e-13 -9.2049056e-13 -4.6716264e-12  0 0 2 1 1
  4.5492638e-13  1.1003737e-12 -4.3824781e-12  1.3332482e-13  0 0 0 2 1
 -4.0500216e-13  -5.243082e-13  1.8735249e-12  1.0450711e-12  1 0 0 2 1
 -6.9787089e-15 -3.7301843e-14  1.7456789e-13 -1.6292106e-14  0 1 0 2 1
 -9.3793819e-14  -1.129282e-13  4.5402007e-13  4.0548577e-14  0 0 1 2 1
 -4.2039575e-13  1.7412832e-14 -2.2114221e-13  1.1457731e-12  0 0 0 3 1
  1.9385988e-12 -1.2816941e-11  5.5838064e-11 -2.4041313e-11  0 0 0 0 2
 -6.1470806e-13  3.4639548e-12 -1.4836629e-11  6.8818924e-12  1 0 0 0 2
  3.2824227e-13 -1.9808549e-12  8.6765816e-12 -4.3108234e-12  2 0 0 0 2
  1.3346563e-13  7.6537047e-13 -3.5008943e-12  1.2721784e-12  0 1 0 0 2
 -1.8057068e-13  1.1031674e-14 -7.4310684e-13  1.8882042e-12  1 1 0 0 2
 -5.5079118e-14  1.1131761e-13 -8.6302127e-14 -9.6593773e-14  0 2 0 0 2
 -4.6007827e-13  1.8270265e-12 -7.3568557e-12  3.2738982e-12  0 0 1 0 2
  3.5057903e-13 -4.6683732e-13   2.178686e-12 -9.5760876e-13  1 0 1 0 2
 -1.1853992e-13   -1.90533e-13  5.2499717e-13  3.6354125e-13  0 1 1 0 2
  2.2344963e-13 -2.8840992e-13  9.5017991e-13 -4.7270345e-13  0 0 2 0 2
  1.2631139e-13  1.0855169e-13 -3.6694869e-13  3.8067554e-13  0 0 0 1 2
 -2.7386191e-13 -2.1336024e-13  1.4874369e-13  1.5409198e-12  1 0 0 1 2
 -2.2766751e-13  8.6955355e-14 -2.7170584e-13  2.8474747e-13  0 1 0 1 2
  1.2787415e-12  1.5506129e-13 -4.6252142e-14 -3.3175768e-12  0 0 1 1 2
  3.1817637e-13  -1.850845e-14  2.2763607e-13 -7.3347594e-13  0 0 0 2 2
  3.2707644e-14  5.7476717e-14 -1.0584577e-13 -8.9708179e-15  0 0 0 0 3
  4.5084197e-14  4.0202338e-14   2.346609e-15 -1.9036696e-13  1 0 0 0 3
  3.5539131e-13  5.2066095e-14 -8.7152521e-14 -9.2370501e-13  0 1 0 0 3
 -3.1428353e-14 -9.6739951e-14  5.4645474e-13  2.7588539e-13  0 0 1 0 3
  8.3196382e-15   5.290163e-15 -1.1429391e-14 -2.6771796e-14  0 0 0 1 3
  -1.504642e-15  1.4170687e-15 -3.1702403e-15 -5.0905681e-16  0 0 0 0 4


-------[ 2024-9-01 00:00:00 ] # start GEP:

# FT origin is 16.5 cm above beam height
sbs.gemorigin_xyz = -0.165 0.0 3.685
sbs.optics_origin = 0.0 0.0 3.685

sbs.polarimetermode = 1

sbs.z0analyzer = 1.53
sbs.analyzerthick = 0.5588
sbs.nbinsz_fcp = 11

# test GEP tracking mode:
sbs.geptrackingmode = 1       
sbs.geptrackingflag = 1

sbs.optics_order = 2

# total number of terms = 21
# Expansion is: u = sum_{i,j,k,l,m}=0^{i+j+k+l+m<=order} Cu_{ijklm} xfp^i * yfp^j * xpfp^k * ypfp^l * xtar^m, 
# u = xptar, yptar, ytar, p*thetabend. Columns are:
#          Cxptar          Cyptar           Cytar     Cpthetabend   i j k l m

sbs.optics_parameters = 
    0.00078856096  -0.00010131974  -6.3604981e-05         0.37793   0 0 0 0 0
       0.45898121    0.0037914425    -0.005407484     0.024153003   1 0 0 0 0
      0.013218306    -0.011588751       1.0181871     0.023609791   0 1 0 0 0
      -0.69775171    -0.010972748     0.017757347    -0.090699329   0 0 1 0 0
     -0.036792632       1.0090904      -3.6747168     -0.08950457   0 0 0 1 0
   -7.1033758e-14  -6.8610155e-14   2.3088784e-13   3.1064651e-13   0 0 0 0 1
     0.0099152368    -0.010420737      0.01351245    -0.039506558   2 0 0 0 0
       0.34215404      0.20483322     -0.47689438   -0.0089253976   1 1 0 0 0
     -0.007659533      0.12669509     -0.50535499      0.45413844   0 2 0 0 0
     -0.041099371     0.054032244    -0.066621395      0.27692646   1 0 1 0 0
      -0.41274224     -0.65857706       1.7244243      -0.0328807   0 1 1 0 0
      0.021815148    -0.069062598     0.080867341     -0.41843544   0 0 2 0 0
       -1.3629925     -0.47787956       1.2125276    -0.037523093   1 0 0 1 0
       0.19862223       -1.017858       3.8959675      -2.9328066   0 1 0 1 0
        1.7512247       1.5760692      -4.4131006      0.27867981   0 0 1 1 0
      -0.52747476       1.9592603      -7.3316054       5.1023318   0 0 0 2 0
    5.8243841e-14  -6.1894561e-16   3.7903413e-14  -5.7907316e-13   1 0 0 0 1
     4.707113e-14  -4.5049001e-14   1.7004957e-13  -1.0664237e-13   0 1 0 0 1
   -2.3902401e-15   1.6700427e-14  -6.0116568e-14  -2.7458119e-15   0 0 1 0 1
    1.0502042e-14   -1.132494e-14   4.4486126e-14  -1.6751446e-14   0 0 0 1 1
    3.3833467e-15  -2.1656193e-15   6.5612358e-15  -5.1871183e-14   0 0 0 0 2


sbs.forwardoptics_order = 2

# Expansion is: u = sum_{i,j,k,l,m}=0^{i+j+k+l+m<=order} Cu_{ijklm} xptar^i * yptar^j * ytar^k * (1/p)^l * xtar^m, 
# u = xfp, yfp, xpfp, ypfp. Columns are:
#            Cxfp            Cyfp           Cxpfp           Cypfp   i j k l m
sbs.forwardoptics_parameters = 
      0.001739767   0.00024818564    0.0009948161   9.5924062e-05   0 0 0 0 0
        3.6678342   -0.0085579773       0.9838167   -0.0026936077   1 0 0 0 0
     -0.013055225       3.7394468   -0.0040499224        1.040119   0 1 0 0 0
    -0.0026441709        1.028679   -0.0011796726      0.01918605   0 0 1 0 0
      -0.58807436   -0.0024408303     -0.38156548   -0.0014911472   0 0 0 1 0
    -5.348771e-12  -1.0935417e-12   1.2523023e-14   -3.564867e-13   0 0 0 0 1
      -0.21410397     0.024686395     -0.14706443      0.01287812   2 0 0 0 0
       0.20484338     -0.57519723     0.038697583     -0.17790225   1 1 0 0 0
      -0.53983235     0.070040385      -0.2185084     0.049278773   0 2 0 0 0
       -2.0864328     -0.32952741     0.015902011     -0.10613743   1 0 1 0 0
      -0.50812304      0.29564401     -0.15082064      0.10879848   0 1 1 0 0
      -0.09107155      0.12186259    -0.041588388      0.04600298   0 0 2 0 0
        0.1474422     0.025432015      0.12200193    0.0097869902   1 0 0 1 0
      0.032678795     -0.23631894     0.020907898     -0.20032249   0 1 0 1 0
     -0.012762014     -0.11647699  -0.00085585086    -0.090815039   0 0 1 1 0
     -0.020377718    0.0032603906     -0.02021395    0.0037616728   0 0 0 2 0
   -2.4717178e-13  -4.7900499e-14  -5.1077984e-15  -1.7523465e-14   1 0 0 0 1
   -1.7670788e-13   -1.032431e-13   1.4415484e-14    -2.73952e-14   0 1 0 0 1
    7.8871597e-13   1.2400948e-13   -3.876326e-15   3.9610578e-14   0 0 1 0 1
    -1.614311e-12  -5.8047148e-13   5.9378907e-15  -1.7700551e-13   0 0 0 1 1
   -2.8135079e-13   -3.716516e-14   3.6293964e-16  -1.1691786e-14   0 0 0 0 2


# set initial constraint offsets and widths for testing:

sbs.frontconstraint_x0 = 0.0 0.0
sbs.frontconstraint_y0 = 0.0 0.0
sbs.frontconstraintwidth_x = 0.03 0.02
sbs.frontconstraintwidth_y = 0.03 0.02



sbs.backconstraint_x0 = 0.0 0.037
sbs.backconstraint_y0 = 0.0 0.0
sbs.backconstraintwidth_x = 0.03 0.25
sbs.backconstraintwidth_y = 0.03 0.21

--------[ 2025-05-04 11:59:00 ] # GEP3

# test "back to front" tracking:
sbs.geptrackingflag = 1

# here the main change needed (initially) is a new optics model (forward and backward):

# we are updating the GEM and optics origin coordinates to reflect the ~2.9 cm downstream offset of the SBS magnet for GEP-3 (from survey):
# FT origin is 16.5 cm above beam height
sbs.gemorigin_xyz = -0.165 0.0 3.714
sbs.gemangles_xyz = 0 0 0

sbs.optics_origin = 0.0 0.0 3.714



sbs.optics_order = 2

# total number of terms = 21
# Expansion is: u = sum_{i,j,k,l,m}=0^{i+j+k+l+m<=order} Cu_{ijklm} xfp^i * yfp^j * xpfp^k * ypfp^l * xtar^m, 
# u = xptar, yptar, ytar, p*thetabend. Columns are:
#          Cxptar          Cyptar           Cytar     Cpthetabend   i j k l m

#sbs.optics_parameters = 
#    3.3989271e-05  -0.00034579259   0.00060155515      0.66689773   0 0 0 0 0
#       0.45798163    0.0040500383   -0.0065486833    0.0068815755   1 0 0 0 0
#       0.01391409    -0.026980623       1.0760215     0.017383307   0 1 0 0 0
#      -0.69425902    -0.013180918     0.023284086    -0.022381955   0 0 1 0 0
#     -0.041479086       1.0771306      -3.9121764     -0.10185336   0 0 0 1 0
#    5.1738046e-14   1.1113001e-13  -4.1319967e-13     5.24965e-14   0 0 0 0 1
#      0.013837149    -0.020971343     0.035207653    -0.031680035   2 0 0 0 0
#       0.53081642      0.17840042     -0.41519449    -0.062770624   1 1 0 0 0
#       0.10918101      -0.1331249      0.44217296      0.61932994   0 2 0 0 0
#     -0.052338397      0.12373539     -0.21547915      0.15140803   1 0 1 0 0
#      -0.73233005     -0.57097029       1.4830979      0.16266453   0 1 1 0 0
#      0.023975981     -0.17630404      0.32114737    -0.078213788   0 0 2 0 0
#       -2.0773672     -0.42704883       1.0547565      0.13306361   1 0 0 1 0
#      -0.68444512      0.96745344      -3.3009458      -3.6557346   0 1 0 1 0
#        2.9708252       1.4201787      -3.8471401     -0.30347638   0 0 1 1 0
#        1.0929175      -1.8042901       6.2853469       6.0510671   0 0 0 2 0
#   -7.6247637e-14  -4.0638759e-14   2.6213757e-13   1.7913887e-12   1 0 0 0 1
#    1.5485469e-13  -1.1671025e-13   5.9290412e-13   4.2342136e-13   0 1 0 0 1
#   -6.0966465e-14  -2.2766867e-14    7.191059e-14   9.1901744e-13   0 0 1 0 1
#    4.2013969e-14  -2.6020702e-14   1.1909702e-13   1.9818675e-13   0 0 0 1 1
#   -3.1418309e-14   1.0339508e-14  -1.0378342e-14   2.6869849e-13   0 0 0 0 2

# replacing old coefficients with updated proton gun simulations accounting for survey offsets:
# total number of terms = 21
# Expansion is: u = sum_{i,j,k,l,m}=0^{i+j+k+l+m<=order} Cu_{ijklm} xfp^i * yfp^j * xpfp^k * ypfp^l * xtar^m, 
# u = xptar, yptar, ytar, p*thetabend. Columns are:
#          Cxptar          Cyptar           Cytar     Cpthetabend   i j k l m
sbs.optics_parameters = 
    8.0895916e-05  -0.00049039118    0.0011079288      0.66667862   0 0 0 0 0
       0.45157674    0.0052485383    -0.010834743    0.0098745771   1 0 0 0 0
      0.010268812    -0.019180197       1.0470545     0.033331617   0 1 0 0 0
      -0.68365665    -0.017491071     0.038757897    -0.033062291   0 0 1 0 0
      -0.02843851       1.0481547      -3.8317431     -0.16016801   0 0 0 1 0
    4.3955429e-14   2.8153743e-14  -7.7507428e-14   1.7358714e-13   0 0 0 0 1
      0.014401165    -0.022402688     0.041466907    -0.038927947   2 0 0 0 0
       0.51518767      0.18533766     -0.44384439    -0.064942865   1 1 0 0 0
      0.051122835     0.028932772     -0.16206695      0.81306965   0 2 0 0 0
     -0.057710738      0.13470467     -0.26060194      0.19517264   1 0 1 0 0
      -0.71204891     -0.59380256       1.5785597      0.18130516   0 1 1 0 0
      0.034869551     -0.19706728      0.40324194     -0.15209314   0 0 2 0 0
       -2.0357351     -0.45485705       1.1594505      0.13006557   1 0 0 1 0
      -0.25009152      -0.2591533       1.2773413      -5.1417083   0 1 0 1 0
        2.9148538       1.5104698      -4.1934443     -0.32321029   0 0 1 1 0
        0.2756614      0.51537972      -2.3807251       8.9140871   0 0 0 2 0
   -6.2203387e-13   2.7769879e-13  -7.6727631e-13   3.5022084e-12   1 0 0 0 1
   -8.3939423e-13   2.6369691e-13   -8.359979e-13   4.4495503e-13   0 1 0 0 1
    1.5013262e-14  -3.6565471e-14   1.3454079e-13  -1.4330048e-13   0 0 1 0 1
   -2.2799911e-13   7.0052094e-14  -2.1962422e-13   2.4364109e-13   0 0 0 1 1
   -4.4466211e-14   2.1208022e-14  -6.0082639e-14   2.9570217e-13   0 0 0 0 2



sbs.forwardoptics_order = 2

# total number of terms = 21
# Expansion is: u = sum_{i,j,k,l,m}=0^{i+j+k+l+m<=order} Cu_{ijklm} xptar^i * yptar^j * ytar^k * (1/p)^l * xtar^m, 
# u = xfp, yfp, xpfp, ypfp. Columns are:
#            Cxfp            Cyfp           Cxpfp           Cypfp   i j k l m

# replacing with updated optics models accounting for survey offsets:
#sbs.forwardoptics_parameters =
#     0.0016482584    6.638243e-05   0.00087457647   5.7186559e-05   0 0 0 0 0
#         3.669146    -0.005701932      0.98562278   -0.0024018968   1 0 0 0 0
#    -0.0095067331       3.7203665   -0.0030089151       1.0271403   0 1 0 0 0
#     0.0023146621       1.0169161   0.00060559357      0.01259731   0 0 1 0 0
#       -1.0149323   -0.0027758679     -0.66692021   -0.0021745521   0 0 0 1 0
#   -2.8990144e-12  -1.6049939e-12  -7.3545857e-13  -4.1090742e-13   0 0 0 0 1
#      -0.17428415     0.020011438     -0.11768803    0.0089266379   2 0 0 0 0
#       0.26114188     -0.50629144     0.016397481     -0.18040733   1 1 0 0 0
#      -0.53520173     0.066329148     -0.23153425     0.049554556   0 2 0 0 0
#       -3.0071321     -0.29920366      0.00535186     -0.11255291   1 0 1 0 0
#      -0.54422496      0.13638682     -0.16611696     0.067295399   0 1 1 0 0
#     -0.058999097     0.021709893    -0.032034372    0.0076720194   0 0 2 0 0
#       0.24485099     0.087263825      0.19533667      0.04290476   1 0 0 1 0
#       0.11529528      -0.2793422     0.074080516     -0.26310567   0 1 0 1 0
#     -0.014195405     -0.14921471    0.0078737734     -0.12787695   0 0 1 1 0
#      -0.06847709     0.015681139    -0.063529844     0.017436939   0 0 0 2 0
#    6.8060835e-13   1.3581063e-13  -2.0836848e-14   4.7004718e-14   1 0 0 0 1
#    2.2815604e-13   9.3713882e-14   7.6815588e-15   2.6977118e-14   0 1 0 0 1
#    7.7830103e-13   1.2092931e-13   5.4352844e-14   3.5319404e-14   0 0 1 0 1
#   -4.2615911e-13  -3.1713347e-13  -9.7813901e-14  -8.4088118e-14   0 0 0 1 1
#   -7.5488314e-13  -6.6535319e-15  -2.7454574e-14  -4.7031606e-15   0 0 0 0 2

sbs.forwardoptics_parameters =
     0.0017040293   3.4593942e-05   0.00084178661   3.7345985e-05   0 0 0 0 0
        3.6964054   -0.0062815943      0.98539642   -0.0026820685   1 0 0 0 0
     -0.010759657       3.7485937   -0.0038026302       1.0278897   0 1 0 0 0
     0.0022030488       1.0166014   0.00045148572     0.011923387   0 0 1 0 0
       -1.0158533   -0.0025862612     -0.66667504   -0.0021350941   0 0 0 1 0
   -5.4223986e-14  -7.6067624e-15  -7.9220484e-14   1.5998921e-14   0 0 0 0 1
       -0.1690864     0.020979908     -0.11516621    0.0098555786   2 0 0 0 0
       0.28611525     -0.52579079     0.016139289     -0.18937172   1 1 0 0 0
      -0.54431209     0.077922572     -0.23755392     0.055837756   0 2 0 0 0
       -3.0146204     -0.30867201    0.0058269893     -0.11706896   1 0 1 0 0
       -0.5498662      0.14097823      -0.1729077     0.068280383   0 1 1 0 0
     -0.066403218     0.028602219    -0.040699211    0.0051230186   0 0 2 0 0
       0.24744066     0.090629548      0.19645596     0.044651645   1 0 0 1 0
       0.12222631     -0.27940771     0.080578178     -0.26883276   0 1 0 1 0
     -0.013752179     -0.14463474    0.0048985291     -0.12394561   0 0 1 1 0
     -0.065546725     0.015248278    -0.064248968     0.017518439   0 0 0 2 0
    -2.717878e-14   4.2425048e-14  -1.6241999e-14   1.1268872e-14   1 0 0 0 1
    3.1681472e-14   2.3899665e-14   1.6874848e-14   3.1777695e-15   0 1 0 0 1
    7.1036926e-15   6.0864942e-15   8.4761842e-15   -2.936155e-16   0 0 1 0 1
      1.98409e-15  -7.5958771e-14   1.2249967e-14  -3.1717196e-14   0 0 0 1 1
   -2.5110122e-15  -9.2254763e-16  -2.1759938e-15   4.5146178e-16   0 0 0 0 2
   


# set initial constraint offsets and widths for testing:
# start with the same as we used for GEP-1:

sbs.geptrackingflag = 1

sbs.frontconstraint_x0 = 0.0 0.0
sbs.frontconstraint_y0 = 0.0 0.0
sbs.frontconstraintwidth_x = 0.03 0.03
sbs.frontconstraintwidth_y = 0.03 0.04



sbs.backconstraint_x0 = 0.0 0.0
sbs.backconstraint_y0 = 0.0 0.0
sbs.backconstraintwidth_x = 0.03 0.2
sbs.backconstraintwidth_y = 0.03 0.2

