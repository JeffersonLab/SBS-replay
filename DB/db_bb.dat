-------[ 2021-01-01 00:00:00 ]

#bb.magdist = 1.8
#bb.tracker_pitch_angle = 10.

# GEM origin coordinates for SBS-1 kinematics
bb.gemorigin_xyz = -0.2122 0.0322 3.0053
bb.gemtheta = 8.81 # degrees
bb.gemphi   = 180.45 # degrees

# Test: put GEM at "ideal" coordinates except for y offset:
# see how well sim. optics performs:
#bb.gemorigin_xyz = -0.2111 0.0322 3.0053

#bb.gemtheta = 10.0 
#bb.gemphi = 180.0

## optics parameters:
bb.optics_order = 2

#bb.optics_parameters = 
#  -0.0014629237  0.00037941994 -0.00095754244      0.2769191  0 0 0 0 0
#     0.52289143 -0.00072568509   0.0014194667     0.12177326  1 0 0 0 0
#     -0.0429585  -0.0060262058    0.013197044   -0.016461798  2 0 0 0 0
#    0.010777049   -0.030891294      1.0663789  -0.0033243495  0 1 0 0 0
#    -0.43315873     0.21685553    -0.35678525    0.014664485  1 1 0 0 0
#   -0.018992325   -0.037021977    0.081828146     0.26649178  0 2 0 0 0
#     -0.4138084  -0.0034560373    0.009090184   -0.062998296  0 0 1 0 0
#    0.051872706    0.014344192   -0.031155785    0.050567745  1 0 1 0 0
#     0.28964757     -0.2536192     0.47431456   -0.022839649  0 1 1 0 0
#   -0.005425351    0.003797722  -0.0078801984   0.0075681776  0 0 2 0 0
#   -0.014876018     0.99904964      -2.666626   0.0013908722  0 0 0 1 0
#      1.1226647    -0.34170577     0.44981824   -0.021462722  1 0 0 1 0
#    0.093601185    0.095753028    -0.20834281    -0.43485582  0 1 0 1 0
#    -0.83735284     0.47556083    -0.82781209    0.019590082  0 0 1 1 0
#   -0.051185974   -0.057646576     0.12923726     0.17177893  0 0 0 2 0
#  5.9533565e-16 -8.8307616e-16  1.6111156e-15 -2.5115108e-14  0 0 0 0 1
# -9.0017103e-17 -2.7484323e-15  6.3413659e-15 -9.5467346e-14  1 0 0 0 1
# -5.9739436e-15  2.4265842e-15 -6.4499996e-15   4.516025e-15  0 1 0 0 1
# -2.7689762e-15  3.9845049e-16 -2.3538082e-15 -3.1248326e-14  0 0 1 0 1
# -2.3741486e-15  8.5392922e-16 -2.3580607e-15  2.3118034e-15  0 0 0 1 1
#   4.344296e-15 -1.2879984e-15  3.9146744e-15  1.2162675e-15  0 0 0 0 2

# scaled simulation optics, SBS-1 kinematics:
bb.optics_parameters = 
   -0.014648478  9.2888779e-05 -0.00028384801     0.26792745  0 0 0 0 0
     0.45489388   0.0012370654   -0.002972144     0.12160704  1 0 0 0 0
   -0.032203776   0.0033872756  -0.0068735758   -0.017499924  2 0 0 0 0
   0.0075285342   -0.027680404      1.0646037   0.0023734059  0 1 0 0 0
    -0.17444389     0.12471081     -0.2358848    0.010951956  1 1 0 0 0
   0.0064272453    0.049341224   -0.085804162     0.09175745  0 2 0 0 0
    -0.36392268  -0.0016756369   0.0045578207   -0.066694469  0 0 1 0 0
    0.042804806   -0.011090823     0.02077952    0.049864893  1 0 1 0 0
     0.12659709    -0.20279798     0.47125088   -0.018754319  0 1 1 0 0
  -0.0073136032   0.0046097496  -0.0069415866    0.016885366  0 0 2 0 0
   -0.019269868     0.98877439     -2.9284859  -0.0030676435  0 0 0 1 0
     0.48896519    -0.29274099     0.49157929   -0.019691589  1 0 0 1 0
    0.021728534     -0.2401849     0.40208086   -0.025483334  0 1 0 1 0
    -0.37412069     0.58587298     -1.3242557    0.036218813  0 0 1 1 0
   0.0019082509     0.29567774    -0.47302795    -0.12511339  0 0 0 2 0
  3.7503079e-16   7.902824e-16 -2.7955172e-16  -4.110295e-15  0 0 0 0 1
 -8.4120349e-17  -9.966935e-17  1.8352942e-17  6.4052857e-16  1 0 0 0 1
 -8.1051437e-17 -1.2618543e-16 -2.0149278e-16 -4.0746041e-16  0 1 0 0 1
 -2.9598011e-16  1.0733965e-16 -8.6145775e-17  4.4703935e-15  0 0 1 0 1
 -1.4758179e-17  6.6168751e-17 -2.7328371e-17   4.322175e-16  0 0 0 1 1
   2.675701e-17   6.815644e-17   1.987716e-17  1.3165776e-16  0 0 0 0 2


## track constraint widths:
bb.frontconstraintwidth_x = 0.7 # m
bb.frontconstraintwidth_y = 0.2 # m
bb.backconstraintwidth_x = 0.05 # m
bb.backconstraintwidth_y = 0.05 # m
bb.backconstraint_x0 = 0.0 
bb.backconstraint_y0 = 0.0
bb.frontconstraint_x0 = 0.0
bb.frontconstraint_y0 = 0.0

# shower gives the best position resolution of "rear" detectors:
bb.xsigma_shower = 0.016
bb.ysigma_shower = 0.016 
bb.xsigma_preshower = 0.026
bb.ysigma_preshower = 100.0 # don't use preshower y coordinate in constraint point calculation at all.
bb.xsigma_hodo = 0.021
bb.ysigma_hodo = 0.0425

--------[ 2021-10-15 09:00:00 ] # first runs in SBS-1 after sieve removed

#bb.frontconstraintwidth_x = 0.075 # m
#bb.frontconstraintwidth_y = 0.056 # m
#bb.backconstraintwidth_x = 0.045 # m
#bb.backconstraintwidth_y = 0.053 # m

bb.frontconstraintwidth_x = 0.107629
bb.frontconstraintwidth_y = 0.0699422
bb.backconstraintwidth_x = 0.0544505
bb.backconstraintwidth_y = 0.0696305

#bb.frontconstraint_x0 = 0.055
#bb.frontconstraint_y0 = -0.014
#bb.backconstraint_x0 = 0.0055
#bb.backconstraint_y0 = 0.0

bb.frontconstraint_x0 = 0.0588
bb.frontconstraint_y0 = -0.0141
bb.backconstraint_x0 = 0.0061
bb.backconstraint_y0 = 0.0004

--------[ 2021-10-21 00:00:00 ] # start of SBS-4 kinematics: 

#bb.frontconstraintwidth_x = 0.1 # m
#bb.frontconstraintwidth_y = 0.06 # m
#bb.backconstraintwidth_x = 0.06 # m
#bb.backconstraintwidth_y = 0.06 # m

bb.frontconstraintwidth_x = 0.0655003
bb.frontconstraintwidth_y = 0.0572045
bb.backconstraintwidth_x = 0.050677
bb.backconstraintwidth_y = 0.0633993

bb.frontconstraint_x0 = 0.0529
bb.frontconstraint_y0 = -0.0154
bb.backconstraint_x0 = 0.0041
bb.backconstraint_y0 = 0.0002



--------[ 2021-01-01 00:00:00 ]

bb.ecalo_fudgefactor = 1.0

#bb.do_pid = 1

trackgrinchcorr_const = -0.44160517
trackgrinchcorr_slope = 0.90774908
trackgrinchcorr_sigma = 0.25

psshPIDprobatable = 
0   0   1
0.01   0.0102965   0.939074
0.02   0.0160108   0.672653
0.03   0.0223125   0.503606
0.04   0.0294634   0.438879
0.05   0.038083   0.403123
0.06   0.0484862   0.376816
0.07   0.0606839   0.356052
0.08   0.075664   0.33765
0.09   0.0928656   0.32209
0.1   0.113875   0.309052
0.11   0.137282   0.295641
0.12   0.163355   0.28374
0.13   0.192386   0.272354
0.14   0.223323   0.26223
0.15   0.257182   0.252123
0.16   0.293438   0.241856
0.17   0.331436   0.232353
0.18   0.371366   0.22253
0.19   0.411975   0.213329
0.2   0.453423   0.203489
0.21   0.494475   0.194661
0.22   0.535485   0.186738
0.23   0.575672   0.177555
0.24   0.614038   0.169296
0.25   0.652233   0.161427
0.26   0.688602   0.152457
0.27   0.722786   0.144446
0.28   0.754348   0.137163
0.29   0.784175   0.130005
0.3   0.811428   0.123273
0.31   0.836709   0.117091
0.32   0.85946   0.111567
0.33   0.879973   0.106078
0.34   0.897719   0.100767
0.35   0.913821   0.0951011
0.36   0.927423   0.0903407
0.37   0.939257   0.0858112
0.38   0.949244   0.0811752
0.39   0.957853   0.0770898
0.4   0.965196   0.0731109
0.41   0.971311   0.06899
0.42   0.976422   0.0649579
0.43   0.980934   0.0613343
0.44   0.984507   0.0576219
0.45   0.987423   0.0541405
0.46   0.98973   0.0507123
0.47   0.991824   0.0476926
0.48   0.993223   0.0445309
0.49   0.994376   0.0421507
0.5   0.995338   0.0396639
0.51   0.996016   0.0371772
0.52   0.996662   0.0348325
0.53   0.99717   0.0327187
0.54   0.997533   0.0308359
0.55   0.997832   0.0290774
0.56   0.998147   0.0272301
0.57   0.998393   0.0256492
0.58   0.998622   0.0237841
0.59   0.998793   0.0222033
0.6   0.999007   0.0204803
0.61   0.999167   0.0191303
0.62   0.999242   0.0177626
0.63   0.999311   0.0166081
0.64   0.999455   0.0154712
0.65   0.999503   0.0144055
0.66   0.999589   0.013393
0.67   0.999658   0.0124516
0.68   0.999706   0.0115812
0.69   0.999744   0.0108707
0.7   0.999786   0.0097872
0.71   0.999802   0.00888131
0.72   0.999829   0.00809975
0.73   0.99985   0.00733596
0.74   0.999888   0.00666098
0.75   0.999893   0.005986
0.76   0.99992   0.00538207
0.77   0.999941   0.00468933
0.78   0.999947   0.00438737
0.79   0.999963   0.00392554
0.8   0.999963   0.00335714
0.81   0.999968   0.00294859
0.82   0.999984   0.00261111
0.83   0.999989   0.00236243
0.84   0.999989   0.00198941
0.85   0.999995   0.00177626
0.86   0.999995   0.00154535
0.87   0.999995   0.00126115
0.88   0.999995   0.000923656
0.89   1   0.000834843
0.9   1   0.000603929
0.91   1   0.00040854
0.92   1   0.000319727
0.93   1   0.000248677
0.94   1   0.000195389
0.95   1   0.000124338
0.96   1   5.32879e-05
0.97   1   3.55252e-05
0.98   1   1.77626e-05
0.99   1   1.77626e-05

pcalPIDprobatable = 
0   0   1
0.01   0   1
0.02   0   1
0.03   0   1
0.04   0   1
0.05   0   1
0.06   0   1
0.07   0   1
0.08   0   1
0.09   0   1
0.1   0   1
0.11   0   1
0.12   0   1
0.13   0   1
0.14   0   1
0.15   0   1
0.16   0   1
0.17   0   1
0.18   0   1
0.19   0   1
0.2   0   1
0.21   0   1
0.22   0   1
0.23   0   1
0.24   0   0.999536
0.25   0   0.997875
0.26   0   0.995036
0.27   0   0.990768
0.28   0   0.985536
0.29   0   0.979768
0.3   0   0.973768
0.31   0   0.966143
0.32   0   0.958447
0.33   0   0.949251
0.34   0   0.93934
0.35   0   0.929126
0.36   0   0.917662
0.37   0   0.905752
0.38   0   0.894359
0.39   0   0.88052
0.4   0   0.865949
0.41   0   0.851538
0.42   0   0.836128
0.43   0   0.820467
0.44   0   0.803539
0.45   0   0.78654
0.46   0   0.769326
0.47   0   0.750862
0.48   0   0.732255
0.49   0   0.713737
0.5   0   0.693898
0.51   5.35739e-06   0.672399
0.52   5.35739e-06   0.650381
0.53   5.35739e-06   0.628917
0.54   2.6787e-05   0.607721
0.55   4.28591e-05   0.585579
0.56   0.00010179   0.562758
0.57   0.000192866   0.540401
0.58   0.000353588   0.518544
0.59   0.000546454   0.49617
0.6   0.000776822   0.473474
0.61   0.00105541   0.450135
0.62   0.00132328   0.428332
0.63   0.00173579   0.407153
0.64   0.0021751   0.386582
0.65   0.00266262   0.365886
0.66   0.00320372   0.344851
0.67   0.00383053   0.32578
0.68   0.00444128   0.30687
0.69   0.00499309   0.289013
0.7   0.00572169   0.271977
0.71   0.00659495   0.25521
0.72   0.00748963   0.240156
0.73   0.0084111   0.22596
0.74   0.00935401   0.211782
0.75   0.0105005   0.198121
0.76   0.0118291   0.184979
0.77   0.0131417   0.172675
0.78   0.0148185   0.160747
0.79   0.0165972   0.148747
0.8   0.0184187   0.13823
0.81   0.0205938   0.128391
0.82   0.0232725   0.118605
0.83   0.0260101   0.109212
0.84   0.0290317   0.100462
0.85   0.0325622   0.0925698
0.86   0.0363445   0.0844985
0.87   0.0407001   0.0770165
0.88   0.0459128   0.0697309
0.89   0.0518863   0.0626239
0.9   0.059001   0.0559276
0.91   0.0681728   0.0494098
0.92   0.0803019   0.0439278
0.93   0.0971938   0.0385529
0.94   0.122272   0.034053
0.95   0.158214   0.029303
0.96   0.211429   0.0245174
0.97   0.282592   0.0204103
0.98   0.372987   0.0165354
0.99   0.477767   0.0135176
1   0.58769   0.010482
1.01   0.69278   0.00758915
1.02   0.784311   0.00539276
1.03   0.857649   0.00346422
1.04   0.910724   0.00207139
1.05   0.947958   0.0014464
1.06   0.971734   0.000749987
1.07   0.986703   0.000285709
1.08   0.99521   7.14273e-05
1.09   0.999111   0
1.1   0.999952   0
1.11   0.999979   0
1.12   0.999989   0
1.13   0.999989   0
1.14   0.999995   0
1.15   1   0

bb.grinchPIDpbins = 2.7  2.9  3.2  3.5  4  5  

grinchPIDprobatable = 
0   0   1   1   1   1   1   1
1   0.000750035   0.708333   0.981651   1   0.999186   0.997845   0.994909
2   0.000808966   0.319444   0.834862   0.982544   0.994304   0.997845   0.994431
3   0.000851825   0.0555556   0.518349   0.900249   0.982099   0.996337   0.99353
4   0.000975045   0   0.238532   0.660848   0.892596   0.984702   0.990295
5   0.00236797   0   0.0275229   0.351621   0.6786   0.914674   0.976771
6   0.0104201   0   0   0.0997506   0.380797   0.727645   0.924798
7   0.0489719   0   0   0.00997506   0.135069   0.431157   0.768244
8   0.166047   0   0   0.00498753   0.0358015   0.176255   0.505622
9   0.390345   0   0   0.00249377   0.0081367   0.0551605   0.257478
10   0.652493   0   0   0.00249377   0.00732303   0.0165913   0.0995969
11   0.849168   0   0   0.00249377   0.00650936   0.00948072   0.0320322
12   0.942247   0   0   0.00249377   0.00569569   0.00689507   0.0132584
13   0.973031   0   0   0.00249377   0.00488202   0.00474036   0.0093339
14   0.980735   0   0   0.00249377   0.00406835   0.00387847   0.00768986
15   0.983269   0   0   0   0.00244101   0.00301659   0.00636402
16   0.985123   0   0   0   0.00162734   0.00237018   0.00546245
17   0.986821   0   0   0   0.00081367   0.00172377   0.00456088
18   0.988594   0   0   0   0.00081367   0.00129282   0.00355325
19   0.990105   0   0   0   0.00081367   0.000646412   0.00270471
20   0.99153   0   0   0   0   0.000646412   0.00222741
21   0.992655   0   0   0   0   0.000430942   0.00180314
22   0.99363   0   0   0   0   0.000430942   0.00148494
23   0.994402   0   0   0   0   0.000430942   0.00132584
24   0.995012   0   0   0   0   0.000430942   0.00121977
25   0.995634   0   0   0   0   0.000430942   0.00116674
26   0.996127   0   0   0   0   0.000430942   0.00116674
27   0.996609   0   0   0   0   0.000430942   0.00116674
28   0.99693   0   0   0   0   0.000215471   0.00106067
29   0.997241   0   0   0   0   0.000215471   0.00106067
30   0.997573   0   0   0   0   0.000215471   0.00090157
31   0.997798   0   0   0   0   0   0.000848536
32   0.998012   0   0   0   0   0   0.000795503
33   0.998157   0   0   0   0   0   0.000689436
34   0.998302   0   0   0   0   0   0.000689436
35   0.998457   0   0   0   0   0   0.000636402
36   0.998612   0   0   0   0   0   0.000636402
37   0.998768   0   0   0   0   0   0.000636402
38   0.998891   0   0   0   0   0   0.000583369
39   0.998977   0   0   0   0   0   0.000530335
40   0.999046   0   0   0   0   0   0.000477302
41   0.999132   0   0   0   0   0   0.000424268
42   0.999239   0   0   0   0   0   0.000318201
43   0.999314   0   0   0   0   0   0.000318201
44   0.999384   0   0   0   0   0   0.000318201
45   0.999427   0   0   0   0   0   0.000318201
46   0.999459   0   0   0   0   0   0.000212134
47   0.999496   0   0   0   0   0   0.000212134
48   0.999523   0   0   0   0   0   0.000159101
49   0.999582   0   0   0   0   0   0.000106067

--------[ 2021-10-10 22:39:00 ]
# g4sbs 2nd-order starting optics model for BB distance = 1.85 m, current 750 A, angle = 51.0 degrees (added by AJRP). This should work better than the default model above, but we are still flying blind due to the lack of survey info in the final SBS-1 kinematics

#bb.tracker_pitch_angle = 10.22

bb.optics_order = 2

# slightly better version of SBS-1 optics with more accurate scale factor for simulation field:
#bb.optics_parameters = 
#   -0.014610131  0.00017530728 -0.00039557259     0.27014683  0 0 0 0 0
#     0.45492532   0.0013420436  -0.0031322852     0.12263747  1 0 0 0 0
#   -0.033084639   0.0019269196   -0.003110492   -0.019948636  2 0 0 0 0
#   0.0075938232   -0.031607257      1.0732355   0.0035087727  0 1 0 0 0
#    -0.17425312     0.11658231    -0.21478622   0.0016165883  1 1 0 0 0
#  -0.0059229514   -0.027663009    0.036262367    0.099444276  0 2 0 0 0
#    -0.36418362  -0.0024062888   0.0057744968   -0.067598058  0 0 1 0 0
#    0.045826096  -0.0068087258   0.0095609702    0.059928015  1 0 1 0 0
#     0.12277724    -0.16990165     0.40416301  -0.0047219173  0 1 1 0 0
#  -0.0093677811   0.0038706949  -0.0036022512   0.0028185913  0 0 2 0 0
#   -0.019564786     0.99289825     -2.9372276  -0.0054259747  0 0 0 1 0
#     0.48668258    -0.26638183     0.43247601     0.00139445  1 0 0 1 0
#    0.083491151      0.1370397    -0.16982932  -0.0068146927  0 1 0 1 0
#    -0.36371334     0.52513737     -1.2019374   0.0068090428  0 0 1 1 0
#   -0.082600543    -0.16508635      0.1785205    -0.15213115  0 0 0 2 0
# -9.6140311e-16  9.2605663e-17  -1.357631e-15 -1.0943194e-14  0 0 0 0 1
# -2.1436212e-16  1.9389511e-16  2.1026365e-16  3.8920755e-15  1 0 0 0 1
#  2.2572645e-16 -3.5722312e-17  1.5761084e-16 -3.6675353e-15  0 1 0 0 1
# -4.6911865e-17  -2.405119e-18  1.5525669e-16   1.333243e-15  0 0 1 0 1
#  3.8674907e-16   8.137218e-17  1.4831082e-16 -5.2351365e-15  0 0 0 1 1
#  4.5026307e-17  5.8408047e-17 -8.6377048e-17 -1.5141878e-15  0 0 0 0 2

# Optimized angle and vertex reconstruction results for SBS-1 by Holly S.-Vance: 
# See https://sbs.jlab.org/cgi-bin/DocDB/private/ShowDocument?docid=136 
# and also https://logbooks.jlab.org/entry/3942893
bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

bb.A_pth1 =     0.269072661
bb.B_pth1 =      1.05403892
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs1.dat

bb.optics_parameters = 
    -0.017446109   -0.0011365009   0.00078762704               0    0 0 0 0 0 
      0.44650375    0.0015290496    0.0023825667               0    1 0 0 0 0 
    -0.029787292    0.0038712622   -0.0086062769               0    2 0 0 0 0 
      0.01050181    -0.052614963       1.1483584               0    0 1 0 0 0 
     -0.18216041      0.15905763     -0.34730417               0    1 1 0 0 0 
     0.042033489       0.2534418    -0.052103188               0    0 2 0 0 0 
     -0.35358402   -0.0062595527   -0.0070129757               0    0 0 1 0 0 
     0.044435768    0.0035853569     0.030792449               0    1 0 1 0 0 
      0.16580897     -0.18773997      0.64361873               0    0 1 1 0 0 
     -0.05387635    -0.021167418    -0.043944185               0    0 0 2 0 0 
    -0.026077177       1.0432119      -3.0513707               0    0 0 0 1 0 
      0.49084142     -0.23137723      0.39107269               0    1 0 0 1 0 
     -0.11779895     -0.90196498      0.36537118               0    0 1 0 1 0 
     -0.42899534      0.24511361     -0.87805162               0    0 0 1 1 0 
      0.20091244       1.1236912     -0.76468212               0    0 0 0 2 0 
  -9.6140311e-16   -1.357631e-15   9.2605663e-17               0    0 0 0 0 1 
  -2.1436212e-16   2.1026365e-16   1.9389511e-16               0    1 0 0 0 1 
   2.2572645e-16   1.5761084e-16  -3.5722312e-17               0    0 1 0 0 1 
  -4.6911865e-17   1.5525669e-16   -2.405119e-18               0    0 0 1 0 1 
   3.8674907e-16   1.4831082e-16    8.137218e-17               0    0 0 0 1 1 
   4.5026307e-17  -8.6377048e-17   5.8408047e-17               0    0 0 0 0 2 



--------[ 2021-10-21 00:00:00 ]
# 2nd-order g4sbs optics model for SBS-4 kinematics with BB at 1.80 m, 750 A, angle = 36 degrees. We will update again soon after detailed optics analysis:

#bb.tracker_pitch_angle = 10.22

# updated SBS-4 GEM origin coordinates with straight-track analysis from Holly:
bb.gemorigin_xyz = -0.210082 0.0422169 2.95157
bb.gemtheta = 8.7746 # degrees
bb.gemphi = 179.351  # degrees

# note: ZSIEVE = 1.4261 m in this analysis

#bb.magdist = 

# new SBS-4 optics with more accurate scale factor for simulation magnetic field
#bb.optics_order = 2
#bb.optics_parameters = 
#   -0.015027398  0.00018765968 -0.00051374028     0.27672916  0 0 0 0 0
#     0.46546107   0.0010612757  -0.0023928759    0.098499642  1 0 0 0 0
#   -0.033570945   0.0024086193  -0.0051957876    0.035624703  2 0 0 0 0
#    0.011999017   -0.022931895      1.0480724   0.0031582119  0 1 0 0 0
#    -0.31217021     0.10253566    -0.19688936    0.017506889  1 1 0 0 0
#    0.044763124    -0.18510178     0.53582215     0.12650382  0 2 0 0 0
#    -0.37232662  -0.0019173326   0.0039637876   0.0095627859  0 0 1 0 0
#     0.04359432   -0.009755742    0.017576799    -0.25875063  1 0 1 0 0
#     0.24261546    -0.18601189     0.48521885   -0.029123862  0 1 1 0 0
#  -0.0036788796    0.011818765   -0.013979089     0.49486205  0 0 2 0 0
#    -0.03111767     0.97113338     -2.8283345  -0.0048343158  0 0 0 1 0
#     0.85808879    -0.29683077     0.53406348   -0.042570278  1 0 0 1 0
#     -0.1699298     0.94486501     -2.7837873    -0.26910341  0 1 0 1 0
#     -0.6850525      0.6689666     -1.6517048    0.064599412  0 0 1 1 0
#     0.24378982     -1.2210971      3.6570637     0.19137124  0 0 0 2 0
# -4.1945469e-16  7.6650637e-15 -2.8419043e-15 -8.9913795e-15  0 0 0 0 1
# -1.3191252e-15 -4.2604441e-15  5.1618826e-15 -1.3562711e-14  1 0 0 0 1
# -4.8639232e-18 -8.9677709e-17    1.48821e-17 -4.9251652e-17  0 1 0 0 1
# -3.4881436e-16 -8.8844235e-16  1.3562925e-15 -7.0410442e-15  0 0 1 0 1
# -2.1275432e-17  4.8910742e-16  8.4221738e-17  1.5411584e-15  0 0 0 1 1
# -8.2962594e-17   3.055217e-16 -1.1158777e-16  5.1719949e-16  0 0 0 0 2

# optimized SBS-4 optics by Holly: 

# see: https://sbs.jlab.org/cgi-bin/DocDB/private/ShowDocument?docid=155

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

bb.A_pth1 =     0.271495549
bb.B_pth1 =      1.02274415
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs4.dat

bb.optics_order = 2
bb.optics_parameters = 
     -0.01797485  -0.00046124219    0.0010911736               0    0 0 0 0 0 
      0.45582214  -0.00096052863    0.0017924612               0    1 0 0 0 0 
    -0.031349557    0.0040125907   -0.0030236419               0    2 0 0 0 0 
     0.017577667    -0.056859707       1.1200097               0    0 1 0 0 0 
     -0.32863556      0.10132075     -0.24421395               0    1 1 0 0 0 
     0.057888901     -0.11078315      0.14817166               0    0 2 0 0 0 
     -0.35199856    0.0041524464    -0.005687481               0    0 0 1 0 0 
     0.038560329    -0.019500581     0.015490154               0    1 0 1 0 0 
      0.24986237     -0.15384735       0.4846566               0    0 1 1 0 0 
    -0.015393866     0.021231714   -0.0025673602               0    0 0 2 0 0 
    -0.047532665       1.0576548      -2.9773667               0    0 0 0 1 0 
      0.86959634      -0.2322911       0.4053706               0    1 0 0 1 0 
      -0.1909724      0.40956777     -0.31552673               0    0 1 0 1 0 
      -0.6473745      0.41948171      -1.1311216               0    0 0 1 1 0 
      0.31193275     -0.41579778     -0.13209268               0    0 0 0 2 0 
  -4.1945469e-16  -2.8419043e-15   7.6650637e-15               0    0 0 0 0 1 
  -1.3191252e-15   5.1618826e-15  -4.2604441e-15               0    1 0 0 0 1 
  -4.8639232e-18     1.48821e-17  -8.9677709e-17               0    0 1 0 0 1 
  -3.4881436e-16   1.3562925e-15  -8.8844235e-16               0    0 0 1 0 1 
  -2.1275432e-17   8.4221738e-17   4.8910742e-16               0    0 0 0 1 1 
  -8.2962594e-17  -1.1158777e-16    3.055217e-16               0    0 0 0 0 2 


----------[ 2021-10-24 23:10:00 ] # zero-field run for SBS-4:
bb.frontconstraintwidth_x = 1.0 
bb.frontconstraintwidth_y = 0.3
bb.backconstraintwidth_x = 0.08
bb.backconstraintwidth_y = 0.08

----------[ 2021-10-25 00:18:00 ] 
bb.frontconstraintwidth_x = 0.1 
bb.frontconstraintwidth_y = 0.06
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.06
bb.frontconstraint_x0 = 0.055
bb.frontconstraint_y0 = -0.014


----------[ 2021-11-12 00:00:00 ]  # start of SBS-7 kinematics:
# re-using SBS-1 optics initially until I have time to generate new SBS-7 optics(they should be more or less the same since magnet distance is the same)

# GEM origin coordinates for SBS-7 kinematics: see https://logbooks.jlab.org/entry/3943431
bb.gemorigin_xyz = -0.21192 0.04069 3.0170
bb.gemtheta = 8.8355 # degrees
bb.gemphi   = 179.882 # degrees

# slightly better version of SBS-1 optics with more accurate scale factor for simulation field:
# SBS-7 optics optimization from:
# https://sbs.jlab.org/DocDB/0001/000156/001/sbs7_optics_optimization.pdf

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

bb.A_pth1 =     0.277542448
bb.B_pth1 =     0.926999692
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs7.dat

bb.optics_parameters = 
    -0.018501398  -6.7399972e-05   0.00051113736               0    0 0 0 0 0 
      0.43806034   -0.0023926575    0.0045009461               0    1 0 0 0 0 
    -0.020722233    0.0034615225    -0.012662051               0    2 0 0 0 0 
     0.015320724    -0.045600421       1.1058649               0    0 1 0 0 0 
     -0.26764984      0.11312445     -0.22326626               0    1 1 0 0 0 
     0.012835836    -0.044965034     0.049439064               0    0 2 0 0 0 
     -0.32424517    0.0061390671    -0.011105304               0    0 0 1 0 0 
    -0.018702796   -0.0047125082     0.064590279               0    1 0 1 0 0 
      0.16398927     -0.16899269      0.37757206               0    0 1 1 0 0 
     0.067573257  -0.00043834694    -0.087371113               0    0 0 2 0 0 
    -0.039041417       1.0260013      -2.9822304               0    0 0 0 1 0 
       0.7420103     -0.15498262      0.30890089               0    1 0 0 1 0 
    -0.099567929     -0.12153484      0.13542661               0    0 1 0 1 0 
     -0.49758931      0.16939045     -0.78056765               0    0 0 1 1 0 
      0.27744977      0.43693015     -0.69362856               0    0 0 0 2 0 
  -9.6140311e-16   -1.357631e-15   9.2605663e-17               0    0 0 0 0 1 
  -2.1436212e-16   2.1026365e-16   1.9389511e-16               0    1 0 0 0 1 
   2.2572645e-16   1.5761084e-16  -3.5722312e-17               0    0 1 0 0 1 
  -4.6911865e-17   1.5525669e-16   -2.405119e-18               0    0 0 1 0 1 
   3.8674907e-16   1.4831082e-16    8.137218e-17               0    0 0 0 1 1 
   4.5026307e-17  -8.6377048e-17   5.8408047e-17               0    0 0 0 0 2 
bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

bb.A_pth1 =      0.27756646
bb.B_pth1 =     0.928255129
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs7.dat

bb.optics_parameters = 
    -0.018501398  -6.7399972e-05   0.00051113736               0    0 0 0 0 0 
      0.43806034   -0.0023926575    0.0045009461               0    1 0 0 0 0 
    -0.020722233    0.0034615225    -0.012662051               0    2 0 0 0 0 
     0.015320724    -0.045600421       1.1058649               0    0 1 0 0 0 
     -0.26764984      0.11312445     -0.22326626               0    1 1 0 0 0 
     0.012835836    -0.044965034     0.049439064               0    0 2 0 0 0 
     -0.32424517    0.0061390671    -0.011105304               0    0 0 1 0 0 
    -0.018702796   -0.0047125082     0.064590279               0    1 0 1 0 0 
      0.16398927     -0.16899269      0.37757206               0    0 1 1 0 0 
     0.067573257  -0.00043834694    -0.087371113               0    0 0 2 0 0 
    -0.039041417       1.0260013      -2.9822304               0    0 0 0 1 0 
       0.7420103     -0.15498262      0.30890089               0    1 0 0 1 0 
    -0.099567929     -0.12153484      0.13542661               0    0 1 0 1 0 
     -0.49758931      0.16939045     -0.78056765               0    0 0 1 1 0 
      0.27744977      0.43693015     -0.69362856               0    0 0 0 2 0 
  -9.6140311e-16   -1.357631e-15   9.2605663e-17               0    0 0 0 0 1 
  -2.1436212e-16   2.1026365e-16   1.9389511e-16               0    1 0 0 0 1 
   2.2572645e-16   1.5761084e-16  -3.5722312e-17               0    0 1 0 0 1 
  -4.6911865e-17   1.5525669e-16   -2.405119e-18               0    0 0 1 0 1 
   3.8674907e-16   1.4831082e-16    8.137218e-17               0    0 0 0 1 1 
   4.5026307e-17  -8.6377048e-17   5.8408047e-17               0    0 0 0 0 2 

#    -0.0185013985 -6.73999723e-05  0.000511137356      0.27014683  0 0 0 0 0
#      0.438060342  -0.00239265752   0.00450094615      0.12263747  1 0 0 0 0
#     -0.020722233   0.00346152246   -0.0126620506    -0.019948636  2 0 0 0 0
#     0.0153207243    -0.045600421      1.10586487    0.0035087727  0 1 0 0 0
#     -0.267649839     0.113124448     -0.22326626    0.0016165883  1 1 0 0 0
#     0.0128358363   -0.0449650341    0.0494390641     0.099444276  0 2 0 0 0
#     -0.324245168   0.00613906706   -0.0111053035    -0.067598058  0 0 1 0 0
#    -0.0187027957   -0.0047125082    0.0645902788     0.059928015  1 0 1 0 0
#      0.163989272    -0.168992687     0.377572061   -0.0047219173  0 1 1 0 0
#     0.0675732572 -0.000438346942   -0.0873711125    0.0028185913  0 0 2 0 0
#     -0.039041417      1.02600126     -2.98223036   -0.0054259747  0 0 0 1 0
#      0.742010296    -0.154982623      0.30890089      0.00139445  1 0 0 1 0
#    -0.0995679293    -0.121534843     0.135426612   -0.0068146927  0 1 0 1 0
#      -0.49758931     0.169390452    -0.780567653    0.0068090428  0 0 1 1 0
#      0.277449773     0.436930147    -0.693628561     -0.15213115  0 0 0 2 0
#   -9.6140311e-16   -1.357631e-15   9.2605663e-17  -1.0943194e-14  0 0 0 0 1
#   -2.1436212e-16   2.1026365e-16   1.9389511e-16   3.8920755e-15  1 0 0 0 1
#    2.2572645e-16   1.5761084e-16  -3.5722312e-17  -3.6675353e-15  0 1 0 0 1
#   -4.6911865e-17   1.5525669e-16   -2.405119e-18    1.333243e-15  0 0 1 0 1
#    3.8674907e-16   1.4831082e-16    8.137218e-17  -5.2351365e-15  0 0 0 1 1
#    4.5026307e-17  -8.6377048e-17   5.8408047e-17  -1.5141878e-15  0 0 0 0 2

#   -0.014610131  0.00017530728 -0.00039557259     0.27014683  0 0 0 0 0
#     0.45492532   0.0013420436  -0.0031322852     0.12263747  1 0 0 0 0
#   -0.033084639   0.0019269196   -0.003110492   -0.019948636  2 0 0 0 0
#   0.0075938232   -0.031607257      1.0732355   0.0035087727  0 1 0 0 0
#    -0.17425312     0.11658231    -0.21478622   0.0016165883  1 1 0 0 0
#  -0.0059229514   -0.027663009    0.036262367    0.099444276  0 2 0 0 0
#    -0.36418362  -0.0024062888   0.0057744968   -0.067598058  0 0 1 0 0
#    0.045826096  -0.0068087258   0.0095609702    0.059928015  1 0 1 0 0
#     0.12277724    -0.16990165     0.40416301  -0.0047219173  0 1 1 0 0
#  -0.0093677811   0.0038706949  -0.0036022512   0.0028185913  0 0 2 0 0
#   -0.019564786     0.99289825     -2.9372276  -0.0054259747  0 0 0 1 0
#     0.48668258    -0.26638183     0.43247601     0.00139445  1 0 0 1 0
#    0.083491151      0.1370397    -0.16982932  -0.0068146927  0 1 0 1 0
#    -0.36371334     0.52513737     -1.2019374   0.0068090428  0 0 1 1 0
#   -0.082600543    -0.16508635      0.1785205    -0.15213115  0 0 0 2 0
# -9.6140311e-16  9.2605663e-17  -1.357631e-15 -1.0943194e-14  0 0 0 0 1
# -2.1436212e-16  1.9389511e-16  2.1026365e-16  3.8920755e-15  1 0 0 0 1
#  2.2572645e-16 -3.5722312e-17  1.5761084e-16 -3.6675353e-15  0 1 0 0 1
# -4.6911865e-17  -2.405119e-18  1.5525669e-16   1.333243e-15  0 0 1 0 1
#  3.8674907e-16   8.137218e-17  1.4831082e-16 -5.2351365e-15  0 0 0 1 1
#  4.5026307e-17  5.8408047e-17 -8.6377048e-17 -1.5141878e-15  0 0 0 0 2

#bb.frontconstraintwidth_x = 0.1 # m
#bb.frontconstraintwidth_y = 0.05 # m
#bb.backconstraintwidth_x = 0.05 #m
#bb.backconstraintwidth_y = 0.05 #m
#bb.frontconstraint_x0 = 0.058
#bb.frontconstraint_y0 = -0.017
#bb.backconstraint_x0 = 0.0039
#bb.backconstraint_y0 = -0.0015

bb.frontconstraint_x0 = 0.0531
bb.frontconstraint_y0 = -0.0163
bb.backconstraint_x0 = 0.0039
bb.backconstraint_y0 = -0.0011

bb.frontconstraintwidth_x = 0.0659395
bb.frontconstraintwidth_y = 0.0612968
bb.backconstraintwidth_x = 0.0526578
bb.backconstraintwidth_y = 0.0656529

bb.ecalo_fudgefactor = 1.0

---------[ 2021-11-23 00:00:00 ] # start of SBS-11 kinematics:

# GEM origin coordinates for SBS-7 kinematics: see https://logbooks.jlab.org/entry/3943431
# For SBS-11 we shift the Z coordinate by 0.3 m upstream initially:
#bb.gemorigin_xyz = -0.21192 0.04069 2.7170

# see SBS-11 straight-track results from: 
# https://logbooks.jlab.org/entry/3964257
# see optimization results from: 
# https://sbs.jlab.org/cgi-bin/DocDB/private/ShowDocument?docid=147
# and also: https://logbooks.jlab.org/entry/3966480
# NOTE: ZSIEVE = 1.19570 m from straight-track analysis:
bb.gemorigin_xyz = -0.204061 0.039233 2.69957
bb.gemtheta = 8.71692 # degrees
bb.gemphi   = 179.078 # degrees

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

bb.A_pth1 =     0.271919025
bb.B_pth1 =     0.721807628
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs11.dat

bb.optics_parameters = 
    -0.021445814   5.6483129e-05    0.0001748138               0    0 0 0 0 0 
      0.50718497   -0.0033045368    0.0034522215               0    1 0 0 0 0 
    -0.052706028   -0.0017925724  -0.00074193991               0    2 0 0 0 0 
     0.024046755    -0.049402607       1.0995769               0    0 1 0 0 0 
     -0.33813093     0.062742511     -0.13182694               0    1 1 0 0 0 
    -0.017474794     -0.16929464      0.10216957               0    0 2 0 0 0 
     -0.38891569    0.0068978181   -0.0007431868               0    0 0 1 0 0 
      0.13995738    -0.014271192     0.006813449               0    1 0 1 0 0 
      0.28632707    -0.012067602      0.15722113               0    0 1 1 0 0 
     -0.19851938     0.053847488    -0.023291848               0    0 0 2 0 0 
     -0.05272633       1.0320823      -2.7095261               0    0 0 0 1 0 
      0.81545877      -0.1423075       0.2591647               0    1 0 0 1 0 
      0.11162811      0.48540486     -0.21239857               0    0 1 0 1 0 
     -0.69088033      0.11867846      -0.6093847               0    0 0 1 1 0 
    -0.048904399     -0.38581048    -0.057911773               0    0 0 0 2 0 
  -1.3296127e-15   1.6327616e-15  -3.0916307e-16               0    0 0 0 0 1 
   2.9936009e-16   5.4460988e-16   2.1787721e-16               0    1 0 0 0 1 
  -2.4158595e-16  -1.2146423e-16   8.9872129e-17               0    0 1 0 0 1 
  -1.4567222e-17   1.2541327e-16  -6.0125217e-17               0    0 0 1 0 1 
  -1.4130748e-16   1.0382918e-16  -1.6620708e-17               0    0 0 0 1 1 
  -1.2615664e-16  -5.1558342e-17   2.0467856e-16               0    0 0 0 0 2  

# initial guesses for SBS-11:
#bb.frontconstraintwidth_x = 0.045 # m
#bb.frontconstraintwidth_y = 0.05 # m
#bb.backconstraintwidth_x = 0.04 #m
#bb.backconstraintwidth_y = 0.045 #m
#bb.frontconstraint_x0 = 0.048
#bb.frontconstraint_y0 = -0.013
#bb.backconstraint_x0 = 0.0033
#bb.backconstraint_y0 = 0.0

# for second round of SBS-11 quality checks:

bb.frontconstraint_x0 = 0.060
bb.frontconstraint_y0 = -0.013
bb.backconstraint_x0 = 0.0031
bb.backconstraint_y0 = 0.0007

bb.frontconstraintwidth_x = 0.0718517
bb.frontconstraintwidth_y = 0.069917
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.06

bb.ecalo_fudgefactor = 1.0

# for single C foil runs use a wider cut in X: 
----------[ 2021-11-24 23:59:00 ] 
bb.backconstraintwidth_x = 0.06 
bb.backconstraintwidth_y = 0.06
bb.frontconstraintwidth_x = 0.75 # m
bb.frontconstraintwidth_y = 0.25 # basically set wide open at the front, so that we still enforce calo constraint at the back but not at the front

----------[ 2021-11-25 00:56:00 ] # turn BB magnet on starting run 12279:

bb.backconstraintwidth_x = 0.06 # m 
bb.backconstraintwidth_y = 0.06 # m
bb.frontconstraintwidth_x = 0.75 # m 
bb.frontconstraintwidth_y = 0.2 # m

----------[ 2021-11-25 04:21:00 ] # going to production here, assuming we can get the constraints right
#bb.frontconstraintwidth_x = 0.06 # m 
#bb.frontconstraintwidth_y = 0.06 # m
# for second round of SBS-11 quality checks:

bb.frontconstraint_x0 = 0.060
bb.frontconstraint_y0 = -0.013
bb.backconstraint_x0 = 0.0031
bb.backconstraint_y0 = 0.0007

bb.frontconstraintwidth_x = 0.0718517
bb.frontconstraintwidth_y = 0.069917
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.06


------[ 2021-11-25 09:29:00 ] # attempt to analyze low-current LH2 run without constraints:
bb.frontconstraintwidth_x = 0.75 # m 
bb.frontconstraintwidth_y = 0.2 # m
# set offsets to zero to minimize confusion when we optimize
#bb.frontconstraint_x0 = 0.0
#bb.frontconstraint_y0 = 0.0

------[ 2021-11-25 10:10:00 ] # LH2 runs at 5-15 uA we need to use the optics and slope constraints as well:
# for second round of SBS-11 quality checks:

bb.frontconstraint_x0 = 0.060
bb.frontconstraint_y0 = -0.013
bb.backconstraint_x0 = 0.0031
bb.backconstraint_y0 = 0.0007

bb.frontconstraintwidth_x = 0.0718517
bb.frontconstraintwidth_y = 0.069917
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.06

------[ 2021-11-25 11:40:00 ] # back to 1 uA: attempt to analyze low-current LH2 run without constraints:
bb.frontconstraintwidth_x = 0.75 # m 
bb.frontconstraintwidth_y = 0.2 # m


----------[ 2021-11-25 12:15:00 ] # now really going to production; may need to adjust constraints
# for second round of SBS-11 quality checks:

bb.frontconstraint_x0 = 0.060
bb.frontconstraint_y0 = -0.013
bb.backconstraint_x0 = 0.0031
bb.backconstraint_y0 = 0.0007

bb.frontconstraintwidth_x = 0.0718517
bb.frontconstraintwidth_y = 0.069917
bb.backconstraintwidth_x = 0.06
bb.backconstraintwidth_y = 0.06


----------[ 2022-01-06 12:00:00 ] # start of January 2022 running and SBS-14 kinematics:
# for SBS-14 we are back at 1.85 meter distance:

# initial guess for GEM alignments: add 0.3 meters to GEM z coordinate relative to SBS-11:
#bb.gemorigin_xyz = -0.204061 0.039233 3.0
#bb.gemtheta = 8.71692 # degrees
#bb.gemphi   = 179.078 # degrees

# new results for SBS-14 straight-through alignment:
bb.gemorigin_xyz = -0.206968 0.0412156 3.0399
bb.gemtheta = 8.6725 
bb.gemphi = 180.8816

# note: z sieve = 1.50922


# initial guess for optics: re-use SBS-1 optics which is very close to SBS-14 optics in 
# terms of BigBite angle and distance:

# Optimized angle and vertex reconstruction results for SBS-1 by Holly S.-Vance: 
# See https://sbs.jlab.org/cgi-bin/DocDB/private/ShowDocument?docid=136 
# and also https://logbooks.jlab.org/entry/3942893
# Momentum optimization forthcoming: 

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

bb.A_pth1 =     0.268131453
bb.B_pth1 =     0.970217825
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs14.dat

bb.optics_order = 2

bb.optics_parameters = 
    -0.021087198    0.0015626434    -0.001557145               0    0 0 0 0 0 
      0.43473343   -0.0035813804     0.002994747               0    1 0 0 0 0 
    -0.029568163    0.0053920863   -0.0072221746               0    2 0 0 0 0 
     0.013703451    -0.058665806       1.1515291               0    0 1 0 0 0 
     -0.20259309      0.14689308     -0.35454546               0    1 1 0 0 0 
     0.060707016    -0.087799015      0.32606871               0    0 2 0 0 0 
     -0.31265488    0.0090633657   -0.0034176243               0    0 0 1 0 0 
     0.028854239    -0.021566283     0.015904708               0    1 0 1 0 0 
      0.14569602     -0.19583943       0.6030659               0    0 1 1 0 0 
     0.021839681     0.021794253   -0.0019607419               0    0 0 2 0 0 
    -0.033596204       1.0278543      -3.0275756               0    0 0 0 1 0 
      0.54225719     -0.20821397      0.32661704               0    1 0 0 1 0 
     -0.34471479      0.28184896      -1.3030854               0    0 1 0 1 0 
     -0.36880122      0.26892571     -0.59289757               0    0 0 1 1 0 
       0.5419537     -0.12724728      0.95654859               0    0 0 0 2 0 
  -9.6140311e-16   9.2605663e-17   -1.357631e-15               0    0 0 0 0 1 
  -2.1436212e-16   1.9389511e-16   2.1026365e-16               0    1 0 0 0 1 
   2.2572645e-16  -3.5722312e-17   1.5761084e-16               0    0 1 0 0 1 
  -4.6911865e-17   -2.405119e-18   1.5525669e-16               0    0 0 1 0 1 
   3.8674907e-16    8.137218e-17   1.4831082e-16               0    0 0 0 1 1 
   4.5026307e-17   5.8408047e-17  -8.6377048e-17               0    0 0 0 0 2 



# constraint parameters: 
bb.frontconstraint_x0 = 0.0538
bb.frontconstraint_y0 = -0.0167
bb.backconstraint_x0 = 0.0044
bb.backconstraint_y0 = 0.0021

bb.frontconstraintwidth_x = 0.074377
bb.frontconstraintwidth_y = 0.0660473
bb.backconstraintwidth_x = 0.0528561
bb.backconstraintwidth_y = 0.0685936


# time-dependent entries for SBS-14 optics data:
---------[ 2022-01-11 8:45:00 ] # zero-field, five-foil:

#bb.gem.useopticsconstraint = 0
#bb.gem.useslopeconstraint = 0

# for zero-field running we set the front constraints wide open:
bb.frontconstraintwidth_x = 0.75
bb.frontconstraintwidth_y = 0.25

---------[ 2022-01-11 9:13:00 ] # field-on, five-foil optics:

# constraint parameters: 
bb.frontconstraint_x0 = 0.0538
bb.frontconstraint_y0 = -0.0167
bb.backconstraint_x0 = 0.0044
bb.backconstraint_y0 = 0.0021

bb.frontconstraintwidth_x = 0.074377
bb.frontconstraintwidth_y = 0.0660473
bb.backconstraintwidth_x = 0.0528561
bb.backconstraintwidth_y = 0.0685936

---------[ 2022-01-11 10:09:00 ] # zero-field, 1-foil optics: 

#bb.gem.useopticsconstraint = 0
#bb.gem.useslopeconstraint = 0

# for zero-field running we set the front constraints wide open:
bb.frontconstraintwidth_x = 0.75
bb.frontconstraintwidth_y = 0.25

---------[ 2022-01-11 10:35:00 ] # presumably going to production after this:


#bb.gem.useopticsconstraint = 1
#bb.gem.useslopeconstraint = 1

bb.frontconstraint_x0 = 0.0538
bb.frontconstraint_y0 = -0.0167
bb.backconstraint_x0 = 0.0044
bb.backconstraint_y0 = 0.0021

bb.frontconstraintwidth_x = 0.074377
bb.frontconstraintwidth_y = 0.0660473
bb.backconstraintwidth_x = 0.0528561
bb.backconstraintwidth_y = 0.0685936

--------[ 2022-01-21 12:00:00 ] ## starting SBS-8 kinematics for GMN: 

# new results for SBS-14 straight-through alignment:
#bb.gemorigin_xyz = -0.206968 0.0412156 3.1899
#bb.gemtheta = 8.6725 
#bb.gemphi = 180.8816

# straight-track results from Holly: 
#bb.gemorigin_xyz = -0.213869 0.0394128 3.12109
#bb.gemtheta = 8.82378 # degrees
#bb.gemphi = 179.406 # degrees
# new straight-track results from Andrew (maybe slight improvement):
bb.gemorigin_xyz = -0.21323 0.03872 3.11940
bb.gemtheta = 8.81847
bb.gemphi = 179.534

# NOTE: ZSIEVE = 1.59074

# starting model for SBS-8 from g4sbs: updated with scale factor 0.9644 for BB field map in simulation and also distance 1.9594 m
bb.optics_order = 2
#bb.optics_parameters = 
#   -0.013951072 -6.7189159e-05  0.00022486239     0.26957803  0 0 0 0 0
#     0.43275107   0.0010961293  -0.0022068665     0.12271782  1 0 0 0 0
#   -0.029264943   0.0089086215   -0.018497904   -0.018303949  2 0 0 0 0
#    0.015286973  -0.0090579402      1.0091097    0.006524678  0 1 0 0 0
#     -0.3771755    0.097156428    -0.23342715    0.018574322  1 1 0 0 0
#   -0.014208137    0.023096216   -0.032298685    0.078452456  0 2 0 0 0
#    -0.34635355 -0.00090695503   0.0018848963   -0.068108122  0 0 1 0 0
#    0.037279672   -0.040196986    0.085799908    0.059415542  1 0 1 0 0
#     0.28933729     -0.2041523     0.62906153   -0.048050144  0 1 1 0 0
#  0.00081558551    0.042209088   -0.099658514   0.0017245797  0 0 2 0 0
#   -0.041171438     0.93418238      -2.868918   -0.014706424  0 0 0 1 0
#      1.0957664    -0.32511236     0.72772292   -0.045808129  1 0 0 1 0
#     0.11481975    -0.44512229      1.0695019    0.036626935  0 1 0 1 0
#    -0.87794966     0.84190651     -2.3706859     0.11360024  0 0 1 1 0
#      -0.103686     0.94946168     -2.4442919    -0.28814815  0 0 0 2 0
# -3.6600546e-15   1.209214e-14 -3.8572524e-14  -1.527841e-14  0 0 0 0 1
#  3.4661576e-15 -1.1778173e-14  2.9222354e-14 -4.0242914e-15  1 0 0 0 1
#  6.4569628e-16  7.5649958e-16 -2.2941854e-15 -3.0794741e-15  0 1 0 0 1
#  6.1103084e-16 -2.2602392e-15  5.9912025e-15 -2.2093524e-16  0 0 1 0 1
#  3.4916311e-16 -5.7801037e-16 -8.8795124e-16 -1.1214327e-14  0 0 0 1 1
# -5.5736366e-16  2.2786736e-16  4.0535244e-17  5.8646239e-15  0 0 0 0 2

# below is the result of Holly's optimization for SBS-8

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model


# the "A" and "B" parameters below were obtained with SBS +70% field setting: 
bb.A_pth1 =     0.292223032
bb.B_pth1 =      1.04733553
bb.C_pth1 = 0.0

# the "A" and "B" parameters below were obtained with SBS OFF:
#bb.A_pth1 =     0.288855182
#bb.B_pth1 =      1.05193488
#bb.C_pth1 = 0.0


#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs8.dat

bb.optics_parameters = 
    -0.013759973   -1.592921e-05     0.001484359               0    0 0 0 0 0 
      0.44906976   2.6389167e-05   -0.0036176462               0    1 0 0 0 0 
      0.16310164     0.014597315    -0.058818547               0    2 0 0 0 0 
      0.01364764    -0.047671995       1.1175984               0    0 1 0 0 0 
     -0.45218719      0.04751815   -0.0042020046               0    1 1 0 0 0 
    -0.077785229    -0.052027732     0.068093627               0    0 2 0 0 0 
     -0.43199609    0.0015938948      0.01604651               0    0 0 1 0 0 
      -1.2925889    -0.099158508      0.41574763               0    1 0 1 0 0 
      0.46102344     0.028166699     -0.24774137               0    0 1 1 0 0 
       2.2956647      0.17020216     -0.72968708               0    0 0 2 0 0 
    -0.049153808       1.0447057       -3.149672               0    0 0 0 1 0 
       1.1363216     -0.27950141      0.32612254               0    1 0 0 1 0 
      0.48362063     -0.21130766       0.4530525               0    0 1 0 1 0 
     -0.79972375      0.49093974     -0.86213425               0    0 0 1 1 0 
     -0.59939069      0.73703577       -1.665613               0    0 0 0 2 0 
   6.6662462e-13   1.4460761e-13   -8.564676e-14               0    0 0 0 0 1 
  -1.3636705e-12  -3.0468266e-13   1.8938695e-13               0    1 0 0 0 1 
   2.4167385e-14    5.387588e-15  -2.7130557e-15               0    0 1 0 0 1 
  -3.5811408e-13  -8.0462394e-14   5.0353397e-14               0    0 0 1 0 1 
   1.0681994e-14   2.3176467e-15  -1.6232571e-15               0    0 0 0 1 1 
   3.1170311e-16  -2.2752056e-16   2.5453538e-16               0    0 0 0 0 2 



# below is the result of the SBS-8 g4sbs optics for bigbite distance 2.00 m
#   -0.013771663  -0.0002256521  0.00018312692     0.27196752  0 0 0 0 0
#      0.4246639  -0.0017872321   0.0013105332     0.12389473  1 0 0 0 0
#   -0.029407222  -0.0034351678   0.0026692106   -0.033647216  2 0 0 0 0
#    0.015499082   -0.026390002      1.0582615    0.012507458  0 1 0 0 0
#    -0.37394344  -0.0011563465    0.016638197    0.024112188  1 1 0 0 0
#   -0.024507171   -0.017279413    0.050821083    0.042019504  0 2 0 0 0
#    -0.33937885   0.0094565558    -0.01029198   -0.071912664  0 0 1 0 0
#     0.03498804    0.037509813   -0.041761505     0.15572015  1 0 1 0 0
#     0.28268961     0.08164754    -0.14186185    -0.12489609  0 1 1 0 0
#    0.011371105   -0.084834877     0.10335449    -0.14492448  0 0 2 0 0
#   -0.041417374     0.95606808     -2.9719402   -0.032529073  0 0 0 1 0
#      1.1091747     -0.2252927     0.45584208   -0.071101601  1 0 0 1 0
#      0.1327009   -0.089250991     0.25377818     0.24645197  0 1 0 1 0
#    -0.88172666     0.51516512     -1.4597906      0.3374035  0 0 1 1 0
#    -0.10122694     0.32909604    -0.94581536    -0.59557723  0 0 0 2 0
#  6.6662462e-13  -8.564676e-14  1.4460761e-13  1.7773754e-13  0 0 0 0 1
# -1.3636705e-12  1.8938695e-13 -3.0468266e-13 -4.0371613e-14  1 0 0 0 1
#  2.4167385e-14 -2.7130557e-15   5.387588e-15  5.4713928e-15  0 1 0 0 1
# -3.5811408e-13  5.0353397e-14 -8.0462394e-14 -7.2779683e-15  0 0 1 0 1
#  1.0681994e-14 -1.6232571e-15  2.3176467e-15  7.6845026e-15  0 0 0 1 1
#  3.1170311e-16  2.5453538e-16 -2.2752056e-16 -2.8311793e-15  0 0 0 0 2

# we will start with at least the X front constraint width wide open, until we take the zero-field data and 
# turn on the magnets with beam:

bb.frontconstraintwidth_x = 1.0  # m
bb.frontconstraintwidth_y = 0.25 # also relax y front constraint width initially

# When the zero-field is done, we will want to use these values initially:

#bb.frontconstraintwidth_x = 0.2 # m
#bb.frontconstraintwidth_y = 0.1 # m


----------[ 2022-01-22 8:00:00 ] # sieve out, tighten up tracking constraints:

bb.frontconstraint_x0 = 0.0440
bb.frontconstraint_y0 = -0.0133
bb.backconstraint_x0 = 0.0021
bb.backconstraint_y0 = 0.0015

bb.frontconstraintwidth_x = 0.0451774
bb.frontconstraintwidth_y = 0.0486681
bb.backconstraintwidth_x = 0.0499104
bb.backconstraintwidth_y = 0.0624532



-----------[ 2022-02-01 12:00:00 ] # starting SBS-9: gonna need some optics and some offsets:

# Let's re-use SBS-11 to start: 

# setting zgem to 2.7 initially (guess based on SBS-11)
#bb.gemorigin_xyz = -0.21323 0.03872 2.7
#bb.gemtheta = 8.81847
#bb.gemphi = 179.534

# new straight-track alignment:
bb.gemorigin_xyz = -0.20603 0.04289 2.70386
# note: ZSIEVE = 1.18572
bb.gemtheta = 8.7696
bb.gemphi = 178.704

bb.optics_order = 2
#bb.optics_parameters = 
#    -0.0214458141  5.64831289e-05  0.000174813803      0.27029389  0 0 0 0 0
#       0.50718497  -0.00330453678   0.00345222149      0.12205141  1 0 0 0 0
#    -0.0527060279   -0.0017925724 -0.000741939914     -0.01022957  2 0 0 0 0
#     0.0240467551   -0.0494026074      1.09957687    0.0028131941  0 1 0 0 0
#     -0.338130927    0.0627425108    -0.131826944     0.019582153  1 1 0 0 0
#    -0.0174747942    -0.169294644     0.102169572     0.035205625  0 2 0 0 0
#     -0.388915692   0.00689781813 -0.000743186795    -0.067857803  0 0 1 0 0
#      0.139957379   -0.0142711919   0.00681344901     0.049707273  1 0 1 0 0
#      0.286327073   -0.0120676021     0.157221134    -0.031227027  0 1 1 0 0
#     -0.198519376     0.053847488   -0.0232918483    0.0028059771  0 0 2 0 0
#    -0.0527263298      1.03208226     -2.70952607   -0.0037280235  0 0 0 1 0
#      0.815458771    -0.142307502     0.259164705    -0.041152624  1 0 0 1 0
#      0.111628111     0.485404858    -0.212398573      0.11845865  0 1 0 1 0
#     -0.690880332     0.118678459    -0.609384699     0.067290195  0 0 1 1 0
#    -0.0489043987    -0.385810483   -0.0579117727     -0.23627613  0 0 0 2 0
#   -1.3296127e-15   1.6327616e-15  -3.0916307e-16   -1.476311e-14  0 0 0 0 1
#    2.9936009e-16   5.4460988e-16   2.1787721e-16   -1.619684e-14  1 0 0 0 1
#   -2.4158595e-16  -1.2146423e-16   8.9872129e-17  -6.9074173e-16  0 1 0 0 1
#   -1.4567222e-17   1.2541327e-16  -6.0125217e-17  -5.6195273e-15  0 0 1 0 1
#   -1.4130748e-16   1.0382918e-16  -1.6620708e-17  -7.4097742e-15  0 0 0 1 1
#   -1.2615664e-16  -5.1558342e-17   2.0467856e-16  -2.0608788e-15  0 0 0 0 2

bb.preconflag = 1
# NOTE on new momentum reconstruction formalism: 1st-order momentum is calculated from
#   p*thetabend = A_pth1*(1.0 + (B_pth1+C_pth1*bb.magdist)*thtgt)
# and momentum expansion coefficients are for delta = p(first order) * (1+delta)
# In most of the acceptance we don't need any corrections beyond the first-order model

bb.A_pth1 =     0.269878955
bb.B_pth1 =     0.893519136
bb.C_pth1 = 0.0

#NOTE: angle and vertex reconstruction coefficients are from newfit_sbs9.dat

bb.optics_order = 2

bb.optics_parameters = 
    -0.020517883  -0.00042989563      0.00010271               0    0 0 0 0 0 
      0.51141348   -0.0013363913    0.0040284468               0    1 0 0 0 0 
     -0.03950825     0.010568943   -0.0013542112               0    2 0 0 0 0 
     0.012457819    -0.064768269       1.1245907               0    0 1 0 0 0 
     -0.25850727      0.10585941     -0.25062785               0    1 1 0 0 0 
    -0.023728789     -0.11053071      0.21187121               0    0 2 0 0 0 
     -0.39356779   -0.0024541914   -0.0037547647               0    0 0 1 0 0 
     0.034051545     -0.01595371    0.0071457255               0    1 0 1 0 0 
      0.19999534     -0.12106357      0.41760035               0    0 1 1 0 0 
   -0.0010542356   -0.0040907474    -0.010128135               0    0 0 2 0 0 
     -0.02582583       1.0553173      -2.7427942               0    0 0 0 1 0 
      0.62369246     -0.15894176       0.2763896               0    1 0 0 1 0 
      0.21370884       0.3283995     -0.88585797               0    0 1 0 1 0 
     -0.47926776      0.18568832     -0.66136553               0    0 0 1 1 0 
     -0.24059532   -0.0050616617      0.61274832               0    0 0 0 2 0 
  -1.3296127e-15  -3.0916307e-16   1.6327616e-15               0    0 0 0 0 1 
   2.9936009e-16   2.1787721e-16   5.4460988e-16               0    1 0 0 0 1 
  -2.4158595e-16   8.9872129e-17  -1.2146423e-16               0    0 1 0 0 1 
  -1.4567222e-17  -6.0125217e-17   1.2541327e-16               0    0 0 1 0 1 
  -1.4130748e-16  -1.6620708e-17   1.0382918e-16               0    0 0 0 1 1 
  -1.2615664e-16   2.0467856e-16  -5.1558342e-17               0    0 0 0 0 2 


# we have to start with more open cuts until we know what we have:
bb.frontconstraint_x0 = 0.0436
bb.frontconstraint_y0 = -0.0136
bb.backconstraint_x0 = 0.0056
bb.backconstraint_y0 = 0.0010

bb.frontconstraintwidth_x = 0.0854875
bb.frontconstraintwidth_y = 0.07077
bb.backconstraintwidth_x = 0.0511283
bb.backconstraintwidth_y = 0.0690686


-------[ 2022-02-02 17:25:00 ] # start zero-field running for optics

# open up front constraint points for field-off running.
bb.frontconstraintwidth_x = 0.75 # m
bb.frontconstraintwidth_y = 0.25 # m

------[ 2022-02-02 18:30:00 ] # turn field back on for optics running and production:

bb.frontconstraintwidth_x = 0.0854875
bb.frontconstraintwidth_y = 0.07077
bb.backconstraintwidth_x = 0.0511283
bb.backconstraintwidth_y = 0.0690686