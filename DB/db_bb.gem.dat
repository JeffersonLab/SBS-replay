##################################################################################################################
#          ATTENTION: THIS IS THE "v3" database (after J0 swap) below:        #
##################################################################################################################

----------[ 2022-01-06 12:00:00 ] # approximate time of replacement of layer J0

##################### START WITH PARAMETERS THAT AREN'T EXPECTED TO CHANGE OFTEN #####################

bb.gem.modules = m0   m1    m2   m3     m4 m5 m6 m7

bb.gem.m0.layer = 0

bb.gem.m1.layer = 1

bb.gem.m2.layer = 2

bb.gem.m3.layer = 3

bb.gem.m4.layer = 4
bb.gem.m5.layer = 4
bb.gem.m6.layer = 4
bb.gem.m7.layer = 4


# APV mapping configurations: 0 = INFN, 1 = UVA X/Y, 2 = UVA U/V
bb.gem.m0.apvmap = 2 # UVA U/V

bb.gem.m1.apvmap = 2 # U/V

bb.gem.m2.apvmap = 2 # U/V

bb.gem.m3.apvmap = 2 # U/V
 
bb.gem.m4.apvmap = 1 # UVA X/Y
bb.gem.m5.apvmap = 1 # UVA X/Y
bb.gem.m6.apvmap = 1 # UVA X/Y
bb.gem.m7.apvmap = 1 # UVA X/Y

# basic flags controlling decoding:
bb.gem.pedestalmode = 0
bb.gem.commonmode_flag = 2 # 0 = sorting, 1 = "Danning method", 2 = histogramming method cm subtraction
bb.gem.commonmode_online_flag = 3 # 3 = Danning method during GMn, 4 = Danning \
method during GEn
# commenting out definition of cm flags channel
#bb.gem.chan_cm_flags = 512 # defines the "dummy" reference channel for storing the cm_enable and build_all_samples flags
bb.gem.commonmode_nstriplo = 28
bb.gem.commonmode_nstriphi = 28
bb.gem.commonmode_niter = 3
bb.gem.commonmode_minstrips = 20
bb.gem.plot_common_mode = 1
bb.gem.pedsub_online = 1 # normally this should always be set to 1
bb.gem.dump_geometry_info = 0
bb.gem.efficiency_bin_width_1D = 0.02
bb.gem.efficiency_bin_width_2D = 0.02
bb.gem.commonmode_range_nsigma = 5.0

# (online) Danning-method parameters:
bb.gem.commonmode_danning_nsigma_cut = 3.0

# histogramming-method parameters: 
bb.gem.commonmode_binwidth_nsigma = 2.0
bb.gem.commonmode_scanrange_nsigma = 2.5
bb.gem.commonmode_stepsize_nsigma = 0.25

bb.gem.correct_common_mode = 1
bb.gem.correct_common_mode_minstrips = 15
bb.gem.correct_common_mode_nsigma = 2.0

bb.gem.use_commonmode_rolling_average = 1
bb.gem.commonmode_nevents_lookback = 10

bb.gem.m0.modulegain = 1
bb.gem.m1.modulegain = 1
bb.gem.m2.modulegain = 1
bb.gem.m3.modulegain = 1
bb.gem.m4.modulegain = 1
bb.gem.m5.modulegain = 1
bb.gem.m6.modulegain = 1
bb.gem.m7.modulegain = 1

bb.gem.m0.ugain = 1
bb.gem.m1.ugain = 1
bb.gem.m2.ugain = 1
bb.gem.m3.ugain = 1
bb.gem.m4.ugain = 1
bb.gem.m5.ugain = 1
bb.gem.m6.ugain = 1
bb.gem.m7.ugain = 1

bb.gem.m0.vgain = 1
bb.gem.m1.vgain = 1
bb.gem.m2.vgain = 1
bb.gem.m3.vgain = 1
bb.gem.m4.vgain = 1
bb.gem.m5.vgain = 1
bb.gem.m6.vgain = 1
bb.gem.m7.vgain = 1

bb.gem.plot_event_info = 0


#bb.gem.m0.position =               0               0               0
#bb.gem.m0.angle =               0               0               0
#bb.gem.m1.position =       0.5300487   -0.0008874939       0.1322009
#bb.gem.m1.angle =     -0.03027485      -0.2091334      -0.1560058
#bb.gem.m1.position =        0           0            0.16
#bb.gem.m1.angle =           0           0            0
#bb.gem.m2.position =    -0.007559262     0.005483991       0.2786593
#bb.gem.m2.angle =    -0.001842518      0.03094263      -0.2896951
#bb.gem.m3.position =     -0.00902809     0.005168542       0.4556253
#bb.gem.m3.angle =     -0.02211702        0.041642      -0.4378388
#bb.gem.m4.position =       -0.764861    0.0008118694        1.571978
#bb.gem.m4.angle =     0.007512299      -0.1152294      -0.2924179
#bb.gem.m5.position =      -0.2527972    -0.002976675        1.530737
#bb.gem.m5.angle =      -0.1457525     0.005773793       -0.288891
#bb.gem.m6.position =       0.2581965    -0.009116702        1.574413
#bb.gem.m6.angle =    -0.009754522       -0.350714       -0.293367
#bb.gem.m7.position =       0.7709504     -0.01266619        1.533751
#bb.gem.m7.angle =      -0.2747643    -0.004406912      -0.2101869

# initial alignment at SBS-14 with cosmic, run 13144:

#bb.gem.m0.position =               0               0               0
#bb.gem.m0.angle =               0               0               0
#bb.gem.m1.position =    -0.001954513     -0.01134765       0.1639595
#bb.gem.m1.angle =     -0.02666889      0.01705889      0.05252126
#bb.gem.m2.position =    -0.007401226     0.006056647       0.2785673
#bb.gem.m2.angle =      0.01060074      0.03872735      -0.2882233
#bb.gem.m3.position =    -0.009096659     0.004456345       0.4554179
#bb.gem.m3.angle =      -0.0446651      0.04245064      -0.4383002
#bb.gem.m4.position =      -0.7642624     0.002077642        1.570671
#bb.gem.m4.angle =     -0.06548244      -0.1482707      -0.3291127
#bb.gem.m5.position =      -0.2523894    -0.002123372        1.530318
#bb.gem.m5.angle =      -0.1433406      -0.0857477      -0.3093657
#bb.gem.m6.position =       0.2582463    -0.008230987         1.57488
#bb.gem.m6.angle =     -0.01092449      -0.2465096       -0.284389
#bb.gem.m7.position =       0.7702822     -0.01153325        1.532191
#bb.gem.m7.angle =      -0.2498589    -0.005741859      -0.2241135

# Better alignment at SBS-14 with 1.4M tracks from optics runs 13193-13196:

bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =     -0.00190827     -0.01146471       0.1649894
bb.gem.m1.angle =       0.0343289      0.03669316      0.04158537
bb.gem.m2.position =    -0.007452511     0.006062391       0.2782266
bb.gem.m2.angle =       0.1264656      0.04048647      -0.2963303
bb.gem.m3.position =     -0.00908496     0.004405104       0.4564431
bb.gem.m3.angle =      0.08732198      0.07478543      -0.4459407
bb.gem.m4.position =      -0.7646241     0.002086477        1.573567
bb.gem.m4.angle =     -0.02277654      -0.3173591      -0.3238963
bb.gem.m5.position =      -0.2524617    -0.002086854        1.531969
bb.gem.m5.angle =      -0.1023922     0.009814123      -0.3089679
bb.gem.m6.position =       0.2584947    -0.008109702        1.575409
bb.gem.m6.angle =      0.06506941      -0.1580078       -0.274574
bb.gem.m7.position =       0.7703868     -0.01163536        1.533183
bb.gem.m7.angle =      -0.2013085      -0.1343043      -0.2989329



# we MAY need to adjust the size on the U/V layers, but for now let's just use a nominal 40x150 cm^2:

# define size of layer active area: 
bb.gem.m0.size = 1.50 0.40 0.001

bb.gem.m1.size = 1.50 0.40 0.001

bb.gem.m2.size = 1.50 0.40 0.001

bb.gem.m3.size = 1.50 0.40 0.001

bb.gem.m4.size = 0.512 0.6144 0.001
bb.gem.m5.size = 0.512 0.6144 0.001
bb.gem.m6.size = 0.512 0.6144 0.001
bb.gem.m7.size = 0.512 0.6144 0.001

# define strip directions:

bb.gem.m0.uangle = 150.0
bb.gem.m0.vangle = -150.0

bb.gem.m1.uangle = 150.0
bb.gem.m1.vangle = -150.0

bb.gem.m2.uangle = 150.0
bb.gem.m2.vangle = -150.0

bb.gem.m3.uangle = 150.0
bb.gem.m3.vangle = -150.0

bb.gem.m4.uangle = 0.0
bb.gem.m4.vangle = -90.0
bb.gem.m5.uangle = 0.0
bb.gem.m5.vangle = -90.0
bb.gem.m6.uangle = 0.0
bb.gem.m6.vangle = -90.0
bb.gem.m7.uangle = 0.0
bb.gem.m7.vangle = -90.0

# Strip offsets: 

# U offsets:
bb.gem.m0.uoffset = 0.0108

bb.gem.m1.uoffset = 0.0108

bb.gem.m2.uoffset = 0.0108

bb.gem.m3.uoffset = 0.0108

bb.gem.m4.uoffset = 0.0
bb.gem.m5.uoffset = 0.0
bb.gem.m6.uoffset = 0.0
bb.gem.m7.uoffset = 0.0

# V offsets:
bb.gem.m0.voffset = 0.0108

bb.gem.m1.voffset = 0.0108

bb.gem.m2.voffset = 0.0108

bb.gem.m3.voffset = 0.0108

bb.gem.m4.voffset = 0.0
bb.gem.m5.voffset = 0.0
bb.gem.m6.voffset = 0.0
bb.gem.m7.voffset = 0.0

# strip counts:

bb.gem.m0.nstripsu = 3840
bb.gem.m0.nstripsv = 3840

bb.gem.m1.nstripsu = 3840
bb.gem.m1.nstripsv = 3840

bb.gem.m2.nstripsu = 3840
bb.gem.m2.nstripsv = 3840

bb.gem.m3.nstripsu = 3840
bb.gem.m3.nstripsv = 3840

bb.gem.m4.nstripsu = 1280
bb.gem.m4.nstripsv = 1536
bb.gem.m5.nstripsu = 1280
bb.gem.m5.nstripsv = 1536
bb.gem.m6.nstripsu = 1280
bb.gem.m6.nstripsv = 1536
bb.gem.m7.nstripsu = 1280
bb.gem.m7.nstripsv = 1536

# strip pitch (always 0.4 mm):
bb.gem.upitch = 0.0004
bb.gem.vpitch = 0.0004

# DECODE MAP: 

################### DECODE INFO ########################################################################
## Channel maps for decoding explained                                                                ##
## Each entry corresponds to one APV card                                                             ## 
## Crate = ROC ID = 20 for BigBite VTP                                                                ##
## Slot = 11 for BigBite VTP                                                                          ##
## fiber/mpd is fiber number for an MPD module, this is unique for each module within a VTP/SSP       ##
## gemid is unique "production ID" of a GEM module, not currently used by analysis but useful         ##
## for bookkeeping/tracking                                                                           ##
## adc_ch is the unique adc channel of this APV card within its associated MPD                        ##
## i2c is the "i2c address" of this APV card (not currently used by analysis)                         ##
## pos maps APV cards to physical locations on the detector                                           ##
## invert specifies whether strip index runs from "right-to-left" or "left-to-right" within an APV    ##
## axis specifies which strip orientation/dimension of the readout strips connected to this APV       ##
## ORDER of entries in the maps is:                                                                   ##
## crate   slot   fiber/mpd  gemid  adc_ch   i2c   pos     invert   axis                              ##
########################################################################################################

bb.gem.m0.chanmap = 
     20      11       7       3       0       3      29       1       1 
     20      11       7       3       1       2      28       1       1 
     20      11       7       3       2       1      27       1       1 
     20      11       7       3       3       0      26       1       1 
     20      11       7       3       4       7      25       1       1 
     20      11       7       3       5       6      24       1       1 
     20      11       7       3       6       5      23       1       1 
     20      11       7       3       7       4      22       1       1 
     20      11       7       3       8      11      21       1       1 
     20      11       7       3       9      10      20       1       1 
     20      11       7       3      10       9      19       1       1 
     20      11       7       3      11       8      18       1       1 
     20      11       7       3      12      14      17       1       1 
     20      11       7       3      13      13      16       1       1 
     20      11       7       3      14      12      15       1       1 
     20      11       8       3       0       3      11       1       1 
     20      11       8       3       1       2      10       1       1 
     20      11       8       3       2       1       9       1       1 
     20      11       8       3       3       0       8       1       1 
     20      11       8       3       4       7       7       1       1 
     20      11       8       3       5       6       6       1       1 
     20      11       8       3       6       5       5       1       1 
     20      11       8       3       7       4       4       1       1 
     20      11       8       3       8      11       3       1       1 
     20      11       8       3       9      10       2       1       1 
     20      11       8       3      10       9       1       1       1 
     20      11       8       3      11       8       0       1       1 
     20      11       8       3      12      14      14       1       1 
     20      11       8       3      13      13      13       1       1 
     20      11       8       3      14      12      12       1       1 
     20      11       9       3       0       3      26       0       0 
     20      11       9       3       1       2      27       0       0 
     20      11       9       3       2       1      28       0       0 
     20      11       9       3       3       0      29       0       0 
     20      11       9       3       4       7      22       0       0 
     20      11       9       3       5       6      23       0       0 
     20      11       9       3       6       5      24       0       0 
     20      11       9       3       7       4      25       0       0 
     20      11       9       3       8      11      18       0       0 
     20      11       9       3       9      10      19       0       0 
     20      11       9       3      10       9      20       0       0 
     20      11       9       3      11       8      21       0       0 
     20      11       9       3      12      15      15       0       0 
     20      11       9       3      13      14      16       0       0 
     20      11       9       3      14      13      17       0       0 
     20      11      10       3       0       3       8       0       0 
     20      11      10       3       1       2       9       0       0 
     20      11      10       3       2       1      10       0       0 
     20      11      10       3       3       0      11       0       0 
     20      11      10       3       4       7       4       0       0 
     20      11      10       3       5       6       5       0       0 
     20      11      10       3       6       5       6       0       0 
     20      11      10       3       7       4       7       0       0 
     20      11      10       3       8      11       0       0       0 
     20      11      10       3       9      10       1       0       0 
     20      11      10       3      10       9       2       0       0 
     20      11      10       3      11       8       3       0       0 
     20      11      10       3      12      15      12       0       0 
     20      11      10       3      13      14      13       0       0 
     20      11      10       3      14      13      14       0       0 
bb.gem.m1.chanmap = 
     20      11      16     103       0       3      29       1       1 
     20      11      16     103       1       2      28       1       1 
     20      11      16     103       2       1      27       1       1 
     20      11      16     103       3       0      26       1       1 
     20      11      16     103       4       7      25       1       1 
     20      11      16     103       5       6      24       1       1 
     20      11      16     103       6       5      23       1       1 
     20      11      16     103       7       4      22       1       1 
     20      11      16     103       8      11      21       1       1 
     20      11      16     103       9      10      20       1       1 
     20      11      16     103      10       9      19       1       1 
     20      11      16     103      11       8      18       1       1 
     20      11      16     103      12      14      17       1       1 
     20      11      16     103      13      13      16       1       1 
     20      11      16     103      14      12      15       1       1 
     20      11      17     103       0       3      11       1       1 
     20      11      17     103       1       2      10       1       1 
     20      11      17     103       2       1       9       1       1 
     20      11      17     103       3       0       8       1       1 
     20      11      17     103       4       7       7       1       1 
     20      11      17     103       5       6       6       1       1 
     20      11      17     103       6       5       5       1       1 
     20      11      17     103       7       4       4       1       1 
     20      11      17     103       8      11       3       1       1 
     20      11      17     103       9      10       2       1       1 
     20      11      17     103      10       9       1       1       1 
     20      11      17     103      11       8       0       1       1 
     20      11      17     103      12      14      14       1       1 
     20      11      17     103      13      13      13       1       1 
     20      11      17     103      14      12      12       1       1 
     20      11      18     103       0       3      26       0       0 
     20      11      18     103       1       2      27       0       0 
     20      11      18     103       2       1      28       0       0 
     20      11      18     103       3       0      29       0       0 
     20      11      18     103       4       7      22       0       0 
     20      11      18     103       5       6      23       0       0 
     20      11      18     103       6       5      24       0       0 
     20      11      18     103       7       4      25       0       0 
     20      11      18     103       8      11      18       0       0 
     20      11      18     103       9      10      19       0       0 
     20      11      18     103      10       9      20       0       0 
     20      11      18     103      11       8      21       0       0 
     20      11      18     103      12      14      15       0       0 
     20      11      18     103      13      13      16       0       0 
     20      11      18     103      14      12      17       0       0 
     20      11      19     103       0       3       8       0       0 
     20      11      19     103       1       2       9       0       0 
     20      11      19     103       2       1      10       0       0 
     20      11      19     103       3       0      11       0       0 
     20      11      19     103       4       7       4       0       0 
     20      11      19     103       5       6       5       0       0 
     20      11      19     103       6       5       6       0       0 
     20      11      19     103       7       4       7       0       0 
     20      11      19     103       8      11       0       0       0 
     20      11      19     103       9      10       1       0       0 
     20      11      19     103      10       9       2       0       0 
     20      11      19     103      11       8       3       0       0 
     20      11      19     103      12      14      12       0       0 
     20      11      19     103      13      13      13       0       0 
     20      11      19     103      14      12      14       0       0 
bb.gem.m2.chanmap = 
     20      11      11     104       0       3      29       1       1 
     20      11      11     104       1       2      28       1       1 
     20      11      11     104       2       1      27       1       1 
     20      11      11     104       3       0      26       1       1 
     20      11      11     104       4       7      25       1       1 
     20      11      11     104       5       6      24       1       1 
     20      11      11     104       6       5      23       1       1 
     20      11      11     104       7       4      22       1       1 
     20      11      11     104       8      11      21       1       1 
     20      11      11     104       9      10      20       1       1 
     20      11      11     104      10       9      19       1       1 
     20      11      11     104      11       8      18       1       1 
     20      11      11     104      12      14      17       1       1 
     20      11      11     104      13      13      16       1       1 
     20      11      11     104      14      12      15       1       1 
     20      11      12     104       0       3      11       1       1 
     20      11      12     104       1       2      10       1       1 
     20      11      12     104       2       1       9       1       1 
     20      11      12     104       3       0       8       1       1 
     20      11      12     104       4       7       7       1       1 
     20      11      12     104       5       6       6       1       1 
     20      11      12     104       6       5       5       1       1 
     20      11      12     104       7       4       4       1       1 
     20      11      12     104       8      11       3       1       1 
     20      11      12     104       9      10       2       1       1 
     20      11      12     104      10       9       1       1       1 
     20      11      12     104      11       8       0       1       1 
     20      11      12     104      12      14      14       1       1 
     20      11      12     104      13      13      13       1       1 
     20      11      12     104      14      12      12       1       1 
     20      11      13     104       0       3      26       0       0 
     20      11      13     104       1       2      27       0       0 
     20      11      13     104       2       1      28       0       0 
     20      11      13     104       3       0      29       0       0 
     20      11      13     104       4       7      22       0       0 
     20      11      13     104       5       6      23       0       0 
     20      11      13     104       6       5      24       0       0 
     20      11      13     104       7       4      25       0       0 
     20      11      13     104       8      11      18       0       0 
     20      11      13     104       9      10      19       0       0 
     20      11      13     104      10       9      20       0       0 
     20      11      13     104      11       8      21       0       0 
     20      11      13     104      12      14      15       0       0 
     20      11      13     104      13      13      16       0       0 
     20      11      13     104      14      12      17       0       0 
     20      11      14     104       0       3       8       0       0 
     20      11      14     104       1       2       9       0       0 
     20      11      14     104       2       1      10       0       0 
     20      11      14     104       3       0      11       0       0 
     20      11      14     104       4       7       4       0       0 
     20      11      14     104       5       6       5       0       0 
     20      11      14     104       6       5       6       0       0 
     20      11      14     104       7       4       7       0       0 
     20      11      14     104       8      11       0       0       0 
     20      11      14     104       9      10       1       0       0 
     20      11      14     104      10       9       2       0       0 
     20      11      14     104      11       8       3       0       0 
     20      11      14     104      12      14      12       0       0 
     20      11      14     104      13      13      13       0       0 
     20      11      14     104      14      12      14       0       0 
bb.gem.m3.chanmap = 
     20      11      20     102       0       3      29       1       1 
     20      11      20     102       1       2      28       1       1 
     20      11      20     102       2       1      27       1       1 
     20      11      20     102       3       0      26       1       1 
     20      11      20     102       4       7      25       1       1 
     20      11      20     102       5       6      24       1       1 
     20      11      20     102       6       5      23       1       1 
     20      11      20     102       7       4      22       1       1 
     20      11      20     102       8      11      21       1       1 
     20      11      20     102       9      10      20       1       1 
     20      11      20     102      10       9      19       1       1 
     20      11      20     102      11       8      18       1       1 
     20      11      20     102      12      14      17       1       1 
     20      11      20     102      13      13      16       1       1 
     20      11      20     102      14      12      15       1       1 
     20      11      21     102       0       3      11       1       1 
     20      11      21     102       1       2      10       1       1 
     20      11      21     102       2       1       9       1       1 
     20      11      21     102       3       0       8       1       1 
     20      11      21     102       4       7       7       1       1 
     20      11      21     102       5       6       6       1       1 
     20      11      21     102       6       5       5       1       1 
     20      11      21     102       7       4       4       1       1 
     20      11      21     102       8      11       3       1       1 
     20      11      21     102       9      10       2       1       1 
     20      11      21     102      10       9       1       1       1 
     20      11      21     102      11       8       0       1       1 
     20      11      21     102      12      14      14       1       1 
     20      11      21     102      13      13      13       1       1 
     20      11      21     102      14      12      12       1       1 
     20      11      22     102       0       3      26       0       0 
     20      11      22     102       1       2      27       0       0 
     20      11      22     102       2       1      28       0       0 
     20      11      22     102       3       0      29       0       0 
     20      11      22     102       4       7      22       0       0 
     20      11      22     102       5       6      23       0       0 
     20      11      22     102       6       5      24       0       0 
     20      11      22     102       7       4      25       0       0 
     20      11      22     102       8      11      18       0       0 
     20      11      22     102       9      10      19       0       0 
     20      11      22     102      10       9      20       0       0 
     20      11      22     102      11       8      21       0       0 
     20      11      22     102      12      14      15       0       0 
     20      11      22     102      13      13      16       0       0 
     20      11      22     102      14      12      17       0       0 
     20      11      23     102       0       3       8       0       0 
     20      11      23     102       1       2       9       0       0 
     20      11      23     102       2       1      10       0       0 
     20      11      23     102       3       0      11       0       0 
     20      11      23     102       4       7       4       0       0 
     20      11      23     102       5       6       5       0       0 
     20      11      23     102       6       5       6       0       0 
     20      11      23     102       7       4       7       0       0 
     20      11      23     102       8      11       0       0       0 
     20      11      23     102       9      10       1       0       0 
     20      11      23     102      10       9       2       0       0 
     20      11      23     102      11       8       3       0       0 
     20      11      23     102      12      14      12       0       0 
     20      11      23     102      13      13      13       0       0 
     20      11      23     102      14      12      14       0       0 
bb.gem.m4.chanmap = 
     20      11       0      13       0      15       0       1       1 
     20      11       0      13       1      14       1       1       1 
     20      11       0      13       2      13       2       1       1 
     20      11       0      13       3      12       3       1       1 
     20      11       0      13       4      11       4       1       1 
     20      11       0      13       5      10       5       1       1 
     20      11       0      13       6       9       6       1       1 
     20      11       0      13       7       8       7       1       1 
     20      11       0      13       8       7       8       1       1 
     20      11       0      13       9       6       9       1       1 
     20      11       0      13      10       5      10       1       1 
     20      11       0      13      11       4      11       1       1 
     20      11       4      13      10       4       9       1       0 
     20      11       4      13      11       3       8       1       0 
     20      11       4      13      12       2       7       1       0 
     20      11       4      13      13       1       6       1       0 
     20      11       4      13      14       0       5       1       0 
     20      11       5      13       0       4       0       0       0 
     20      11       5      13       1       3       1       0       0 
     20      11       5      13       2       2       2       0       0 
     20      11       5      13       3       1       3       0       0 
     20      11       5      13       4       0       4       0       0 
bb.gem.m5.chanmap = 
     20      11       1      20       0      15       0       1       1 
     20      11       1      20       1      14       1       1       1 
     20      11       1      20       2      13       2       1       1 
     20      11       1      20       3      12       3       1       1 
     20      11       1      20       4      11       4       1       1 
     20      11       1      20       5      10       5       1       1 
     20      11       1      20       6       9       6       1       1 
     20      11       1      20       7       8       7       1       1 
     20      11       1      20       8       7       8       1       1 
     20      11       1      20       9       6       9       1       1 
     20      11       1      20      10       5      10       1       1 
     20      11       1      20      11       4      11       1       1 
     20      11       4      20       5      12       9       1       0 
     20      11       4      20       6      11       8       1       0 
     20      11       4      20       7      10       7       1       0 
     20      11       4      20       8       9       6       1       0 
     20      11       4      20       9       8       5       1       0 
     20      11       5      20       5      12       0       0       0 
     20      11       5      20       6      11       1       0       0 
     20      11       5      20       7      10       2       0       0 
     20      11       5      20       8       9       3       0       0 
     20      11       5      20       9       8       4       0       0 
bb.gem.m6.chanmap = 
     20      11       2      17       0      15      11       0       1 
     20      11       2      17       1      14      10       0       1 
     20      11       2      17       2      13       9       0       1 
     20      11       2      17       3      12       8       0       1 
     20      11       2      17       4      11       7       0       1 
     20      11       2      17       5      10       6       0       1 
     20      11       2      17       6       9       5       0       1 
     20      11       2      17       7       8       4       0       1 
     20      11       2      17       8       7       3       0       1 
     20      11       2      17       9       6       2       0       1 
     20      11       2      17      10       5       1       0       1 
     20      11       2      17      11       4       0       0       1 
     20      11       4      17       0      20       9       1       0 
     20      11       4      17       1      19       8       1       0 
     20      11       4      17       2      18       7       1       0 
     20      11       4      17       3      17       6       1       0 
     20      11       4      17       4      16       5       1       0 
     20      11       5      17      10      20       0       0       0 
     20      11       5      17      11      19       1       0       0 
     20      11       5      17      12      18       2       0       0 
     20      11       5      17      13      17       3       0       0 
     20      11       5      17      14      16       4       0       0 
bb.gem.m7.chanmap = 
     20      11       3      25       0      15      11       0       1 
     20      11       3      25       1      14      10       0       1 
     20      11       3      25       2      13       9       0       1 
     20      11       3      25       3      12       8       0       1 
     20      11       3      25       4      11       7       0       1 
     20      11       3      25       5      10       6       0       1 
     20      11       3      25       6       9       5       0       1 
     20      11       3      25       7       8       4       0       1 
     20      11       3      25       8       7       3       0       1 
     20      11       3      25       9       6       2       0       1 
     20      11       3      25      10       5       1       0       1 
     20      11       3      25      11       4       0       0       1 
     20      11       6      25       0       4       9       1       0 
     20      11       6      25       1       3       8       1       0 
     20      11       6      25       2       2       7       1       0 
     20      11       6      25       3       1       6       1       0 
     20      11       6      25       4       0       5       1       0 
     20      11       6      25       8      12       0       0       0 
     20      11       6      25       9      11       1       0       0 
     20      11       6      25      10      10       2       0       0 
     20      11       6      25      11       9       3       0       0 
     20      11       6      25      12       8       4       0       0 




################ NOW LET'S START TIME-DEPENDENT ENTRIES for the parameters that ARE expected to change frequently: #################################

-------------[ 2022-01-06 12:00:00 ] # tracking and clustering parameters:

############ parameters searched by SBSGEMModule::ReadDatabase() #################
############ offline thresholds and angle constraints: ############

bb.gem.constraintwidth_theta = 0.0359983
bb.gem.constraintwidth_phi = 0.0309316

bb.gem.m0.threshold_sample = 107.264
bb.gem.m0.threshold_stripsum = 525
bb.gem.m0.threshold_clustersum = 930

bb.gem.m1.threshold_sample = 96.6055
bb.gem.m1.threshold_stripsum = 575
bb.gem.m1.threshold_clustersum = 1010

bb.gem.m2.threshold_sample = 102.95
bb.gem.m2.threshold_stripsum = 535
bb.gem.m2.threshold_clustersum = 930

bb.gem.m3.threshold_sample = 110.084
bb.gem.m3.threshold_stripsum = 745
bb.gem.m3.threshold_clustersum = 1310

bb.gem.m4.threshold_sample = 92.9689
bb.gem.m4.threshold_stripsum = 575
bb.gem.m4.threshold_clustersum = 1150

bb.gem.m5.threshold_sample = 92.9456
bb.gem.m5.threshold_stripsum = 435
bb.gem.m5.threshold_clustersum = 790

bb.gem.m6.threshold_sample = 103.523
bb.gem.m6.threshold_stripsum = 505
bb.gem.m6.threshold_clustersum = 910

bb.gem.m7.threshold_sample = 103.15
bb.gem.m7.threshold_stripsum = 495
bb.gem.m7.threshold_clustersum = 890

#Module internal relative gains by APV card: 
#bb.gem.m0.vgain = 1  1  1.06483  0.950643  0.906718  0.934693  0.925852  0.882276  0.90816  0.970558  0.988866  0.879329  0.878048  0.905286  0.916642  0.946197  0.901426  0.961623  0.981029  0.988568  0.942982  1.00734  0.938049  0.958685  0.940139  0.924492  1.05634  1.08367  1.17105  1  
#bb.gem.m0.ugain = 1  1.16492  1.07764  0.960597  0.954891  1.11908  0.971215  1.0569  0.96255  1.03047  0.918095  0.998702  1.08531  1.04399  1  1.03808  1.11021  1.03664  1.11237  1.10662  1.10937  1.14383  1.15979  1.02913  1.08122  1.13941  1.05918  1.20774  1  1  
#bb.gem.m1.vgain = 0.575252  0.723073  0.752058  0.833959  0.810148  0.807566  0.772084  1  
#bb.gem.m1.ugain = 1.10456  1.13093  1.00153  1.19238  1.03648  1.13114  1.14577  1.05673  1.04941  1  
#bb.gem.m2.vgain = 0.896885  1.00686  0.984208  1.027  0.96316  1.00018  0.927685  -0.610782  
#bb.gem.m2.ugain = 0.888977  0.933939  0.92513  0.983811  0.980911  1  1.0159  0.934215  1.00584  0.968406  
#bb.gem.m3.vgain = 0.602148  0.716368  0.673616  0.761879  0.756498  0.811389  0.818077  1  
#bb.gem.m3.ugain = 1  0.990978  1.00444  0.89965  0.783276  0.799914  0.771528  0.743175  0.663513  0.641394  
#bb.gem.m4.vgain = 1  0.94971  0.901694  0.84226  0.83308  0.877367  0.89413  0.848039  0.904985  0.877614  0.920633  0.880537  0.892813  0.858638  0.899967  0.89394  0.895042  0.891998  0.901818  0.97249  0.932229  0.904235  0.919683  0.890731  0.922026  0.898758  0.979616  0.982672  1.14007  1  
#bb.gem.m4.ugain = 1.43963  1.28588  1.11498  1  0.997386  0.925278  0.912983  0.991287  0.926727  0.990833  0.931736  0.92243  0.92505  0.990169  1  0.932141  0.966641  0.915131  0.99021  0.960534  0.92854  0.989135  0.951035  0.91734  0.923832  0.894934  0.914158  1.10141  1.23579  1  
#bb.gem.m5.vgain = 1.04755  1.15574  1.10622  1.15989  1.12205  1.05195  1.05793  1  
#bb.gem.m5.ugain = 0.976526  0.953323  1.01484  0.983995  1.01062  0.98228  0.993154  0.931771  0.949827  1  
#bb.gem.m6.vgain = 1.19479  1.24268  1.12021  1.1551  1.22152  1.18108  1.24015  1.17146  
#bb.gem.m6.ugain = 1  0.918529  0.821424  0.783212  0.701388  0.676882  0.666563  0.701977  0.725926  0.733232  
#bb.gem.m7.vgain = 1  1  1  1  1  1  1  1  
#bb.gem.m7.ugain = 1  1  1  1  1  1  1  1  1  1  
#bb.gem.m8.vgain = 1.35699  1.51729  1.5497  1.5955  1.44713  1.55522  1.6148  1.58615  1.453  1.58188  1.42501  1.49749  
#bb.gem.m8.ugain = 1.07333  1.10254  1.02308  1.0261  1.13112  1.07996  1.04827  1.01954  1.02554  1  
#bb.gem.m9.vgain = 1.00173  1.11241  1.13067  1.12764  1.11068  1.24879  1.17878  1.29444  1.27328  1.19837  1.26296  1  
#bb.gem.m9.ugain = 0.905012  0.875234  0.891155  0.878846  0.868256  0.947062  1.10215  0.925472  1  1.01252  
#bb.gem.m10.vgain = 1.07163  1.07491  1.14079  1.1105  1.02625  1.10835  1.06856  1.13619  1.10987  1.04367  1.02195  0.778023  
#bb.gem.m10.ugain = 1.19762  1  1.01702  1.1046  1.14449  1.13773  1.12822  1.21689  1.26307  1.33573  
#bb.gem.m11.vgain = 1  1.41229  1.35991  1.40826  1.48319  1.38494  1.40448  1.40384  1.4132  1.4236  1.28722  1.1366  
#bb.gem.m11.ugain = 1.01233  0.946893  1  1.0084  1.0472  1.0491  0.998412  0.99437  1.05855  1.04976  

# Module average gains relative to target ADC peak position of 4000
#bb.gem.m0.modulegain = 1.31101
#bb.gem.m1.modulegain = 0.823174
#bb.gem.m2.modulegain = 0.873871
#bb.gem.m3.modulegain = 0.917247
#bb.gem.m4.modulegain = 1.19257
#bb.gem.m5.modulegain = 0.884421
#bb.gem.m6.modulegain = 0.785245
#bb.gem.m7.modulegain = 1.0
#bb.gem.m8.modulegain = 1.81043
#bb.gem.m9.modulegain = 1.17566
#bb.gem.m10.modulegain = 1.1976
#bb.gem.m11.modulegain = 1.27523

#bb.gem.m0.modulegain = 1.31101
#bb.gem.m1.modulegain = 0.823174
#bb.gem.m2.modulegain = 0.873871
#bb.gem.m3.modulegain = 0.917247
#bb.gem.m4.modulegain = 1.19257
#bb.gem.m5.modulegain = 0.884421
#bb.gem.m6.modulegain = 0.785245
#bb.gem.m7.modulegain = 1.0
#bb.gem.m8.modulegain = 1.81043
#bb.gem.m9.modulegain = 1.17566
#bb.gem.m10.modulegain = 1.19767
#bb.gem.m11.modulegain = 1.27523


--------[ 2021-10-21 04:29:00 ] #Run Num 11423
#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  1  1.04965  1.08478  1.06327  1.05185  1.09981  1.08985  1.02569  0.999818  1.10858  1.11355  1.08591  1.07319  1.04417  1.08661  1.0233  1.00399  1.00306  1.03386  0.982881  1.00998  0.997344  0.973477  0.998818  1  1  1  1
bb.gem.m0.ugain = 1  1  0.91934  1.0085  0.976941  0.876938  0.985565  0.951052  1.0263  0.97172  1.04178  0.99536  0.937524  0.969481  1  0.965901  0.917014  0.96292  0.9081  0.926331  0.909332  0.873532  0.831039  0.899963  0.851818  1  1  1  1  1
bb.gem.m1.vgain = 1.74813  1.45186  1.38844  1.30137  1.27644  1.33718  1.3818  1
bb.gem.m1.ugain = 1  0.957997  1.03804  0.871154  0.888278  0.90612  0.898107  0.95747  0.959707  1
bb.gem.m2.vgain = 1.10244  1.03822  1.03878  1.02389  1.05271  1.05101  1.07468  1
bb.gem.m2.ugain = 1.13501  1.038  1.03801  1.00816  0.988343  1  0.974786  1.08009  0.969213  1.03154
bb.gem.m3.vgain = 1.60916  1.35682  1.45187  1.28244  1.28382  1.18606  1.1509  1
bb.gem.m3.ugain = 1  0.996035  1.00177  1.06057  1.15669  1.14966  1  1  1  1
bb.gem.m4.vgain = 1  1  1.11215  1.16856  1.15978  1.1204  1.1006  1.15439  1.09408  1.12169  1.06983  1.12322  1.11397  1.14518  1.11277  1.10908  1.10743  1.11258  1.10982  1.02847  1.06695  1.10334  1.08449  1.10689  1.03619  1.05968  1.00143  1  1  1
bb.gem.m4.ugain = 1  0.768171  0.886396  1  0.973544  1.05756  1.0659  0.991612  1.05825  0.993501  1.05741  1.05386  1.02072  1.00959  1  1.03452  1.03422  1.08842  0.997971  1.02242  1.05134  0.996109  1.00004  1.01024  1.00582  1.00207  1  1  1  1
bb.gem.m5.vgain = 1.07231  0.912493  1.07995  0.918376  0.918674  0.979032  1.08007  1
bb.gem.m5.ugain = 1.03432  1.06403  0.984033  1.02372  0.982607  0.997458  1.01139  1.04869  1.02811  1
bb.gem.m6.vgain = 0.60681  0.600031  0.652452  0.6281  0.603244  0.629887  0.588916  0.602
bb.gem.m6.ugain = 0.711798  0.751257  0.826183  0.863304  0.962516  0.998595  1  0.95423  0.944429  0.924627
bb.gem.m7.vgain = 1  1  1  1  1  1  1  1
bb.gem.m7.ugain = 1  1  1  1  1  1  1  1  1  1
bb.gem.m8.vgain = 1  0.644515  0.626598  0.617194  0.672298  0.621482  0.610414  0.61579  0.670558  0.624423  0.675626  0.647591
bb.gem.m8.ugain = 1  1  1  0.899128  0.865811  0.910281  0.951578  0.965359  0.967239  1
bb.gem.m9.vgain = 1  0.857  0.843332  0.854118  0.857236  0.76408  0.80502  0.741619  0.765738  0.813284  0.771987  1
bb.gem.m9.ugain = 1.09802  1.13602  1.10972  1.13258  1.1242  1.04726  0.897145  1.06287  1  0.97757
bb.gem.m10.vgain = 1  0.894598  0.836731  0.862992  0.911336  0.859815  0.905291  0.860098  0.899211  0.938553  0.96751  1.26347
bb.gem.m10.ugain = 0.842422  1  0.989364  0.920779  0.892559  0.883126  0.892045  0.829778  0.793374  0.741312
bb.gem.m11.vgain = 1  1  0.703286  0.694344  0.678131  0.705807  0.710272  0.707843  0.704535  0.695627  0.762374  1
bb.gem.m11.ugain = 0.99664  1.04526  1  0.986284  0.936317  0.940915  0.990742  1.02088  0.979179  0.979271

bb.gem.m0.modulegain = 0.99485
bb.gem.m0.threshold_sample = 129.53
bb.gem.m0.threshold_stripsum = 388.589
bb.gem.m0.threshold_clustersum = 777.179


bb.gem.m1.modulegain = 0.844284
bb.gem.m1.threshold_sample = 83.9463
bb.gem.m1.threshold_stripsum = 251.839
bb.gem.m1.threshold_clustersum = 503.678


bb.gem.m2.modulegain = 0.964743
bb.gem.m2.threshold_sample = 94.4876
bb.gem.m2.threshold_stripsum = 283.463
bb.gem.m2.threshold_clustersum = 566.926


bb.gem.m3.modulegain = 0.833258
bb.gem.m3.threshold_sample = 95.6522
bb.gem.m3.threshold_stripsum = 286.957
bb.gem.m3.threshold_clustersum = 573.913


bb.gem.m4.modulegain = 0.940379
bb.gem.m4.threshold_sample = 135.645
bb.gem.m4.threshold_stripsum = 406.935
bb.gem.m4.threshold_clustersum = 813.87

bb.gem.m5.modulegain = 1.00479
bb.gem.m5.threshold_sample = 102.138
bb.gem.m5.threshold_stripsum = 306.413
bb.gem.m5.threshold_clustersum = 612.826


bb.gem.m6.modulegain = 1.32148
bb.gem.m6.threshold_sample = 95.9714
bb.gem.m6.threshold_stripsum = 287.914
bb.gem.m6.threshold_clustersum = 575.829


bb.gem.m7.modulegain = 1
bb.gem.m8.modulegain = 1.25674
bb.gem.m8.threshold_sample = 239.396
bb.gem.m8.threshold_stripsum = 718.187
bb.gem.m8.threshold_clustersum = 1436.37


bb.gem.m9.modulegain = 1.08664
bb.gem.m9.threshold_sample = 125.186
bb.gem.m9.threshold_stripsum = 375.559
bb.gem.m9.threshold_clustersum = 751.117


bb.gem.m10.modulegain = 1.10751
bb.gem.m10.threshold_sample = 143.666
bb.gem.m10.threshold_stripsum = 430.999
bb.gem.m10.threshold_clustersum = 861.998

bb.gem.m11.modulegain = 1.17651
bb.gem.m11.threshold_sample = 154.533
bb.gem.m11.threshold_stripsum = 463.599
bb.gem.m11.threshold_clustersum = 927.197



--------[ 2021-10-21 07:08:00 ] #Run Num 11436


#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  1  1.01534  1.05472  1.03977  1.03056  1.06551  1.06465  1.00618  0.97943  1.08961  1.09979  1.07253  1.05752  1.02817  1.07498  1.00747  0.989168  0.980986  1.01588  0.970338  1.02128  0.980672  0.966945  0.9785  1  1  1  1
bb.gem.m0.ugain = 1  1  0.900391  1.00807  0.988266  0.86639  0.98554  0.946775  1.02449  0.972288  1.04401  1.00347  0.940445  0.968924  1  0.970836  0.914298  0.959774  0.904598  0.913419  0.913012  0.876138  0.838958  0.927653  0.836155  1  1  1  1  1
bb.gem.m1.vgain = 1.73631  1.42404  1.36904  1.27597  1.24328  1.3118  1.44998  1
bb.gem.m1.ugain = 1  0.952454  1.0223  0.87152  0.954193  0.907392  0.912822  0.972239  0.965673  1
bb.gem.m2.vgain = 1.1087  1.04492  1.04826  1.02951  1.05719  1.05471  1.08974  1
bb.gem.m2.ugain = 1.15554  1.06546  1.0653  1.03304  1.01541  1.0237  1  1.1022  0.992496  1.05375
bb.gem.m3.vgain = 1.58196  1.3237  1.42638  1.25882  1.25609  1.17575  1.13894  1
bb.gem.m3.ugain = 1  0.995444  1.00072  1.07121  1.16777  1.14484  1  1  1  1
bb.gem.m4.vgain = 1  1  1.06163  1.15231  1.14335  1.09696  1.08281  1.13782  1.07708  1.10238  1.05088  1.09909  1.0939  1.12491  1.08999  1.08844  1.09231  1.10273  1.09364  1.01462  1.05984  1.09316  1.07537  1.09509  1.03146  1.0436  0.975854  1  1  1
bb.gem.m4.ugain = 1  0.768778  0.880697  1  0.971614  1.05206  1.06408  0.994121  1.0481  0.991814  1.04958  1.05499  1.02021  1.0094  1  1.03422  1.03716  1.08453  0.998606  1.03216  1.0572  1.00577  1.01112  1.01738  1.01698  1.01436  1  1  1  1
bb.gem.m5.vgain = 1  0.89844  1  0.904087  1  0.969924  1  1
bb.gem.m5.ugain = 1.02846  1.06567  0.987551  1.01807  0.975942  0.99507  0.999835  1.02752  1.01222  1
bb.gem.m6.vgain = 1  0.587638  1  0.611504  1  0.614662  1  0.605943
bb.gem.m6.ugain = 0.709705  0.740911  0.816693  0.843511  0.947038  0.987645  1  0.954516  0.931974  0.915608
bb.gem.m7.vgain = 1  1  1  1  1  1  1  1
bb.gem.m7.ugain = 1  1  1  1  1  1  1  1  1  1
bb.gem.m8.vgain = 1  0.662772  0.655376  0.63349  0.69728  0.645313  0.631267  0.641729  0.690733  0.655532  0.706885  0.646716
bb.gem.m8.ugain = 1  1  1  0.934908  0.86721  0.918303  0.960704  0.967015  0.97551  1
bb.gem.m9.vgain = 1  0.97592  0.958412  0.971696  0.976706  0.872465  0.910155  0.843513  0.866042  0.919426  0.878856  1
bb.gem.m9.ugain = 1.21116  1.26546  1.22047  1.25448  1.23924  1.15824  1  1.18311  1.10673  1.07713
bb.gem.m10.vgain = 0.901502  0.914405  0.861441  0.879154  0.933  0.876689  0.922095  0.878946  0.916189  0.960897  0.98593  1.25453
bb.gem.m10.ugain = 0.839022  1  0.987742  0.921528  0.891955  0.88126  0.886854  0.826818  0.792469  0.741375
bb.gem.m11.vgain = 1  1  0.756186  0.732705  0.699955  0.732323  0.736246  0.737405  0.73155  0.724585  0.780579  1
bb.gem.m11.ugain = 0.998393  1.05294  1  0.994783  0.955285  0.958291  1.00041  1.00073  0.968656  0.978061

#Module average gains relative to target ADC peak position of 4500
bb.gem.m0.modulegain = 1.00493
bb.gem.m0.threshold_sample = 119.138
bb.gem.m0.threshold_stripsum = 357.414
bb.gem.m0.threshold_clustersum = 714.828


bb.gem.m1.modulegain = 0.850227
bb.gem.m1.threshold_sample = 77.0525
bb.gem.m1.threshold_stripsum = 231.157
bb.gem.m1.threshold_clustersum = 462.315


bb.gem.m2.modulegain = 0.950809
bb.gem.m2.threshold_sample = 86.5102
bb.gem.m2.threshold_stripsum = 259.531
bb.gem.m2.threshold_clustersum = 519.061


bb.gem.m3.modulegain = 0.837287
bb.gem.m3.threshold_sample = 90.4981
bb.gem.m3.threshold_stripsum = 271.494
bb.gem.m3.threshold_clustersum = 542.989


bb.gem.m4.modulegain = 0.948182
bb.gem.m4.threshold_sample = 125.836
bb.gem.m4.threshold_stripsum = 377.507
bb.gem.m4.threshold_clustersum = 755.013


bb.gem.m5.modulegain = 1.0476
bb.gem.m5.threshold_sample = 94.7869
bb.gem.m5.threshold_stripsum = 284.361
bb.gem.m5.threshold_clustersum = 568.722


bb.gem.m6.modulegain = 1.34031
bb.gem.m6.threshold_sample = 91.5553
bb.gem.m6.threshold_stripsum = 274.666
bb.gem.m6.threshold_clustersum = 549.332


bb.gem.m7.modulegain = 1
bb.gem.m8.modulegain = 1.23337
bb.gem.m8.threshold_sample = 232.836
bb.gem.m8.threshold_stripsum = 698.507
bb.gem.m8.threshold_clustersum = 1397.01


bb.gem.m9.modulegain = 0.971302
bb.gem.m9.threshold_sample = 122.201
bb.gem.m9.threshold_stripsum = 366.603
bb.gem.m9.threshold_clustersum = 733.205


bb.gem.m10.modulegain = 1.09899
bb.gem.m10.threshold_sample = 138.09
bb.gem.m10.threshold_stripsum = 414.271
bb.gem.m10.threshold_clustersum = 828.542


bb.gem.m11.modulegain = 1.15451
bb.gem.m11.threshold_sample = 144.845
bb.gem.m11.threshold_stripsum = 434.535
bb.gem.m11.threshold_clustersum = 869.07


--------[ 2021-10-21 10:44:00 ] #Run Num 11449
#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  1  1.04136  1.0785  1.05835  1.04422  1.07803  1.07311  1.01533  0.99534  1.08848  1.09661  1.07624  1.06605  1.04114  1.07775  1.01646  0.996571  0.995809  1.02411  0.984544  1.0275  0.987523  0.984277  0.995131  1  1  1  1
bb.gem.m0.ugain = 1  1  0.926754  1.01116  0.990844  0.884807  0.977637  0.958531  1.01478  0.969233  1.02862  1.00139  0.940641  0.966164  1  0.964815  0.920802  0.962111  0.905156  0.926793  0.916926  0.896359  0.851803  0.927817  0.830155  1  1  1  1  1
bb.gem.m1.vgain = 1.70685  1.3866  1.33605  1.2503  1.22678  1.27721  1.43673  1
bb.gem.m1.ugain = 1  0.931919  1.04847  0.8776  0.964635  0.90808  0.913361  0.971212  0.980411  1
bb.gem.m2.vgain = 1.12189  1.05696  1.04367  1.04226  1.05177  1.06898  1.05474  1
bb.gem.m2.ugain = 1.15832  1.0624  1.06867  1.02577  1.02254  1.0105  1  1.08683  0.996549  1.06053
bb.gem.m3.vgain = 1.52828  1.33488  1.40242  1.24667  1.23884  1.16525  1.09976  1
bb.gem.m3.ugain = 1  1.00423  1.00396  1.07066  1.14635  1.1676  1  1  1  1
bb.gem.m4.vgain = 1  1  1.05425  1.16062  1.14075  1.10864  1.09024  1.13956  1.08397  1.10959  1.05922  1.10402  1.10047  1.12922  1.09858  1.09189  1.0942  1.10171  1.09028  1.01818  1.06062  1.08559  1.07092  1.08479  1.03567  1.043  0.985352  1  1  1
bb.gem.m4.ugain = 1  0.772359  0.888923  1  0.982193  1.04344  1.05959  0.996362  1.04659  0.996756  1.0446  1.02733  1.01135  1.00784  1  1.0292  1.03124  1.06931  0.993598  1.01253  1.03865  0.999245  0.994236  1.0209  1.00291  0.981889  1  1  1  1
bb.gem.m5.vgain = 1  0.89868  1  0.904833  1  0.965043  1  1
bb.gem.m5.ugain = 1.03024  1.05929  0.984067  0.997885  0.97035  0.984997  0.9855  1.02361  1.02016  1
bb.gem.m6.vgain = 1  0.594063  1  0.616135  1  0.613848  1  0.592242
bb.gem.m6.ugain = 0.712412  0.752628  0.828055  0.850969  0.946445  0.988574  1  0.960304  0.943852  0.905436
bb.gem.m7.vgain = 1  1  1  1  1  1  1  1
bb.gem.m7.ugain = 1  1  1  1  1  1  1  1  1  1
bb.gem.m8.vgain = 1  0.661526  0.659435  0.632268  0.684539  0.646822  0.626501  0.627422  0.679927  0.649851  0.693036  0.666316
bb.gem.m8.ugain = 1  1  1  0.939426  0.877296  0.92169  0.9568  0.9726  0.974441  1
bb.gem.m9.vgain = 1  0.953667  0.949641  0.954302  0.947715  0.860985  0.887703  0.835253  0.840897  0.886234  0.86346  1
bb.gem.m9.ugain = 1.18002  1.23285  1.19455  1.22554  1.21758  1.13931  1  1.16739  1.09645  1.0636
bb.gem.m10.vgain = 1  0.919102  0.872833  0.885217  0.947007  0.890306  0.920276  0.878786  0.911984  0.954077  0.974704  1.2604
bb.gem.m10.ugain = 0.849905  1  0.989428  0.927147  0.901277  0.885518  0.896785  0.842778  0.80722  0.753674
bb.gem.m11.vgain = 1  1  0.756876  0.732647  0.697904  0.729713  0.738055  0.73111  0.729671  0.722361  0.780223  1
bb.gem.m11.ugain = 1.00288  1.04334  1  0.994478  0.949464  0.956495  0.994597  0.983572  0.952986  0.966224

#Module average gains relative to target ADC peak position of 4500
bb.gem.m0.modulegain = 1.00082
bb.gem.m0.threshold_sample = 120.564
bb.gem.m0.threshold_stripsum = 361.693
bb.gem.m0.threshold_clustersum = 723.386


bb.gem.m1.modulegain = 0.860033
bb.gem.m1.threshold_sample = 80.6931
bb.gem.m1.threshold_stripsum = 242.079
bb.gem.m1.threshold_clustersum = 484.159


bb.gem.m2.modulegain = 0.950055
bb.gem.m2.threshold_sample = 85.6442
bb.gem.m2.threshold_stripsum = 256.933
bb.gem.m2.threshold_clustersum = 513.865


bb.gem.m3.modulegain = 0.845373
bb.gem.m3.threshold_sample = 89.6473
bb.gem.m3.threshold_stripsum = 268.942
bb.gem.m3.threshold_clustersum = 537.884


bb.gem.m4.modulegain = 0.949802
bb.gem.m4.threshold_sample = 125.646
bb.gem.m4.threshold_stripsum = 376.939
bb.gem.m4.threshold_clustersum = 753.878

bb.gem.m5.modulegain = 1.04855
bb.gem.m5.threshold_sample = 93.3395
bb.gem.m5.threshold_stripsum = 280.019
bb.gem.m5.threshold_clustersum = 560.037


bb.gem.m6.modulegain = 1.32954
bb.gem.m6.threshold_sample = 94.4878
bb.gem.m6.threshold_stripsum = 283.463
bb.gem.m6.threshold_clustersum = 566.927


bb.gem.m7.modulegain = 1
bb.gem.m8.modulegain = 1.23724
bb.gem.m8.threshold_sample = 213.061
bb.gem.m8.threshold_stripsum = 639.182
bb.gem.m8.threshold_clustersum = 1278.36


bb.gem.m9.modulegain = 0.988771
bb.gem.m9.threshold_sample = 119.659
bb.gem.m9.threshold_stripsum = 358.976
bb.gem.m9.threshold_clustersum = 717.953


bb.gem.m10.modulegain = 1.09463
bb.gem.m10.threshold_sample = 136.08
bb.gem.m10.threshold_stripsum = 408.24
bb.gem.m10.threshold_clustersum = 816.48

bb.gem.m11.modulegain = 1.15818
bb.gem.m11.threshold_sample = 144.681
bb.gem.m11.threshold_stripsum = 434.043
bb.gem.m11.threshold_clustersum = 868.087

--------[ 2021-10-22 01:25:00 ] #Run Num 11493
#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  1  1.01617  1.07635  1.0521  1.04875  1.08745  1.08185  1.0246  1.00231  1.09372  1.10322  1.08601  1.07065  1.0514  1.08539  1.02793  1.01333  1.0038  1.0386  1.00172  1.01288  1.00264  0.99708  1.00851  1  1  1  1
bb.gem.m0.ugain = 1  1  0.916094  1.0045  0.991207  0.889669  0.983213  0.955526  1.01501  0.967082  1.02474  0.998534  0.940679  0.968617  1  0.967105  0.924007  0.964269  0.91439  0.932765  0.92015  0.897356  0.860355  0.931932  0.875899  1  1  1  1  1
bb.gem.m1.vgain = 1.55979  1.30762  1.27739  1.19463  1.18094  1.21938  1.20598  1
bb.gem.m1.ugain = 1  0.951501  1.03279  0.876214  0.953499  0.907715  0.904904  0.963893  0.971375  1
bb.gem.m2.vgain = 1.09893  1.04147  1.03464  1.02695  1.04372  1.05068  1.0499  1
bb.gem.m2.ugain = 1.15002  1.05864  1.05908  1.01866  1.01416  1  0.988108  1.07108  0.988572  1.0459
bb.gem.m3.vgain = 1.47444  1.26949  1.35247  1.19689  1.20408  1.12685  1.09698  1
bb.gem.m3.ugain = 1  1.00652  1.00582  1.07824  1.16116  1.1751  1  1  1  1
bb.gem.m4.vgain = 1  1  1.07405  1.14476  1.14979  1.10931  1.0923  1.14497  1.08395  1.11517  1.061  1.1103  1.10609  1.13244  1.10334  1.09756  1.0955  1.10232  1.08859  1.02039  1.05893  1.08767  1.06904  1.08993  1.04207  1.06351  0.997989  1  1  1
bb.gem.m4.ugain = 1  0.78034  0.883115  1  0.983982  1.04017  1.05773  0.995519  1.04934  0.996695  1.0479  1.02403  1.01438  1.00495  1  1.02858  1.02769  1.06461  0.98803  1.01142  1.0326  0.992486  1.00034  1.01598  1.01013  1.01642  1  1  1  1
bb.gem.m5.vgain = 1  0.895691  1  0.898624  1  0.960409  1  1
bb.gem.m5.ugain = 1.05763  1.05182  0.993796  0.99631  0.984492  0.991426  0.996913  1.03915  1.0266  1
bb.gem.m6.vgain = 1  0.579084  1  0.602676  1  0.60209  1  0.590677
bb.gem.m6.ugain = 0.695158  0.745  0.81999  0.84804  0.937701  0.981179  1  0.943796  0.9265  0.916273
bb.gem.m7.vgain = 1  1  1  1  1  1  1  1
bb.gem.m7.ugain = 1  1  1  1  1  1  1  1  1  1
bb.gem.m8.vgain = 1  0.674306  0.67692  0.65202  0.702688  0.665701  0.644768  0.64224  0.699859  0.667643  0.710396  0.67176
bb.gem.m8.ugain = 1  1  1  0.965707  0.900431  0.94357  0.975217  0.986771  0.98813  1
bb.gem.m9.vgain = 1  0.885034  0.875133  0.878757  0.87316  0.794887  0.825972  0.77756  0.782725  0.818833  0.804821  1
bb.gem.m9.ugain = 1.07598  1.12057  1.09706  1.12587  1.12059  1.03887  0.912972  1.06632  1  0.971081
bb.gem.m10.vgain = 0.910714  0.934746  0.882686  0.905129  0.972936  0.902729  0.933809  0.892697  0.920731  0.964069  0.978788  1.252
bb.gem.m10.ugain = 0.862194  1  0.982244  0.929684  0.899375  0.8977  0.903239  0.845746  0.818322  0.76864
bb.gem.m11.vgain = 1  0.75729  0.74692  0.728931  0.705421  0.7353  0.742903  0.741777  0.740536  0.731937  0.788711  1
bb.gem.m11.ugain = 0.99742  1.04971  1  1.00687  0.964674  0.957344  1.00836  0.973407  0.961105  0.962922

#Module average gains relative to target ADC peak position of 4500
bb.gem.m0.modulegain = 0.995707
bb.gem.m0.threshold_sample = 126.703
bb.gem.m0.threshold_stripsum = 380.108
bb.gem.m0.threshold_clustersum = 760.216


bb.gem.m1.modulegain = 0.890863
bb.gem.m1.threshold_sample = 86.0897
bb.gem.m1.threshold_stripsum = 258.269
bb.gem.m1.threshold_clustersum = 516.538


bb.gem.m2.modulegain = 0.961124
bb.gem.m2.threshold_sample = 88.9216
bb.gem.m2.threshold_stripsum = 266.765
bb.gem.m2.threshold_clustersum = 533.529


bb.gem.m3.modulegain = 0.864855
bb.gem.m3.threshold_sample = 88.7335
bb.gem.m3.threshold_stripsum = 266.201
bb.gem.m3.threshold_clustersum = 532.401


bb.gem.m4.modulegain = 0.949349
bb.gem.m4.threshold_sample = 119.894
bb.gem.m4.threshold_stripsum = 359.681
bb.gem.m4.threshold_clustersum = 719.362

bb.gem.m5.modulegain = 1.04512
bb.gem.m5.threshold_sample = 86.1214
bb.gem.m5.threshold_stripsum = 258.364
bb.gem.m5.threshold_clustersum = 516.728


bb.gem.m6.modulegain = 1.3521
bb.gem.m6.threshold_sample = 88.8374
bb.gem.m6.threshold_stripsum = 266.512
bb.gem.m6.threshold_clustersum = 533.024


bb.gem.m7.modulegain = 1
bb.gem.m8.modulegain = 1.21419
bb.gem.m8.threshold_sample = 180.1
bb.gem.m8.threshold_stripsum = 540.301
bb.gem.m8.threshold_clustersum = 1080.6


bb.gem.m9.modulegain = 1.07256
bb.gem.m9.threshold_sample = 103.236
bb.gem.m9.threshold_stripsum = 309.708
bb.gem.m9.threshold_clustersum = 619.417


bb.gem.m10.modulegain = 1.08718
bb.gem.m10.threshold_sample = 113.921
bb.gem.m10.threshold_stripsum = 341.764
bb.gem.m10.threshold_clustersum = 683.529

bb.gem.m11.modulegain = 1.15147
bb.gem.m11.threshold_sample = 123.734
bb.gem.m11.threshold_stripsum = 371.202
bb.gem.m11.threshold_clustersum = 742.404


--------[ 2021-10-23 11:32:00 ] #Run Num 11547
#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  1  1.02767  1.07093  1.04797  1.04959  1.09643  1.08753  1.02812  1.00643  1.10362  1.10922  1.08929  1.0779  1.0517  1.08674  1.03053  1.01049  1.00515  1.03459  1.0019  1.03904  0.994476  0.980763  0.974458  1  1  1  1
bb.gem.m0.ugain = 1  0.856486  0.907845  0.999759  0.972197  0.88547  0.977716  0.958709  1.01744  0.969627  1.02667  0.999278  0.939143  0.968747  1  0.966396  0.921895  0.964255  0.908981  0.928677  0.91275  0.888309  0.848454  0.922179  0.866272  1  1  1  1  1
bb.gem.m1.vgain = 1.71568  1.41564  1.37431  1.27948  1.27492  1.30454  1.30861  1
bb.gem.m1.ugain = 1  0.952832  1.03737  0.871834  0.954404  0.899582  0.903905  0.947779  0.964557  1
bb.gem.m2.vgain = 1.11202  1.06111  1.04167  1.04482  1.05179  1.06807  1.05618  1
bb.gem.m2.ugain = 1.14669  1.05078  1.05313  1.01371  1.01237  1  0.990837  1.07742  0.992426  1.04448
bb.gem.m3.vgain = 1.56598  1.35141  1.44281  1.2787  1.27066  1.18273  1.15577  1
bb.gem.m3.ugain = 1  0.986767  0.999983  1.05674  1.1528  1.14895  1  1  1  1
bb.gem.m4.vgain = 1  1  1.06185  1.14674  1.13605  1.10087  1.08424  1.13981  1.08094  1.1086  1.05742  1.106  1.1042  1.1309  1.1005  1.0861  1.08538  1.08759  1.08002  1.00624  1.04366  1.07141  1.05207  1.07074  1.0187  1.03041  0.978666  1  1  1
bb.gem.m4.ugain = 1  0.768201  0.878296  1  0.976666  1.03249  1.04744  0.988416  1.04372  0.988781  1.046  1.02177  1.00716  1.00292  1  1.0225  1.02817  1.06469  0.982511  1.0055  1.03057  0.984897  0.987041  1.00063  0.978076  0.998974  1  1  1  1
bb.gem.m5.vgain = 1.04916  0.90251  1.04952  0.909356  1.12953  0.96845  1.06621  1
bb.gem.m5.ugain = 1.0502  1.04348  0.976733  0.991069  0.973391  0.985226  0.993911  1.04097  1.02716  1
bb.gem.m6.vgain = 0.595035  0.585387  0.629157  0.610338  0.59279  0.610645  0.574539  0.604429
bb.gem.m6.ugain = 0.699777  0.753097  0.82277  0.861647  0.952469  0.987543  1  0.941921  0.933906  0.912993
bb.gem.m7.vgain = 1  1  1  1  1  1  1  1
bb.gem.m7.ugain = 1  1  1  1  1  1  1  1  1  1
bb.gem.m8.vgain = 1  0.654154  0.644972  0.622519  0.674834  0.6346  0.621547  0.618728  0.680758  0.639506  0.68939  0.648428
bb.gem.m8.ugain = 1  1  1  0.933168  0.865022  0.912951  0.945935  0.957337  0.963479  1
bb.gem.m9.vgain = 0.949798  0.866113  0.856568  0.859446  0.855138  0.771147  0.799091  0.744804  0.752599  0.790981  0.774013  1
bb.gem.m9.ugain = 1.0868  1.11413  1.08696  1.10872  1.10085  1.03685  0.906755  1.06616  1  0.967619
bb.gem.m10.vgain = 0.863874  0.906977  0.851114  0.867478  0.925731  0.869381  0.902674  0.860371  0.895282  0.931194  0.952966  1.27586
bb.gem.m10.ugain = 0.833979  1  0.984016  0.914991  0.887979  0.874804  0.883028  0.826471  0.791666  0.743159
bb.gem.m11.vgain = 1  0.753678  0.739551  0.720962  0.68766  0.717553  0.726898  0.72615  0.720724  0.703923  0.7711  0.860727
bb.gem.m11.ugain = 1.00048  1.05418  1  0.993536  0.954235  0.945854  0.996487  0.960214  0.961956  0.965452

#Module average gains relative to target ADC peak position of 4500
bb.gem.m0.modulegain = 0.992797
bb.gem.m0.threshold_sample = 136.081
bb.gem.m0.threshold_stripsum = 408.244
bb.gem.m0.threshold_clustersum = 816.488


bb.gem.m1.modulegain = 0.852402
bb.gem.m1.threshold_sample = 83.1883
bb.gem.m1.threshold_stripsum = 249.565
bb.gem.m1.threshold_clustersum = 499.13


bb.gem.m2.modulegain = 0.953758
bb.gem.m2.threshold_sample = 89.9865
bb.gem.m2.threshold_stripsum = 269.96
bb.gem.m2.threshold_clustersum = 539.919


bb.gem.m3.modulegain = 0.838449
bb.gem.m3.threshold_sample = 94.7602
bb.gem.m3.threshold_stripsum = 284.281
bb.gem.m3.threshold_clustersum = 568.561


bb.gem.m4.modulegain = 0.95474
bb.gem.m4.threshold_sample = 127.699
bb.gem.m4.threshold_stripsum = 383.098
bb.gem.m4.threshold_clustersum = 766.196

bb.gem.m5.modulegain = 1.00524
bb.gem.m5.threshold_sample = 95.4088
bb.gem.m5.threshold_stripsum = 286.226
bb.gem.m5.threshold_clustersum = 572.453


bb.gem.m6.modulegain = 1.34589
bb.gem.m6.threshold_sample = 95.1327
bb.gem.m6.threshold_stripsum = 285.398
bb.gem.m6.threshold_clustersum = 570.796


bb.gem.m7.modulegain = 1
bb.gem.m8.modulegain = 1.25004
bb.gem.m8.threshold_sample = 195.806
bb.gem.m8.threshold_stripsum = 587.417
bb.gem.m8.threshold_clustersum = 1174.83


bb.gem.m9.modulegain = 1.0932
bb.gem.m9.threshold_sample = 119.936
bb.gem.m9.threshold_stripsum = 359.808
bb.gem.m9.threshold_clustersum = 719.616


bb.gem.m10.modulegain = 1.11552
bb.gem.m10.threshold_sample = 132.76
bb.gem.m10.threshold_stripsum = 398.279
bb.gem.m10.threshold_clustersum = 796.557

bb.gem.m11.modulegain = 1.16683
bb.gem.m11.threshold_sample = 142.345
bb.gem.m11.threshold_stripsum = 427.035
bb.gem.m11.threshold_clustersum = 854.07

--------[ 2021-11-13 23:26:00 ] #Run Num 11994

#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  1  1.01225  1.10052  1.07603  1.06435  1.10888  1.09411  1.03714  1.00285  1.09519  1.10458  1.07761  1.07251  1.04103  1.07475  1.0128  0.988595  0.992986  1.0218  0.986222  1.03798  0.971767  0.93868  0.966581  1  1  1  1
bb.gem.m0.ugain = 1  1  0.945643  1.02677  0.977694  0.898148  1.01026  0.974428  1.02845  0.981118  1.03433  1.00695  0.93474  0.972211  1  0.958946  0.917699  0.96137  0.893509  0.918456  0.908249  0.885376  0.848763  0.912352  0.828542  1  1  1  1  1
bb.gem.m1.vgain = 1.82183  1.45588  1.41895  1.30836  1.27675  1.32585  1.31651  1
bb.gem.m1.ugain = 1  0.962638  1.03772  0.880146  0.981637  0.892483  0.891448  0.937293  0.967822  1
bb.gem.m2.vgain = 1.12209  1.04191  1.02882  1.03524  1.03419  1.06815  1.06315  1
bb.gem.m2.ugain = 1.16247  1.03855  1.05344  1.01239  1.00557  1  0.987289  1.08011  0.973775  1.0666
bb.gem.m3.vgain = 1.67589  1.44315  1.54316  1.34712  1.33687  1.24955  1.17223  1
bb.gem.m3.ugain = 1  1.00523  1.01004  1.08678  1.2294  1.24588  1  1  1  1
bb.gem.m4.vgain = 1  1  1.04426  1.15133  1.11287  1.1012  1.08293  1.12672  1.07592  1.10784  1.05206  1.10374  1.10759  1.13777  1.10056  1.10267  1.09934  1.1056  1.097  1.02283  1.06389  1.08336  1.07497  1.0868  1.02496  1.05199  0.991374  1  1  1
bb.gem.m4.ugain = 1  0.763903  0.860218  1.93077  0.958193  1.03524  1.04557  0.989231  1.0423  0.993351  1.05067  1.04051  1.00915  1.00636  1  1.03614  1.03097  1.06977  0.990536  1.02047  1.04489  0.997256  0.999217  1.00486  0.971238  1.03187  1  1  1  1
bb.gem.m5.vgain = 1  0.914848  0.994327  0.919054  1  0.989772  1  1
bb.gem.m5.ugain = 1.01329  1.05213  0.983481  0.990712  0.977489  0.987987  0.993959  1.04731  1.03055  1
bb.gem.m6.vgain = 0.59521  0.585979  0.629816  0.615741  0.591908  0.608659  0.575451  1
bb.gem.m6.ugain = 0.70133  0.739556  0.81774  0.849111  0.933729  0.985111  1  0.936846  0.930567  0.932862
bb.gem.m7.vgain = 1  1  1  1  1  1  1  1
bb.gem.m7.ugain = 1  1  1  1  1  1  1  1  1  1
bb.gem.m8.vgain = 1  0.639102  0.632361  0.609747  0.666787  0.61634  0.601131  0.592682  0.783375  0.7216  0.783368  0.751639
bb.gem.m8.ugain = 1  1  1  0.898445  0.835392  0.897676  0.945662  0.961538  0.964493  1
bb.gem.m9.vgain = 1  0.848994  0.853715  0.858579  0.859911  0.777275  0.806292  0.748123  0.756918  0.806338  0.76418  1
bb.gem.m9.ugain = 1.09893  1.12742  1.09647  1.12104  1.115  1.03591  0.90893  1.06716  1  0.977997
bb.gem.m10.vgain = 1  0.88404  0.841144  0.861263  0.914417  0.862673  0.899117  0.85636  0.89222  0.927299  0.959384  1.26936
bb.gem.m10.ugain = 0.839573  1  0.983506  0.926366  0.900354  0.886602  0.898053  0.831476  0.788603  0.755984
bb.gem.m11.vgain = 1  0.732967  0.745058  0.716716  0.680508  0.716295  0.717932  0.713675  0.709256  0.698012  0.762357  1
bb.gem.m11.ugain = 1.00125  1.0456  1  0.992709  0.949971  0.957817  1.00945  0.995254  0.953006  0.999626

#Module average gains relative to target ADC peak position of 4500
bb.gem.m0.modulegain = 0.997793
bb.gem.m0.threshold_sample = 137.536
bb.gem.m0.threshold_stripsum = 412.608
bb.gem.m0.threshold_clustersum = 825.217


bb.gem.m1.modulegain = 0.840477
bb.gem.m1.threshold_sample = 88.5196
bb.gem.m1.threshold_stripsum = 265.559
bb.gem.m1.threshold_clustersum = 531.118


bb.gem.m2.modulegain = 0.959244
bb.gem.m2.threshold_sample = 96.7746
bb.gem.m2.threshold_stripsum = 290.324
bb.gem.m2.threshold_clustersum = 580.648


bb.gem.m3.modulegain = 0.801859
bb.gem.m3.threshold_sample = 99.994
bb.gem.m3.threshold_stripsum = 299.982
bb.gem.m3.threshold_clustersum = 599.964


bb.gem.m4.modulegain = 0.943252
bb.gem.m4.threshold_sample = 134.216
bb.gem.m4.threshold_stripsum = 402.649
bb.gem.m4.threshold_clustersum = 805.298


bb.gem.m5.modulegain = 1.02495
bb.gem.m5.threshold_sample = 109.558
bb.gem.m5.threshold_stripsum = 328.675
bb.gem.m5.threshold_clustersum = 657.349


bb.gem.m6.modulegain = 1.3415
bb.gem.m6.threshold_sample = 108.943
bb.gem.m6.threshold_stripsum = 326.829
bb.gem.m6.threshold_clustersum = 653.657


bb.gem.m7.modulegain = 1
bb.gem.m8.modulegain = 1.23176
bb.gem.m8.threshold_sample = 174.506
bb.gem.m8.threshold_stripsum = 523.518
bb.gem.m8.threshold_clustersum = 1047.04


bb.gem.m9.modulegain = 1.0904
bb.gem.m9.threshold_sample = 145.098
bb.gem.m9.threshold_stripsum = 435.295
bb.gem.m9.threshold_clustersum = 870.59


bb.gem.m10.modulegain = 1.11404
bb.gem.m10.threshold_sample = 163.554
bb.gem.m10.threshold_stripsum = 490.661
bb.gem.m10.threshold_clustersum = 981.322

bb.gem.m11.modulegain = 1.17012
bb.gem.m11.threshold_sample = 176.837
bb.gem.m11.threshold_stripsum = 530.512
bb.gem.m11.threshold_clustersum = 1061.02

--------[ 2021-11-14 01:01:00 ] #Run Num 11996,11997,11998

#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  1  1.02349  1.08517  1.0611  1.0501  1.09588  1.08022  1.02592  1.0074  1.09796  1.10989  1.0908  1.07862  1.04895  1.08621  1.026  1.00835  1.00333  1.03727  0.988206  1.01703  0.985875  0.968383  0.985243  1  1  1  1
bb.gem.m0.ugain = 1  1  0.916285  1.00454  0.970893  0.888322  0.979364  0.962628  1.01906  0.975906  1.02906  1.00209  0.944497  0.972161  1  0.964939  0.924072  0.964849  0.905883  0.922275  0.908743  0.888387  0.846709  0.909878  0.83876  1  1  1  1  1
bb.gem.m1.vgain = 1.75463  1.4313  1.38788  1.29402  1.28319  1.32541  1.31112  1
bb.gem.m1.ugain = 1  0.957716  1.05409  0.87741  0.96814  0.90902  0.910529  0.957715  0.961086  1
bb.gem.m2.vgain = 1.11939  1.0445  1.0396  1.03526  1.04786  1.05928  1.05292  1
bb.gem.m2.ugain = 1.16317  1.04706  1.05641  1.016  1.00789  1  0.984547  1.07866  0.977227  1.06342
bb.gem.m3.vgain = 1.64151  1.42027  1.50057  1.30472  1.30768  1.22052  1.16127  1
bb.gem.m3.ugain = 1  1.00844  1.01589  1.08819  1.2122  1.23589  1  1  1  1
bb.gem.m4.vgain = 1  1  1.02103  1.13387  1.12654  1.09423  1.0979  1.14616  1.0875  1.11913  1.06533  1.11272  1.11638  1.14612  1.10919  1.11349  1.10988  1.11233  1.09954  1.03086  1.07038  1.08805  1.0748  1.09311  1.0306  1.04567  0.990435  1  1  1
bb.gem.m4.ugain = 1  0.766973  0.864059  0.982028  0.972201  1.03513  1.04955  0.993831  1.04915  0.997377  1.05591  1.03405  1.00612  1.00931  1  1.03569  1.03469  1.07229  0.993337  1.01894  1.0455  0.99993  0.997611  1.00967  0.994973  1.00787  1  1  1  1
bb.gem.m5.vgain = 1  0.900286  1.04131  0.910289  1  0.967874  1  1
bb.gem.m5.ugain = 1.06687  1.0362  0.977349  0.979394  0.974296  0.984721  0.989069  1.0374  1.02166  1
bb.gem.m6.vgain = 0.594652  0.587332  0.637887  0.616034  0.592102  0.61382  0.578625  0.605136
bb.gem.m6.ugain = 0.700384  0.74894  0.826418  0.858066  0.944157  0.991656  1  0.943836  0.930283  0.934106
bb.gem.m7.vgain = 1  1  1  1  1  1  1  1
bb.gem.m7.ugain = 1  1  1  1  1  1  1  1  1  1
bb.gem.m8.vgain = 1  0.640384  0.648283  0.621249  0.671732  0.629667  0.612148  0.600039  0.662552  0.630498  0.668321  0.64525
bb.gem.m8.ugain = 1  1  1  0.907502  0.867578  0.919818  0.951583  0.973388  0.967068  1
bb.gem.m9.vgain = 1  0.86782  0.857358  0.859458  0.862913  0.780924  0.81521  0.759099  0.768187  0.810109  0.773522  1
bb.gem.m9.ugain = 1.09212  1.13171  1.10407  1.12041  1.11499  1.03797  0.909002  1.06355  1  0.977801
bb.gem.m10.vgain = 1  0.899343  0.853248  0.878153  0.927186  0.880676  0.913805  0.868828  0.904322  0.937119  0.965306  1.23105
bb.gem.m10.ugain = 0.847786  1  0.986629  0.929874  0.90398  0.893132  0.901492  0.845646  0.803953  0.755665
bb.gem.m11.vgain = 1  0.739237  0.729391  0.713062  0.685094  0.717193  0.721608  0.719667  0.715931  0.707174  0.767407  1
bb.gem.m11.ugain = 0.994686  1.04239  1  0.990673  0.953855  0.958318  1.00493  0.991255  0.959254  0.942838


bb.gem.m0.modulegain = 0.994775
bb.gem.m0.threshold_sample = 143.733
bb.gem.m0.threshold_stripsum = 431.199
bb.gem.m0.threshold_clustersum = 862.397


bb.gem.m1.modulegain = 0.846944
bb.gem.m1.threshold_sample = 94.4131
bb.gem.m1.threshold_stripsum = 283.239
bb.gem.m1.threshold_clustersum = 566.479


bb.gem.m2.modulegain = 0.958607
bb.gem.m2.threshold_sample = 96.4096
bb.gem.m2.threshold_stripsum = 289.229
bb.gem.m2.threshold_clustersum = 578.457


bb.gem.m3.modulegain = 0.817309
bb.gem.m3.threshold_sample = 100.135
bb.gem.m3.threshold_stripsum = 300.405
bb.gem.m3.threshold_clustersum = 600.81


bb.gem.m4.modulegain = 0.944988
bb.gem.m4.threshold_sample = 136.184
bb.gem.m4.threshold_stripsum = 408.553
bb.gem.m4.threshold_clustersum = 817.106


bb.gem.m5.modulegain = 1.03721
bb.gem.m5.threshold_sample = 108.862
bb.gem.m5.threshold_stripsum = 326.586
bb.gem.m5.threshold_clustersum = 653.172

bb.gem.m6.modulegain = 1.33169
bb.gem.m6.threshold_sample = 110.82
bb.gem.m6.threshold_stripsum = 332.461
bb.gem.m6.threshold_clustersum = 664.921


bb.gem.m7.modulegain = 1
bb.gem.m8.modulegain = 1.25373
bb.gem.m8.threshold_sample = 167.564
bb.gem.m8.threshold_stripsum = 502.692
bb.gem.m8.threshold_clustersum = 1005.38


bb.gem.m9.modulegain = 1.08488
bb.gem.m9.threshold_sample = 136.444
bb.gem.m9.threshold_stripsum = 409.331
bb.gem.m9.threshold_clustersum = 818.662


bb.gem.m10.modulegain = 1.10255
bb.gem.m10.threshold_sample = 154.608
bb.gem.m10.threshold_stripsum = 463.823
bb.gem.m10.threshold_clustersum = 927.646


bb.gem.m11.modulegain = 1.16909
bb.gem.m11.threshold_sample = 168.253
bb.gem.m11.threshold_stripsum = 504.759
bb.gem.m11.threshold_clustersum = 1009.52


--------[ 2021-11-16 04:35:00 ] #Run Num 12051,12055
bb.gem.m0.vgain = 1  1  1  1.04282  1.09294  1.04994  1.04259  1.09431  1.08323  1.01369  0.986955  1.09092  1.08745  1.06183  1.05286  1.01909  1.05443  1.00277  0.969393  0.967788  0.997089  0.976113  0.982246  0.956929  0.945813  0.959857  1  1  1  1
bb.gem.m0.ugain = 1  1  0.922317  1.02943  1.00268  0.907817  0.997921  0.962225  1.03855  0.972619  1.04161  1.01239  0.93478  0.972161  1  0.969704  0.9239  0.961162  0.897294  0.931843  0.917943  0.875343  0.845263  0.923763  1  1  1  1  1  1
bb.gem.m1.vgain = 1.99318  1.51922  1.50502  1.37916  1.3508  1.38022  1.3771  1
bb.gem.m1.ugain = 1  0.989372  1.0883  0.927606  1.02062  0.935408  0.944923  0.976539  0.999219  1
bb.gem.m2.vgain = 1.09704  1.02778  1.0185  1.01078  1.02759  1.03685  1.04873  1
bb.gem.m2.ugain = 1.15614  1.05205  1.05045  1.02898  1.01188  1.00864  1  1.08631  0.991536  1.06812
bb.gem.m3.vgain = 1.736  1.54023  1.56238  1.36465  1.35697  1.24714  1.18645  1
bb.gem.m3.ugain = 1  1.04493  1.03497  1.15755  1.30198  1.3625  1  1  1  1
bb.gem.m4.vgain = 1  1  1.06437  1.13559  1.10442  1.0842  1.08215  1.12903  1.0648  1.07639  1.0363  1.07277  1.07326  1.09902  1.08038  1.0625  1.06362  1.07418  1.06217  0.986219  1.02598  1.05995  1.0304  1.039  0.99792  1.00415  0.963274  1  1  1
bb.gem.m4.ugain = 1  0.745007  0.877722  0.974406  0.984401  1.0427  1.06  0.981716  1.04053  0.988068  1.03671  1.02769  1.02239  0.999877  1  1.02805  1.03647  1.06104  0.983965  1.00927  1.02732  0.983383  0.980374  0.986531  0.979045  1  1  1  1  1
bb.gem.m5.vgain = 1  0.895869  1  0.90021  1  0.961411  1  1
bb.gem.m5.ugain = 1.06796  1.0905  0.979532  0.999168  0.992805  0.988338  1.01226  1.03324  1.04854  1
bb.gem.m6.vgain = 0.562717  0.564327  0.602832  0.58794  0.561281  0.583159  0.552942  1
bb.gem.m6.ugain = 0.702558  0.755539  0.812168  0.853991  0.934336  0.980267  1  0.946426  0.935918  0.898044
bb.gem.m7.vgain = 1  1  1  1  1  1  1  1
bb.gem.m7.ugain = 1  1  1  1  1  1  1  1  1  1
bb.gem.m8.vgain = 1  0.648667  0.643402  0.605698  0.657832  0.618113  0.599266  0.586935  0.643022  0.630239  0.657005  0.611303
bb.gem.m8.ugain = 1  1  1  1  0.823199  0.883504  0.926653  0.942418  0.946006  1
bb.gem.m9.vgain = 1  0.939484  0.918975  0.93021  0.925911  0.835596  0.862399  0.812521  0.817304  0.868849  0.843262  1
bb.gem.m9.ugain = 1.19744  1.23579  1.19818  1.22146  1.19683  1.14037  1  1.17305  1.09687  1.05903
bb.gem.m10.vgain = 1  0.917695  0.852023  0.869028  0.928405  0.882143  0.910919  0.859104  0.899365  0.933746  0.960479  1.20183
bb.gem.m10.ugain = 0.824526  1  0.986145  0.910196  0.883848  0.868476  0.874059  0.820178  0.780328  0.728029
bb.gem.m11.vgain = 1  1  0.729504  0.718857  0.683779  0.702021  0.71407  0.711017  0.707015  0.699641  0.754422  1
bb.gem.m11.ugain = 1.01141  1.04475  1  0.979137  0.95025  0.937528  0.995341  0.958437  0.932182  0.978684


bb.gem.m0.modulegain = 1.00576
bb.gem.m0.threshold_sample = 130.276
bb.gem.m0.threshold_stripsum = 390.827
bb.gem.m0.threshold_clustersum = 781.654


bb.gem.m1.modulegain = 0.79874
bb.gem.m1.threshold_sample = 88.3323
bb.gem.m1.threshold_stripsum = 264.997
bb.gem.m1.threshold_clustersum = 529.994


bb.gem.m2.modulegain = 0.96594
bb.gem.m2.threshold_sample = 93.5892
bb.gem.m2.threshold_stripsum = 280.768
bb.gem.m2.threshold_clustersum = 561.535


bb.gem.m3.modulegain = 0.786771
bb.gem.m3.threshold_sample = 97.723
bb.gem.m3.threshold_stripsum = 293.169
bb.gem.m3.threshold_clustersum = 586.338


bb.gem.m4.modulegain = 0.963682
bb.gem.m4.threshold_sample = 128.261
bb.gem.m4.threshold_stripsum = 384.782
bb.gem.m4.threshold_clustersum = 769.564


bb.gem.m5.modulegain = 1.04229
bb.gem.m5.threshold_sample = 106.32
bb.gem.m5.threshold_stripsum = 318.96
bb.gem.m5.threshold_clustersum = 637.92


bb.gem.m6.modulegain = 1.35392
bb.gem.m6.threshold_sample = 106.026
bb.gem.m6.threshold_stripsum = 318.077
bb.gem.m6.threshold_clustersum = 636.154


bb.gem.m7.modulegain = 1
bb.gem.m8.modulegain = 1.27324
bb.gem.m8.threshold_sample = 165.38
bb.gem.m8.threshold_stripsum = 496.14
bb.gem.m8.threshold_clustersum = 992.281


bb.gem.m9.modulegain = 1.00388
bb.gem.m9.threshold_sample = 142.732
bb.gem.m9.threshold_stripsum = 428.195
bb.gem.m9.threshold_clustersum = 856.39


bb.gem.m10.modulegain = 1.11206
bb.gem.m10.threshold_sample = 156.127
bb.gem.m10.threshold_stripsum = 468.382
bb.gem.m10.threshold_clustersum = 936.764

bb.gem.m11.modulegain = 1.17712
bb.gem.m11.threshold_sample = 160.51
bb.gem.m11.threshold_stripsum = 481.531
bb.gem.m11.threshold_clustersum = 963.062



######################### END TIME-DEPENDENT GAIN-MATCH PARAMETERS $$$$$$$$$$$$$$$$$$$$$$$$$

###################### BEGIN TIME-DEPENDENT CLUSTERING PARAMETERS #############
#-----------[ 2021-10-17 19:12:00 ] # new higher thresholds after GEM HV increase
##bb.gem.threshold_sample = 0.0
##bb.gem.threshold_stripsum = 0.0
##bb.gem.threshold_clustersum = 0.0
#
###############################################################################

###################### BEGIN TIME-DEPENDENT OPTICS track search constraints #############

-----------[ 2021-01-01 00:00:00 ] # at SBS-1, the max. good electron momentum is about 1.5 GeV
bb.gem.useopticsconstraint = 0
bb.gem.xptar_min = -0.25
bb.gem.xptar_max = 0.25
bb.gem.yptar_min = -0.08
bb.gem.yptar_max = 0.08
bb.gem.ytar_min = -0.08
bb.gem.ytar_max = 0.08
bb.gem.pmin = 0.5
bb.gem.pmax = 1.5
bb.gem.ADCasym_cut = 0.75 
bb.gem.deltat_cut = 30.0
bb.gem.corrcoeff_cut = 0.5
bb.gem.filterflag1D = -1 # -1 = no filtering: don't require 1D hits to pass any cuts other than basic zero suppression, 0 = "soft" filtering
bb.gem.filterflag2D = 0  # 1 = "hard" filtering: require 2D hits to pass all cuts


bb.gem.peakprominence_minsigma = 3.0 
bb.gem.peakprominence_minfraction = 0.15

# limit cluster size growth to +/- 4 strips for cluster charge calculation
bb.gem.maxnu_charge = 4
bb.gem.maxnv_charge = 4 

# limit cluster size to +/-3 strips from maximum for cluster position calculation
bb.gem.maxnu_pos = 2
bb.gem.maxnv_pos = 2

bb.gem.sigmahitshape = 0.0004
bb.gem.zerosuppress = 1
bb.gem.zerosuppress_nsigma = 5.0
bb.gem.onlinezerosuppress = 0 # note that this parameter only provides a default value, actual behavior is determined by the flags seen in the raw data:

bb.gem.do_neg_signal_study = 0

bb.gem.plot_common_mode = 1
bb.gem.plot_event_info = 1
# default values will suffice for the time being.
#bb.gem.chan_cm_flags = 512

# when zero suppression is enabled again we will turn this to 1: 
bb.gem.pedsub_online = 1 # under normal conditions, this should always be 1, unless running normal data taking in pedestal mode:
bb.gem.max2Dhits = 10000000 # per-module

bb.gem.usestriptimingcut = 1
bb.gem.useTSchi2cut = 0

bb.gem.addstrip_tcut = 25.0
bb.gem.addstrip_ccor_cut = 0.5
bb.gem.suppressfirstlast = -1

# t0 and tcut values for SBS-14:

bb.gem.m0.maxstrip_t0 =     86.9
bb.gem.m0.maxstrip_tcut =     25.8
bb.gem.m1.maxstrip_t0 =     80.8
bb.gem.m1.maxstrip_tcut =       33
bb.gem.m2.maxstrip_t0 =     88.3
bb.gem.m2.maxstrip_tcut =     25.6
bb.gem.m3.maxstrip_t0 =     84.4
bb.gem.m3.maxstrip_tcut =     33.1
bb.gem.m4.maxstrip_t0 =     90.1
bb.gem.m4.maxstrip_tcut =       25
bb.gem.m5.maxstrip_t0 =     91.4
bb.gem.m5.maxstrip_tcut =     25.8
bb.gem.m6.maxstrip_t0 =     91.4
bb.gem.m6.maxstrip_tcut =     26.2
bb.gem.m7.maxstrip_t0 =     88.3
bb.gem.m7.maxstrip_tcut =       26

############### Parameters searched by SBSGEMSpectrometerTracker::ReadDatabase() ######################

# parameters controlling tracking:
bb.gem.minhitsontrack = 3

bb.gem.maxhitcombos = 25000
bb.gem.maxhitcombos_inner = 25000
bb.gem.maxhitcombos_total = 10000000000

bb.gem.tryfasttrack = 1

# typical values after alignment:
bb.gem.gridbinwidthx = 0.01
bb.gem.gridbinwidthy = 0.01
bb.gem.gridedgetolerancex = 0.003
bb.gem.gridedgetolerancey = 0.003
bb.gem.trackchi2cut = 40.0

# For alignment with cosmics, we want to start with wider grid bins and a loose chi2 cut for tracking:
#bb.gem.gridbinwidthx = 0.05
#bb.gem.gridbinwidthy = 0.05
#bb.gem.gridedgetolerancex = 0.02
#bb.gem.gridedgetolerancey = 0.02
#bb.gem.trackchi2cut = 3000.0

# For initial alignment with cosmics, we want to start with no constraints on track-finding:
bb.gem.useconstraint = 1
bb.gem.useslopeconstraint = 1
bb.gem.useopticsconstraint = 1
bb.gem.useforwardopticsconstraint = 0

bb.gem.sigmahitpos = 0.00015
bb.gem.do_efficiencies = 1
bb.gem.dump_geometry_info = 0

bb.gem.efficiency_bin_width_1D = 0.02
bb.gem.efficiency_bin_width_2D = 0.04

# these should probably be tighter later on:
bb.gem.xptar_min = -0.25
bb.gem.xptar_max = 0.25

bb.gem.yptar_min = -0.09
bb.gem.yptar_max = 0.09

# be careful with these, they are angle-dependent:
bb.gem.ytar_min = -0.08
bb.gem.ytar_max = 0.08

# central electron momentum for SBS-14 is p ~= 2.0 GeV
bb.gem.pmin = 0.8
bb.gem.pmax = 2.6

bb.gem.xpfp_min = -0.25
bb.gem.xpfp_max = 0.25
bb.gem.ypfp_min = -0.09
bb.gem.ypfp_max = 0.09

---------[ 2022-01-11 00:00:00 ] # for optics running with sieve in, we will disable suppression of strips peaking in first or last time sample for now:

bb.gem.suppressfirstlast = 0

# time-dependent entries for SBS-14 optics data:
---------[ 2022-01-11 8:45:00 ] # zero-field, five-foil:

bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0

---------[ 2022-01-11 9:13:00 ] # field-on, five-foil optics:

# switch these off for optics analysis
bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0

---------[ 2022-01-11 10:09:00 ] # zero-field, 1-foil optics: 

bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0

---------[ 2022-01-11 10:35:00 ] # presumably going to production after this:

bb.gem.suppressfirstlast = -1
bb.gem.useopticsconstraint = 1
bb.gem.useslopeconstraint = 1


---------[ 2022-01-13 12:00:00 ] # cosmic runs while target was broken

bb.gem.suppressfirstlast = 0
bb.gem.useconstraint = 0
bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0

---------[ 2022-01-15 12:00:00 ] # production runs after this

bb.gem.suppressfirstlast = -1

bb.gem.useconstraint = 1
bb.gem.useopticsconstraint = 1
bb.gem.useslopeconstraint = 1

---------[ 2022-01-20 12:00:00 ] # cosmic data during change over

bb.gem.pedsub_online = 0  #special run where full readout was done
bb.gem.suppressfirstlast = 0
bb.gem.useconstraint = 0
bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0

# new GEM alignment SBS-8: 

bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.001943252     -0.01141489       0.1648858
bb.gem.m1.angle =        0.071777      0.04587799      0.03984458
bb.gem.m2.position =    -0.007504652     0.005302038       0.2781963
bb.gem.m2.angle =       0.1601196       0.0624801      -0.3046119
bb.gem.m3.position =    -0.009097282     0.004663564       0.4565369
bb.gem.m3.angle =      0.07703053      0.07614445      -0.4594355
bb.gem.m4.position =      -0.7647544     0.002085547        1.575685
bb.gem.m4.angle =      0.02042707      -0.4220189      -0.3212649
bb.gem.m5.position =      -0.2524251    -0.002037946        1.533682
bb.gem.m5.angle =      -0.1179937      0.09040643      -0.3091155
bb.gem.m6.position =       0.2587447    -0.008014535        1.577371
bb.gem.m6.angle =       0.0780439      -0.0352653      -0.2700927
bb.gem.m7.position =       0.7706319     -0.01153047        1.534709
bb.gem.m7.angle =      -0.1816598      -0.1142634      -0.3129444

# strip time cuts for SBS-8:
bb.gem.m0.maxstrip_t0 =     86.6
bb.gem.m0.maxstrip_tcut =     24.7
bb.gem.m1.maxstrip_t0 =     80.1
bb.gem.m1.maxstrip_tcut =     32.6
bb.gem.m2.maxstrip_t0 =     87.9
bb.gem.m2.maxstrip_tcut =     24.8
bb.gem.m3.maxstrip_t0 =     83.7
bb.gem.m3.maxstrip_tcut =     33.3
bb.gem.m4.maxstrip_t0 =     88.6
bb.gem.m4.maxstrip_tcut =     24.1
bb.gem.m5.maxstrip_t0 =     90.8
bb.gem.m5.maxstrip_tcut =       25
bb.gem.m6.maxstrip_t0 =     90.8
bb.gem.m6.maxstrip_tcut =     25.5
bb.gem.m7.maxstrip_t0 =     87.7
bb.gem.m7.maxstrip_tcut =     26.3

bb.gem.constraintwidth_theta = 0.0192363
bb.gem.constraintwidth_phi = 0.0213015

bb.gem.m0.threshold_sample = 106.534
bb.gem.m0.threshold_stripsum = 515
bb.gem.m0.threshold_clustersum = 910

bb.gem.m1.threshold_sample = 99.1428
bb.gem.m1.threshold_stripsum = 595
bb.gem.m1.threshold_clustersum = 1050

bb.gem.m2.threshold_sample = 102.495
bb.gem.m2.threshold_stripsum = 525
bb.gem.m2.threshold_clustersum = 930

bb.gem.m3.threshold_sample = 109.703
bb.gem.m3.threshold_stripsum = 725
bb.gem.m3.threshold_clustersum = 1290

bb.gem.m4.threshold_sample = 95.0024
bb.gem.m4.threshold_stripsum = 555
bb.gem.m4.threshold_clustersum = 1010

bb.gem.m5.threshold_sample = 97.4862
bb.gem.m5.threshold_stripsum = 445
bb.gem.m5.threshold_clustersum = 790

bb.gem.m6.threshold_sample = 108.221
bb.gem.m6.threshold_stripsum = 485
bb.gem.m6.threshold_clustersum = 870

bb.gem.m7.threshold_sample = 104.064
bb.gem.m7.threshold_stripsum = 485
bb.gem.m7.threshold_clustersum = 870



---------[ 2022-01-21 17:00:00 ] # Zero field one foil

bb.gem.pedsub_online = 1  #should almost always be 1
bb.gem.suppressfirstlast = -1
bb.gem.useconstraint = 1
bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0


--------[ 2022-01-22 8:00:00 ] # turn on optics and track slope constraints, with loose cuts initially. Optics needs work

bb.gem.useopticsconstraint = 1
bb.gem.useslopeconstraint = 1

bb.gem.ytar_min = -0.055
bb.gem.ytar_max = 0.055

bb.gem.yptar_min = -0.08
bb.gem.yptar_max = 0.08

bb.gem.xptar_min = -0.25
bb.gem.xptar_max = 0.25

bb.gem.pmin = 0.8
bb.gem.pmax = 4.5

bb.xpfp_min = -0.2
bb.xpfp_max = 0.28
bb.ypfp_min = -0.08
bb.ypfp_max = 0.08

--------[ 2022-01-30 17:05:00 ] # Full readout runs for negative pulse study

bb.gem.pedsub_online = 0
bb.gem.suppressfirstlast = -1

--------[ 2022-01-30 18:05:00 ] # Back to zero suppression for normal running

bb.gem.pedsub_online = 1 # normally this should always be set to 1
bb.gem.suppressfirstlast = -1

-------[ 2022-02-01 12:00:00 ] # at start of SBS-9 kinematics, we need to adjust limits for optics and track slope constraints:

bb.gem.ytar_min = -0.08
bb.gem.ytar_max = 0.08

bb.gem.yptar_min = -0.09
bb.gem.yptar_max = 0.09

bb.gem.xptar_min = -0.3
bb.gem.xptar_max = 0.3

bb.gem.pmin = 0.5 
bb.gem.pmax = 2.5

bb.gem.xpfp_min = -0.3
bb.gem.xpfp_max = 0.3

bb.gem.ypfp_min = -0.09
bb.gem.ypfp_max = 0.09

# new GEM alignment applicable to SBS-9:

bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =     -0.00182431     -0.01151221       0.1652206
bb.gem.m1.angle =       0.1156957      0.04698929      0.05065491
bb.gem.m2.position =    -0.007314566     0.006298027       0.2783497
bb.gem.m2.angle =      0.08480173      0.07467726      -0.2936044
bb.gem.m3.position =    -0.008954243     0.004336396       0.4568558
bb.gem.m3.angle =       0.1705022      0.07973308      -0.4442364
bb.gem.m4.position =      -0.7651478       0.0021111         1.57767
bb.gem.m4.angle =      0.07648815      -0.3847935      -0.3142929
bb.gem.m5.position =      -0.2526112    -0.002088388        1.534707
bb.gem.m5.angle =      -0.1212913     -0.04953069      -0.3091588
bb.gem.m6.position =       0.2586012    -0.008067762        1.578146
bb.gem.m6.angle =       0.1179524     -0.07008177      -0.2695913
bb.gem.m7.position =        0.770547     -0.01169766        1.535663
bb.gem.m7.angle =      -0.1405529       -0.192024       -0.325355

# strip time cuts applicable to SBS-9:
bb.gem.m0.maxstrip_t0 =     87.1
bb.gem.m0.maxstrip_tcut =     27.3
bb.gem.m1.maxstrip_t0 =     81.6
bb.gem.m1.maxstrip_tcut =     34.1
bb.gem.m2.maxstrip_t0 =     88.9
bb.gem.m2.maxstrip_tcut =     26.9
bb.gem.m3.maxstrip_t0 =       85
bb.gem.m3.maxstrip_tcut =     34.1
bb.gem.m4.maxstrip_t0 =     90.2
bb.gem.m4.maxstrip_tcut =     27.2
bb.gem.m5.maxstrip_t0 =     91.6
bb.gem.m5.maxstrip_tcut =     27.4
bb.gem.m6.maxstrip_t0 =     91.4
bb.gem.m6.maxstrip_tcut =     28.2
bb.gem.m7.maxstrip_t0 =     88.7
bb.gem.m7.maxstrip_tcut =     27.5

bb.gem.constraintwidth_theta = 0.0431165
bb.gem.constraintwidth_phi = 0.0345523

bb.gem.m0.threshold_sample = 95.3184
bb.gem.m0.threshold_stripsum = 575
bb.gem.m0.threshold_clustersum = 1010

bb.gem.m1.threshold_sample = 91.1767
bb.gem.m1.threshold_stripsum = 695
bb.gem.m1.threshold_clustersum = 1250

bb.gem.m2.threshold_sample = 93.0786
bb.gem.m2.threshold_stripsum = 585
bb.gem.m2.threshold_clustersum = 1050

bb.gem.m3.threshold_sample = 127.267
bb.gem.m3.threshold_stripsum = 825
bb.gem.m3.threshold_clustersum = 1510

bb.gem.m4.threshold_sample = 84.4757
bb.gem.m4.threshold_stripsum = 615
bb.gem.m4.threshold_clustersum = 1170

bb.gem.m5.threshold_sample = 86.4416
bb.gem.m5.threshold_stripsum = 505
bb.gem.m5.threshold_clustersum = 890

bb.gem.m6.threshold_sample = 93.0259
bb.gem.m6.threshold_stripsum = 535
bb.gem.m6.threshold_clustersum = 950

bb.gem.m7.threshold_sample = 90.6161
bb.gem.m7.threshold_stripsum = 525
bb.gem.m7.threshold_clustersum = 930




-------[ 2022-02-02 17:25:00 ] # start zero-field running for optics

bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0

------[ 2022-02-02 18:30:00 ] # turn field back on for optics running; loosen up ytarget cuts for optics data

bb.gem.useopticsconstraint = 1
bb.gem.useslopeconstraint = 1

bb.gem.ytar_min = -0.12
bb.gem.ytar_max = 0.12

bb.gem.yptar_min = -0.12
bb.gem.yptar_max = 0.12


------[ 2022-02-02 21:00:00 ] # set ytarget and yptarget cuts back to nominal for 15-cm target:


bb.gem.ytar_min = -0.08
bb.gem.ytar_max = 0.08

bb.gem.yptar_min = -0.09
bb.gem.yptar_max = 0.09

--------[ 2022-02-04 05:00:00 ] # Set up for cosmic runs

bb.gem.suppressfirstlast = 0
bb.gem.useconstraint = 0
bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0

bb.gem.usestriptimingcut = 0

--------[ 2022-02-04 19:40:00 ] # Back to production

bb.gem.suppressfirstlast = 1
bb.gem.useconstraint = 1
bb.gem.useopticsconstraint = 1
bb.gem.useslopeconstraint = 1

bb.gem.usestriptimingcut = 1

--------[ 2022-02-07 20:20:00 ] # Full readout runs for high current study

bb.gem.pedsub_online = 0


--------[ 2022-02-07 21:40:00 ] # Back to zero suppression for normal running

bb.gem.pedsub_online = 1 # normally this should always be set to 1


#################### BEGIN TIME-DEPENDENT GAIN MATCH PARAMETERS ##############################

--------[ 2022-01-22 10:00:00 ] # Testing GEM gain match, not due to a change in GEMs. Based on run 13450
#Module internal relative gains by APV card: 
#bb.gem.m0.vgain = 1  1  1  1.15517  1.20624  1.19539  1.20645  1.24387  1.19976  1.1194  1.09554  1.21416  1.16422  1.12195  1.15496  1.09923  1.17271  1.13885  1.09125  1.07047  1.11752  1.05794  1.09705  1.10399  1.10644  1  1  1  1  1
#bb.gem.m0.ugain = 1  1  1.02021  1.10989  1.11534  0.974315  1.09813  1.04085  1.09761  1.04369  1.13442  1.06118  1  1.02687  1.06469  1.02971  0.968097  1.02033  0.958374  0.970416  0.969338  0.940072  0.940086  1.00566  1  1  1  1  1  1
#bb.gem.m1.vgain = 1  1  1.31671  1.36111  1.44504  1.41243  1.34588  1.32609  1.24758  1.27095  1.23168  1.12131  1.21678  1.16214  1.08858  1.42387  1.42735  1.29951  1.62938  1.47517  1.34767  1.36293  1.25578  1.44173  1.45606  1  1  1  1  1
#bb.gem.m1.ugain = 1  1.08922  1.17508  1.24925  1.25432  1.17621  1.17685  1.20233  1.17352  1.06596  1.06279  1.07206  1  1.01869  1.03187  1.28163  1.43111  1.30291  1.44295  1.26419  1.31548  1.13892  1.22225  1.34877  1.36391  1  1  1  1  1
#bb.gem.m2.vgain = 1  1  1.1397  1.21472  1.2299  1.16323  1.14713  1.18915  1.11895  1.15432  1.0945  1.14104  1.22452  1.1878  1.11263  1.18549  1.10008  1.18161  1.11202  1.02807  1.07376  1.10119  1.10781  1.13246  1.08538  1.14361  1  1  1  1
#bb.gem.m2.ugain = 0.773271  0.819214  0.922748  1.04035  0.998127  1.06437  1.07638  1.00888  1.05894  1.0048  1.05234  1.06569  1  1.02379  1.04866  1.08947  1.01362  1.05244  0.989348  1.0133  1.04478  0.992551  1.01506  1.05426  1.09027  1  1  1  1  1
#bb.gem.m3.vgain = 1  1.03998  1.17696  1.24265  1.3834  1.2338  1.25573  1.24677  1.18436  1.07535  1.10824  1.08514  1.12281  1.05676  1.06464  1.07781  1.05836  1.0801  1.01248  0.961632  0.976762  0.959193  1.0409  0.995427  0.942243  0.959637  1  1  1  1
#bb.gem.m3.ugain = 0.776881  0.916234  0.946371  1.14967  1.07598  0.994858  0.982147  0.960386  0.988521  0.986614  0.941436  0.930909  1  0.964211  0.979584  0.95164  0.941986  0.944015  0.879803  0.960016  0.981037  0.969171  0.895577  0.906867  0.975153  1  1  1  1  1
#bb.gem.m4.vgain = 1  0.605778  0.560365  0.564053  0.60311  0.576911  0.560287  0.54372  0.632728  0.576601  0.611647  1
#bb.gem.m4.ugain = 1  1  1  1  1  0.852064  0.892654  0.904693  1  1
#bb.gem.m5.vgain = 1  0.810694  0.835053  0.834937  0.830642  0.742975  0.774466  0.714964  0.720446  0.763134  0.739416  1
#bb.gem.m5.ugain = 1.17083  1.19015  1.18432  1.20331  1.20836  1.12362  0.963529  1.12704  1.04585  1
#bb.gem.m6.vgain = 1  0.897242  0.864114  0.874373  0.969009  0.885485  0.918915  0.869663  0.89463  0.943334  0.957692  1.24301
#bb.gem.m6.ugain = 0.833117  1  0.998242  0.919528  0.892406  0.892204  0.903767  0.8315  0.801385  0.761324
#bb.gem.m7.vgain = 1  0.712873  0.753101  0.720251  0.672704  0.709522  0.700282  0.702044  0.692038  0.672715  0.738001  1
#bb.gem.m7.ugain = 0.993049  1.04891  1  0.971152  0.931794  0.933264  0.981745  0.975821  0.921493  0.97431

#Module average gains relative to target ADC peak position of 4500
#bb.gem.m0.modulegain = 0.92149
#bb.gem.m0.threshold_sample = 91.2759
#bb.gem.m0.threshold_stripsum = 273.828
#bb.gem.m0.threshold_clustersum = 547.656


#bb.gem.m1.modulegain = 0.802039
#bb.gem.m1.threshold_sample = 104.554
#bb.gem.m1.threshold_stripsum = 313.663
#bb.gem.m1.threshold_clustersum = 627.326
#bb.gem.m2.modulegain = 0.922386
#bb.gem.m2.threshold_sample = 97.4441
#bb.gem.m2.threshold_stripsum = 292.332
#bb.gem.m2.threshold_clustersum = 584.664


#bb.gem.m3.modulegain = 0.97725
#bb.gem.m3.threshold_sample = 144.171
#bb.gem.m3.threshold_stripsum = 432.514
#bb.gem.m3.threshold_clustersum = 865.027


#bb.gem.m4.modulegain = 1
#bb.gem.m5.modulegain = 1.07327
#bb.gem.m5.threshold_sample = 71.1529
#bb.gem.m5.threshold_stripsum = 213.459
#bb.gem.m5.threshold_clustersum = 426.917


#bb.gem.m6.modulegain = 1.10346
#bb.gem.m6.threshold_sample = 85.6592
#bb.gem.m6.threshold_stripsum = 256.978
#bb.gem.m6.threshold_clustersum = 513.955


#bb.gem.m7.modulegain = 1.18876
#bb.gem.m7.threshold_sample = 88.5545
#bb.gem.m7.threshold_stripsum = 265.663
#bb.gem.m7.threshold_clustersum = 531.327


--------[ 2022-02-02 01:50:00 ] # Testing GEM gain match, not due to a change in GEMs. Based on run 13656
#Module internal relative gains by APV card: 
#bb.gem.m0.vgain = 1  1  1  0.937704  0.897974  0.918681  0.898426  0.872614  0.896645  0.946739  0.975533  0.879906  0.909803  0.945525  0.918137  0.965464  0.904604  0.928415  0.973502  0.987713  0.951799  0.995302  0.96377  0.969524  0.947524  0.929435  1.03397  1  1  1
#bb.gem.m0.ugain = 1  1  1.07142  0.976681  0.988072  1.11738  0.983955  1.03759  0.982551  1.02676  0.954247  0.999631  1.06576  1.03476  1  1.03734  1.09796  1.03925  1.10772  1.08983  1.09481  1.11937  1.1498  1.05314  1.10566  1.18795  1  1  1  1
#bb.gem.m1.vgain = 1  1  0.868283  0.829567  0.795963  0.81229  0.839009  0.838967  0.879519  0.858836  0.878922  0.940339  0.871477  0.905114  0.957815  0.716235  0.712948  0.773992  0.612074  0.674096  0.741878  0.736215  0.793289  0.697836  0.673696  0.757189  0.702386  0.675545  1  1
#bb.gem.m1.ugain = 1  1.06925  0.962574  0.909918  0.896249  0.94065  0.925228  0.900037  0.935965  0.99326  0.996961  0.975215  1.04322  1.02366  1  0.796813  0.70947  0.791443  0.727949  0.802827  0.771099  0.896725  0.841584  0.757312  0.749719  0.816865  0.781989  1  1  1
#bb.gem.m2.vgain = 1  1  0.900948  0.855889  0.862769  0.899198  0.915362  0.877102  0.92968  0.904594  0.95162  0.909087  0.852386  0.88032  0.934692  0.92093  0.953941  0.907798  0.940674  1.00732  0.970115  0.941842  0.955853  0.946756  0.960681  0.94047  1.01542  1.03584  1  1
#bb.gem.m2.ugain = 1  1.2796  1.13333  0.998079  1.04877  0.981467  0.972348  1.03966  0.991341  1.04287  0.9905  0.990253  1.04925  1.02512  1  0.963773  1.02794  0.998835  1.05773  1.03259  0.999784  1.05033  1.03324  1.01428  1.0109  0.968617  0.99443  1  1  1
#bb.gem.m3.vgain = 1  1  0.894386  0.849251  0.769997  0.835537  0.835526  0.831312  0.865302  0.934936  0.897292  0.910891  0.866956  0.924338  0.911646  0.900028  0.909912  0.884948  0.932564  0.9755  0.964007  0.981806  0.529512  0.928133  1.00056  1.00982  0.893664  0.971543  1.22131  1
#bb.gem.m3.ugain = 1.34086  1.1222  1.07585  0.906846  0.953804  1.01784  1.02383  1.03805  1.01026  1.00378  1.04553  1.05024  0.983973  1.02107  1  1.02573  1.02459  1.01431  1.09073  0.992713  0.976305  0.994752  1.06948  1.03934  1.08068  1.05917  1.0331  1.16651  1  1
#bb.gem.m4.vgain = 1  1.48603  1.51335  1.55575  1.43968  1.5448  1.57198  1.5954  1.42807  1.5144  1.41728  1.53343
#bb.gem.m4.ugain = 1.03063  1.033  0.979896  0.983761  1.07867  1.02557  1  0.963135  0.961843  0.917783
#bb.gem.m5.vgain = 1.12089  1.21815  1.21698  1.22865  1.22484  1.36618  1.29742  1.40621  1.40882  1.32281  1.36685  1
#bb.gem.m5.ugain = 0.895933  0.861045  0.874446  0.865253  0.855061  0.927923  1.08329  0.926506  1  1.03394
#bb.gem.m6.vgain = 1.08145  1.06881  1.13724  1.11112  1.02431  1.10022  1.06196  1.11323  1.0713  1.0165  1.00696  0.829175
#bb.gem.m6.ugain = 1.16905  1  0.999067  1.06294  1.09205  1.0934  1.08871  1.16981  1.22405  1.30484
#bb.gem.m7.vgain = 1  1.38042  1.36206  1.41468  1.46892  1.39876  1.39062  1.3824  1.40528  1.44806  1.31903  1.16783

# Module average gains relative to target ADC peak position of 4500
#bb.gem.m0.modulegain = 1.03081
#bb.gem.m1.modulegain = 1.52634
#bb.gem.m2.modulegain = 1.13101
#bb.gem.m3.modulegain = 1.76797
#bb.gem.m4.modulegain = 0.950861
#bb.gem.m5.modulegain = 0.715215
#bb.gem.m6.modulegain = 0.832998
#bb.gem.m7.modulegain = 0.805924

# ######################### END TIME-DEPENDENT GAIN-MATCH PARAMETERS #######################

--------[ 2022-07-01 14:30:00 ] # Cosmic runs during the break between GMn and GEn

bb.gem.suppressfirstlast = 0
bb.gem.useconstraint = 0
bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0

bb.gem.usestriptimingcut = 0

#New alignment with cosmic data 
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.001911928     -0.01125671        0.165075
bb.gem.m1.angle =      -0.1045636      0.03398512      0.05979535
bb.gem.m2.position =    -0.007453875     0.006105974       0.2792567
bb.gem.m2.angle =     -0.01946687           0.032      -0.2967879
bb.gem.m3.position =    -0.008993083     0.004983439       0.4568277
bb.gem.m3.angle =     -0.03679291      0.05628952      -0.4555769
bb.gem.m4.position =      -0.7643594     0.001922466        1.575923
bb.gem.m4.angle =     -0.06423467      -0.1929917      -0.3477203
bb.gem.m5.position =      -0.2522177    -0.002406637        1.534186
bb.gem.m5.angle =      -0.1933844      -0.0859325      -0.3064016
bb.gem.m6.position =       0.2586571    -0.008294649         1.57827
bb.gem.m6.angle =     -0.01082531      -0.1947286      -0.2585426
bb.gem.m7.position =       0.7710201     -0.01163987        1.536401
bb.gem.m7.angle =      -0.2508493      -0.1232231      -0.2878157








###################### TIME-DEPENDENT PEDESTAL FILES ##########################


--------[ 2022-01-6 12:00:00 ] # new pedestal after J0 swap
bb.gem.pedfile = gemped/daq_ped_bb_gem_run13089.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run13089.dat

--------[ 2022-01-9 21:00:00 ] # new pedestal after replacing an APV
bb.gem.pedfile = gemped/daq_ped_bb_gem_run13142.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run13142.dat

--------[ 2022-01-11 11:45:00 ] # new pedestal after replacing an APV
bb.gem.pedfile = gemped/daq_ped_bb_gem_run13197.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run13197.dat

--------[ 2022-01-22 15:25:00 ] # new pedestal because one backplane was shifted
bb.gem.pedfile = gemped/daq_ped_bb_gem_run13456.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run13456.dat

--------[ 2022-01-23 16:50:00 ] # new pedestal because one APV shifted it's baseline
bb.gem.pedfile = gemped/daq_ped_bb_gem_run13480.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run13480.dat

--------[ 2022-01-30 15:15:00 ] # new pedestal because one APV in UV layer#4 shifted it's baseline
bb.gem.pedfile = gemped/daq_ped_bb_gem_run13594.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run13594.dat

--------[ 2022-01-31 19:30:00 ] # new pedestal after replacing one backplane on layer 2
bb.gem.pedfile = gemped/daq_ped_bb_gem_run13637.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run13637.dat

--------[ 2022-07-01 14:30:00 ] # new pedestal after replacing multiple APVs and backplanes during the break after GMn
bb.gem.pedfile = gemped/daq_ped_bb_gem_run14035.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run14035.dat

--------[ 2022-08-01 16:10:00 ] # new pedestal after some APVs has shifted
bb.gem.pedfile = gemped/daq_ped_bb_gem_run1039.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run1039.dat

--------[ 2022-08-25 16:35:00 ] # new pedestal after some APVs has shifted
bb.gem.pedfile = gemped/daq_ped_bb_gem_run1224.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run1224.dat

######################  END TIME-DEPENDENT PEDESTAL FILES #####################


