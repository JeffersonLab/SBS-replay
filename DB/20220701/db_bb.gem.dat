#######################################################################################################################################
#   ATTENTION: THIS IS THE "v4" BigBite GEM database for the start of GEN (same as v3 but clean out some old GMN-specific entries     #
#######################################################################################################################################

----------[ 2022-07-01 00:00:00 ] # starting GEN-1

bb.gem.usetrigtime = 1
bb.gem.trigtime_crate = 5
bb.gem.trigtime_slot = 2
bb.gem.trigtime_chan = 127
bb.gem.trigtime_t0 = 345.0
bb.gem.trigtime_calib = 0.0936
bb.gem.trigtime_slope = 0.5
bb.gem.maxtrigtime_correction = 50.0

##################### START WITH PARAMETERS THAT AREN'T EXPECTED TO CHANGE OFTEN #####################

bb.gem.modules = m0   m1    m2   m3     m4 m5 m6 m7

bb.gem.m0.layer = 0

bb.gem.m1.layer = 1

bb.gem.m2.layer = 2

bb.gem.m3.layer = 3

bb.gem.m4.layer = 4
bb.gem.m5.layer = 4
bb.gem.m6.layer = 4
bb.gem.m7.layer = 4


# APV mapping configurations: 0 = INFN, 1 = UVA X/Y, 2 = UVA U/V
bb.gem.m0.apvmap = 2 # UVA U/V

bb.gem.m1.apvmap = 2 # U/V

bb.gem.m2.apvmap = 2 # U/V

bb.gem.m3.apvmap = 2 # U/V
 
bb.gem.m4.apvmap = 1 # UVA X/Y
bb.gem.m5.apvmap = 1 # UVA X/Y
bb.gem.m6.apvmap = 1 # UVA X/Y
bb.gem.m7.apvmap = 1 # UVA X/Y

# basic flags controlling decoding:
bb.gem.pedestalmode = 0
bb.gem.commonmode_flag = 2 # 0 = sorting, 1 = "Danning method", 2 = histogramming method cm subtraction
bb.gem.commonmode_online_flag = 4 # 3 = Danning method during GMn, 4 = Danning method during GEn
# commenting out definition of cm flags channel
#bb.gem.chan_cm_flags = 512 # defines the "dummy" reference channel for storing the cm_enable and build_all_samples flags
bb.gem.commonmode_nstriplo = 28
bb.gem.commonmode_nstriphi = 28
bb.gem.commonmode_niter = 3
bb.gem.commonmode_minstrips = 20
bb.gem.plot_common_mode = 1
bb.gem.pedsub_online = 1 # normally this should always be set to 1
bb.gem.dump_geometry_info = 1
bb.gem.efficiency_bin_width_1D = 0.02
bb.gem.efficiency_bin_width_2D = 0.02
bb.gem.commonmode_range_nsigma = 5.0

# (online) Danning-method parameters:
bb.gem.commonmode_danning_nsigma_cut = 3.0

# histogramming-method parameters: 
bb.gem.commonmode_binwidth_nsigma = 2.0
bb.gem.commonmode_scanrange_nsigma = 2.5
bb.gem.commonmode_stepsize_nsigma = 0.25

bb.gem.correct_common_mode = 0
bb.gem.correct_common_mode_minstrips = 15
bb.gem.correct_common_mode_nsigma = 2.0

bb.gem.use_commonmode_rolling_average = 1
bb.gem.commonmode_nevents_lookback = 10

bb.gem.m0.modulegain = 1
bb.gem.m1.modulegain = 1
bb.gem.m2.modulegain = 1
bb.gem.m3.modulegain = 1
bb.gem.m4.modulegain = 1
bb.gem.m5.modulegain = 1
bb.gem.m6.modulegain = 1
bb.gem.m7.modulegain = 1

bb.gem.m0.ugain = 1
bb.gem.m1.ugain = 1
bb.gem.m2.ugain = 1
bb.gem.m3.ugain = 1
bb.gem.m4.ugain = 1
bb.gem.m5.ugain = 1
bb.gem.m6.ugain = 1
bb.gem.m7.ugain = 1

bb.gem.m0.vgain = 1
bb.gem.m1.vgain = 1
bb.gem.m2.vgain = 1
bb.gem.m3.vgain = 1
bb.gem.m4.vgain = 1
bb.gem.m5.vgain = 1
bb.gem.m6.vgain = 1
bb.gem.m7.vgain = 1

bb.gem.plot_event_info = 0

# we MAY need to adjust the size on the U/V layers, but for now let's just use a nominal 40x150 cm^2:

# define size of layer active area: 
bb.gem.m0.size = 1.50 0.40 0.001

bb.gem.m1.size = 1.50 0.40 0.001

bb.gem.m2.size = 1.50 0.40 0.001

bb.gem.m3.size = 1.50 0.40 0.001

bb.gem.m4.size = 0.512 0.6144 0.001
bb.gem.m5.size = 0.512 0.6144 0.001
bb.gem.m6.size = 0.512 0.6144 0.001
bb.gem.m7.size = 0.512 0.6144 0.001

# define strip directions:

bb.gem.m0.uangle = 150.0
bb.gem.m0.vangle = -150.0

bb.gem.m1.uangle = 150.0
bb.gem.m1.vangle = -150.0

bb.gem.m2.uangle = 150.0
bb.gem.m2.vangle = -150.0

bb.gem.m3.uangle = 150.0
bb.gem.m3.vangle = -150.0

bb.gem.m4.uangle = 0.0
bb.gem.m4.vangle = -90.0
bb.gem.m5.uangle = 0.0
bb.gem.m5.vangle = -90.0
bb.gem.m6.uangle = 0.0
bb.gem.m6.vangle = -90.0
bb.gem.m7.uangle = 0.0
bb.gem.m7.vangle = -90.0

# Strip offsets: 

# U offsets:
bb.gem.m0.uoffset = 0.0108

bb.gem.m1.uoffset = 0.0108

bb.gem.m2.uoffset = 0.0108

bb.gem.m3.uoffset = 0.0108

bb.gem.m4.uoffset = 0.0
bb.gem.m5.uoffset = 0.0
bb.gem.m6.uoffset = 0.0
bb.gem.m7.uoffset = 0.0

# V offsets:
bb.gem.m0.voffset = 0.0108

bb.gem.m1.voffset = 0.0108

bb.gem.m2.voffset = 0.0108

bb.gem.m3.voffset = 0.0108

bb.gem.m4.voffset = 0.0
bb.gem.m5.voffset = 0.0
bb.gem.m6.voffset = 0.0
bb.gem.m7.voffset = 0.0

# strip counts:

bb.gem.m0.nstripsu = 3840
bb.gem.m0.nstripsv = 3840

bb.gem.m1.nstripsu = 3840
bb.gem.m1.nstripsv = 3840

bb.gem.m2.nstripsu = 3840
bb.gem.m2.nstripsv = 3840

bb.gem.m3.nstripsu = 3840
bb.gem.m3.nstripsv = 3840

bb.gem.m4.nstripsu = 1280
bb.gem.m4.nstripsv = 1536
bb.gem.m5.nstripsu = 1280
bb.gem.m5.nstripsv = 1536
bb.gem.m6.nstripsu = 1280
bb.gem.m6.nstripsv = 1536
bb.gem.m7.nstripsu = 1280
bb.gem.m7.nstripsv = 1536

# strip pitch (always 0.4 mm):
bb.gem.upitch = 0.0004
bb.gem.vpitch = 0.0004

# DECODE MAP: 

################### DECODE INFO ########################################################################
## Channel maps for decoding explained                                                                ##
## Each entry corresponds to one APV card                                                             ## 
## Crate = ROC ID = 20 for BigBite VTP                                                                ##
## Slot = 11 for BigBite VTP                                                                          ##
## fiber/mpd is fiber number for an MPD module, this is unique for each module within a VTP/SSP       ##
## gemid is unique "production ID" of a GEM module, not currently used by analysis but useful         ##
## for bookkeeping/tracking                                                                           ##
## adc_ch is the unique adc channel of this APV card within its associated MPD                        ##
## i2c is the "i2c address" of this APV card (not currently used by analysis)                         ##
## pos maps APV cards to physical locations on the detector                                           ##
## invert specifies whether strip index runs from "right-to-left" or "left-to-right" within an APV    ##
## axis specifies which strip orientation/dimension of the readout strips connected to this APV       ##
## ORDER of entries in the maps is:                                                                   ##
## crate   slot   fiber/mpd  gemid  adc_ch   i2c   pos     invert   axis                              ##
########################################################################################################

bb.gem.m0.chanmap = 
     20      11       7       3       0       3      29       1       1 
     20      11       7       3       1       2      28       1       1 
     20      11       7       3       2       1      27       1       1 
     20      11       7       3       3       0      26       1       1 
     20      11       7       3       4       7      25       1       1 
     20      11       7       3       5       6      24       1       1 
     20      11       7       3       6       5      23       1       1 
     20      11       7       3       7       4      22       1       1 
     20      11       7       3       8      11      21       1       1 
     20      11       7       3       9      10      20       1       1 
     20      11       7       3      10       9      19       1       1 
     20      11       7       3      11       8      18       1       1 
     20      11       7       3      12      14      17       1       1 
     20      11       7       3      13      13      16       1       1 
     20      11       7       3      14      12      15       1       1 
     20      11       8       3       0       3      11       1       1 
     20      11       8       3       1       2      10       1       1 
     20      11       8       3       2       1       9       1       1 
     20      11       8       3       3       0       8       1       1 
     20      11       8       3       4       7       7       1       1 
     20      11       8       3       5       6       6       1       1 
     20      11       8       3       6       5       5       1       1 
     20      11       8       3       7       4       4       1       1 
     20      11       8       3       8      11       3       1       1 
     20      11       8       3       9      10       2       1       1 
     20      11       8       3      10       9       1       1       1 
     20      11       8       3      11       8       0       1       1 
     20      11       8       3      12      14      14       1       1 
     20      11       8       3      13      13      13       1       1 
     20      11       8       3      14      12      12       1       1 
     20      11       9       3       0       3      26       0       0 
     20      11       9       3       1       2      27       0       0 
     20      11       9       3       2       1      28       0       0 
     20      11       9       3       3       0      29       0       0 
     20      11       9       3       4       7      22       0       0 
     20      11       9       3       5       6      23       0       0 
     20      11       9       3       6       5      24       0       0 
     20      11       9       3       7       4      25       0       0 
     20      11       9       3       8      11      18       0       0 
     20      11       9       3       9      10      19       0       0 
     20      11       9       3      10       9      20       0       0 
     20      11       9       3      11       8      21       0       0 
     20      11       9       3      12      15      15       0       0 
     20      11       9       3      13      14      16       0       0 
     20      11       9       3      14      13      17       0       0 
     20      11      10       3       0       3       8       0       0 
     20      11      10       3       1       2       9       0       0 
     20      11      10       3       2       1      10       0       0 
     20      11      10       3       3       0      11       0       0 
     20      11      10       3       4       7       4       0       0 
     20      11      10       3       5       6       5       0       0 
     20      11      10       3       6       5       6       0       0 
     20      11      10       3       7       4       7       0       0 
     20      11      10       3       8      11       0       0       0 
     20      11      10       3       9      10       1       0       0 
     20      11      10       3      10       9       2       0       0 
     20      11      10       3      11       8       3       0       0 
     20      11      10       3      12      15      12       0       0 
     20      11      10       3      13      14      13       0       0 
     20      11      10       3      14      13      14       0       0 
bb.gem.m1.chanmap = 
     20      11      16     103       0       3      29       1       1 
     20      11      16     103       1       2      28       1       1 
     20      11      16     103       2       1      27       1       1 
     20      11      16     103       3       0      26       1       1 
     20      11      16     103       4       7      25       1       1 
     20      11      16     103       5       6      24       1       1 
     20      11      16     103       6       5      23       1       1 
     20      11      16     103       7       4      22       1       1 
     20      11      16     103       8      11      21       1       1 
     20      11      16     103       9      10      20       1       1 
     20      11      16     103      10       9      19       1       1 
     20      11      16     103      11       8      18       1       1 
     20      11      16     103      12      14      17       1       1 
     20      11      16     103      13      13      16       1       1 
     20      11      16     103      14      12      15       1       1 
     20      11      17     103       0       3      11       1       1 
     20      11      17     103       1       2      10       1       1 
     20      11      17     103       2       1       9       1       1 
     20      11      17     103       3       0       8       1       1 
     20      11      17     103       4       7       7       1       1 
     20      11      17     103       5       6       6       1       1 
     20      11      17     103       6       5       5       1       1 
     20      11      17     103       7       4       4       1       1 
     20      11      17     103       8      11       3       1       1 
     20      11      17     103       9      10       2       1       1 
     20      11      17     103      10       9       1       1       1 
     20      11      17     103      11       8       0       1       1 
     20      11      17     103      12      14      14       1       1 
     20      11      17     103      13      13      13       1       1 
     20      11      17     103      14      12      12       1       1 
     20      11      18     103       0       3      26       0       0 
     20      11      18     103       1       2      27       0       0 
     20      11      18     103       2       1      28       0       0 
     20      11      18     103       3       0      29       0       0 
     20      11      18     103       4       7      22       0       0 
     20      11      18     103       5       6      23       0       0 
     20      11      18     103       6       5      24       0       0 
     20      11      18     103       7       4      25       0       0 
     20      11      18     103       8      11      18       0       0 
     20      11      18     103       9      10      19       0       0 
     20      11      18     103      10       9      20       0       0 
     20      11      18     103      11       8      21       0       0 
     20      11      18     103      12      14      15       0       0 
     20      11      18     103      13      13      16       0       0 
     20      11      18     103      14      12      17       0       0 
     20      11      19     103       0       3       8       0       0 
     20      11      19     103       1       2       9       0       0 
     20      11      19     103       2       1      10       0       0 
     20      11      19     103       3       0      11       0       0 
     20      11      19     103       4       7       4       0       0 
     20      11      19     103       5       6       5       0       0 
     20      11      19     103       6       5       6       0       0 
     20      11      19     103       7       4       7       0       0 
     20      11      19     103       8      11       0       0       0 
     20      11      19     103       9      10       1       0       0 
     20      11      19     103      10       9       2       0       0 
     20      11      19     103      11       8       3       0       0 
     20      11      19     103      12      14      12       0       0 
     20      11      19     103      13      13      13       0       0 
     20      11      19     103      14      12      14       0       0 
bb.gem.m2.chanmap = 
     20      11      11     104       0       3      29       1       1 
     20      11      11     104       1       2      28       1       1 
     20      11      11     104       2       1      27       1       1 
     20      11      11     104       3       0      26       1       1 
     20      11      11     104       4       7      25       1       1 
     20      11      11     104       5       6      24       1       1 
     20      11      11     104       6       5      23       1       1 
     20      11      11     104       7       4      22       1       1 
     20      11      11     104       8      11      21       1       1 
     20      11      11     104       9      10      20       1       1 
     20      11      11     104      10       9      19       1       1 
     20      11      11     104      11       8      18       1       1 
     20      11      11     104      12      14      17       1       1 
     20      11      11     104      13      13      16       1       1 
     20      11      11     104      14      12      15       1       1 
     20      11      12     104       0       3      11       1       1 
     20      11      12     104       1       2      10       1       1 
     20      11      12     104       2       1       9       1       1 
     20      11      12     104       3       0       8       1       1 
     20      11      12     104       4       7       7       1       1 
     20      11      12     104       5       6       6       1       1 
     20      11      12     104       6       5       5       1       1 
     20      11      12     104       7       4       4       1       1 
     20      11      12     104       8      11       3       1       1 
     20      11      12     104       9      10       2       1       1 
     20      11      12     104      10       9       1       1       1 
     20      11      12     104      11       8       0       1       1 
     20      11      12     104      12      14      14       1       1 
     20      11      12     104      13      13      13       1       1 
     20      11      12     104      14      12      12       1       1 
     20      11      13     104       0       3      26       0       0 
     20      11      13     104       1       2      27       0       0 
     20      11      13     104       2       1      28       0       0 
     20      11      13     104       3       0      29       0       0 
     20      11      13     104       4       7      22       0       0 
     20      11      13     104       5       6      23       0       0 
     20      11      13     104       6       5      24       0       0 
     20      11      13     104       7       4      25       0       0 
     20      11      13     104       8      11      18       0       0 
     20      11      13     104       9      10      19       0       0 
     20      11      13     104      10       9      20       0       0 
     20      11      13     104      11       8      21       0       0 
     20      11      13     104      12      14      15       0       0 
     20      11      13     104      13      13      16       0       0 
     20      11      13     104      14      12      17       0       0 
     20      11      14     104       0       3       8       0       0 
     20      11      14     104       1       2       9       0       0 
     20      11      14     104       2       1      10       0       0 
     20      11      14     104       3       0      11       0       0 
     20      11      14     104       4       7       4       0       0 
     20      11      14     104       5       6       5       0       0 
     20      11      14     104       6       5       6       0       0 
     20      11      14     104       7       4       7       0       0 
     20      11      14     104       8      11       0       0       0 
     20      11      14     104       9      10       1       0       0 
     20      11      14     104      10       9       2       0       0 
     20      11      14     104      11       8       3       0       0 
     20      11      14     104      12      14      12       0       0 
     20      11      14     104      13      13      13       0       0 
     20      11      14     104      14      12      14       0       0 
bb.gem.m3.chanmap = 
     20      11      20     102       0       3      29       1       1 
     20      11      20     102       1       2      28       1       1 
     20      11      20     102       2       1      27       1       1 
     20      11      20     102       3       0      26       1       1 
     20      11      20     102       4       7      25       1       1 
     20      11      20     102       5       6      24       1       1 
     20      11      20     102       6       5      23       1       1 
     20      11      20     102       7       4      22       1       1 
     20      11      20     102       8      11      21       1       1 
     20      11      20     102       9      10      20       1       1 
     20      11      20     102      10       9      19       1       1 
     20      11      20     102      11       8      18       1       1 
     20      11      20     102      12      14      17       1       1 
     20      11      20     102      13      13      16       1       1 
     20      11      20     102      14      12      15       1       1 
     20      11      21     102       0       3      11       1       1 
     20      11      21     102       1       2      10       1       1 
     20      11      21     102       2       1       9       1       1 
     20      11      21     102       3       0       8       1       1 
     20      11      21     102       4       7       7       1       1 
     20      11      21     102       5       6       6       1       1 
     20      11      21     102       6       5       5       1       1 
     20      11      21     102       7       4       4       1       1 
     20      11      21     102       8      11       3       1       1 
     20      11      21     102       9      10       2       1       1 
     20      11      21     102      10       9       1       1       1 
     20      11      21     102      11       8       0       1       1 
     20      11      21     102      12      14      14       1       1 
     20      11      21     102      13      13      13       1       1 
     20      11      21     102      14      12      12       1       1 
     20      11      22     102       0       3      26       0       0 
     20      11      22     102       1       2      27       0       0 
     20      11      22     102       2       1      28       0       0 
     20      11      22     102       3       0      29       0       0 
     20      11      22     102       4       7      22       0       0 
     20      11      22     102       5       6      23       0       0 
     20      11      22     102       6       5      24       0       0 
     20      11      22     102       7       4      25       0       0 
     20      11      22     102       8      11      18       0       0 
     20      11      22     102       9      10      19       0       0 
     20      11      22     102      10       9      20       0       0 
     20      11      22     102      11       8      21       0       0 
     20      11      22     102      12      14      15       0       0 
     20      11      22     102      13      13      16       0       0 
     20      11      22     102      14      12      17       0       0 
     20      11      23     102       0       3       8       0       0 
     20      11      23     102       1       2       9       0       0 
     20      11      23     102       2       1      10       0       0 
     20      11      23     102       3       0      11       0       0 
     20      11      23     102       4       7       4       0       0 
     20      11      23     102       5       6       5       0       0 
     20      11      23     102       6       5       6       0       0 
     20      11      23     102       7       4       7       0       0 
     20      11      23     102       8      11       0       0       0 
     20      11      23     102       9      10       1       0       0 
     20      11      23     102      10       9       2       0       0 
     20      11      23     102      11       8       3       0       0 
     20      11      23     102      12      14      12       0       0 
     20      11      23     102      13      13      13       0       0 
     20      11      23     102      14      12      14       0       0 
bb.gem.m4.chanmap = 
     20      11       0      13       0      15       0       1       1 
     20      11       0      13       1      14       1       1       1 
     20      11       0      13       2      13       2       1       1 
     20      11       0      13       3      12       3       1       1 
     20      11       0      13       4      11       4       1       1 
     20      11       0      13       5      10       5       1       1 
     20      11       0      13       6       9       6       1       1 
     20      11       0      13       7       8       7       1       1 
     20      11       0      13       8       7       8       1       1 
     20      11       0      13       9       6       9       1       1 
     20      11       0      13      10       5      10       1       1 
     20      11       0      13      11       4      11       1       1 
     20      11       4      13      10       4       9       1       0 
     20      11       4      13      11       3       8       1       0 
     20      11       4      13      12       2       7       1       0 
     20      11       4      13      13       1       6       1       0 
     20      11       4      13      14       0       5       1       0 
     20      11       5      13       0       4       0       0       0 
     20      11       5      13       1       3       1       0       0 
     20      11       5      13       2       2       2       0       0 
     20      11       5      13       3       1       3       0       0 
     20      11       5      13       4       0       4       0       0 
bb.gem.m5.chanmap = 
     20      11       1      20       0      15       0       1       1 
     20      11       1      20       1      14       1       1       1 
     20      11       1      20       2      13       2       1       1 
     20      11       1      20       3      12       3       1       1 
     20      11       1      20       4      11       4       1       1 
     20      11       1      20       5      10       5       1       1 
     20      11       1      20       6       9       6       1       1 
     20      11       1      20       7       8       7       1       1 
     20      11       1      20       8       7       8       1       1 
     20      11       1      20       9       6       9       1       1 
     20      11       1      20      10       5      10       1       1 
     20      11       1      20      11       4      11       1       1 
     20      11       4      20       5      12       9       1       0 
     20      11       4      20       6      11       8       1       0 
     20      11       4      20       7      10       7       1       0 
     20      11       4      20       8       9       6       1       0 
     20      11       4      20       9       8       5       1       0 
     20      11       5      20       5      12       0       0       0 
     20      11       5      20       6      11       1       0       0 
     20      11       5      20       7      10       2       0       0 
     20      11       5      20       8       9       3       0       0 
     20      11       5      20       9       8       4       0       0 
bb.gem.m6.chanmap = 
     20      11       2      17       0      15      11       0       1 
     20      11       2      17       1      14      10       0       1 
     20      11       2      17       2      13       9       0       1 
     20      11       2      17       3      12       8       0       1 
     20      11       2      17       4      11       7       0       1 
     20      11       2      17       5      10       6       0       1 
     20      11       2      17       6       9       5       0       1 
     20      11       2      17       7       8       4       0       1 
     20      11       2      17       8       7       3       0       1 
     20      11       2      17       9       6       2       0       1 
     20      11       2      17      10       5       1       0       1 
     20      11       2      17      11       4       0       0       1 
     20      11       4      17       0      20       9       1       0 
     20      11       4      17       1      19       8       1       0 
     20      11       4      17       2      18       7       1       0 
     20      11       4      17       3      17       6       1       0 
     20      11       4      17       4      16       5       1       0 
     20      11       5      17      10      20       0       0       0 
     20      11       5      17      11      19       1       0       0 
     20      11       5      17      12      18       2       0       0 
     20      11       5      17      13      17       3       0       0 
     20      11       5      17      14      16       4       0       0 
bb.gem.m7.chanmap = 
     20      11       3      25       0      15      11       0       1 
     20      11       3      25       1      14      10       0       1 
     20      11       3      25       2      13       9       0       1 
     20      11       3      25       3      12       8       0       1 
     20      11       3      25       4      11       7       0       1 
     20      11       3      25       5      10       6       0       1 
     20      11       3      25       6       9       5       0       1 
     20      11       3      25       7       8       4       0       1 
     20      11       3      25       8       7       3       0       1 
     20      11       3      25       9       6       2       0       1 
     20      11       3      25      10       5       1       0       1 
     20      11       3      25      11       4       0       0       1 
     20      11       6      25       0       4       9       1       0 
     20      11       6      25       1       3       8       1       0 
     20      11       6      25       2       2       7       1       0 
     20      11       6      25       3       1       6       1       0 
     20      11       6      25       4       0       5       1       0 
     20      11       6      25       8      12       0       0       0 
     20      11       6      25       9      11       1       0       0 
     20      11       6      25      10      10       2       0       0 
     20      11       6      25      11       9       3       0       0 
     20      11       6      25      12       8       4       0       0 


-------------[ 2023-01-20 17:00:00 ] # Accidentally swapped cables in the hall
bb.gem.m2.chanmap = 
     20      11      11     104       0       3      29       1       1 
     20      11      11     104       1       2      28       1       1 
     20      11      11     104       2       1      27       1       1 
     20      11      11     104       3       0      26       1       1 
     20      11      11     104       4       7      25       1       1 
     20      11      11     104       5       6      24       1       1 
     20      11      11     104       6       5      23       1       1 
     20      11      11     104       7       4      22       1       1 
     20      11      11     104       8      11      21       1       1 
     20      11      11     104       9      10      20       1       1 
     20      11      11     104      10       9      19       1       1 
     20      11      11     104      11       8      18       1       1 
     20      11      11     104      12      15      14       1       1 
     20      11      11     104      13      12      13       1       1 
     20      11      11     104      14      13      12       1       1 
     20      11      12     104       0       3      11       1       1 
     20      11      12     104       1       2      10       1       1 
     20      11      12     104       2       1       9       1       1 
     20      11      12     104       3       0       8       1       1 
     20      11      12     104       4       7       7       1       1 
     20      11      12     104       5       6       6       1       1 
     20      11      12     104       6       5       5       1       1 
     20      11      12     104       7       4       4       1       1 
     20      11      12     104       8      11       3       1       1 
     20      11      12     104       9      10       2       1       1 
     20      11      12     104      10       9       1       1       1 
     20      11      12     104      11       8       0       1       1 
     20      11      12     104      12      15      17       1       1 
     20      11      12     104      13      14      16       1       1 
     20      11      12     104      14      13      15       1       1 
     20      11      13     104       0       3      26       0       0 
     20      11      13     104       1       2      27       0       0 
     20      11      13     104       2       1      28       0       0 
     20      11      13     104       3       0      29       0       0 
     20      11      13     104       4       7      22       0       0 
     20      11      13     104       5       6      23       0       0 
     20      11      13     104       6       5      24       0       0 
     20      11      13     104       7       4      25       0       0 
     20      11      13     104       8      11      18       0       0 
     20      11      13     104       9      10      19       0       0 
     20      11      13     104      10       9      20       0       0 
     20      11      13     104      11       8      21       0       0 
     20      11      13     104      12      14      15       0       0 
     20      11      13     104      13      13      16       0       0 
     20      11      13     104      14      12      17       0       0 
     20      11      14     104       0       3       8       0       0 
     20      11      14     104       1       2       9       0       0 
     20      11      14     104       2       1      10       0       0 
     20      11      14     104       3       0      11       0       0 
     20      11      14     104       4       7       4       0       0 
     20      11      14     104       5       6       5       0       0 
     20      11      14     104       6       5       6       0       0 
     20      11      14     104       7       4       7       0       0 
     20      11      14     104       8      11       0       0       0 
     20      11      14     104       9      10       1       0       0 
     20      11      14     104      10       9       2       0       0 
     20      11      14     104      11       8       3       0       0 
     20      11      14     104      12      14      12       0       0 
     20      11      14     104      13      13      13       0       0 
     20      11      14     104      14      12      14       0       0 

-------------[ 2023-01-24 11:40:00 ] # Swapped cables back to correct position
bb.gem.m2.chanmap = 
     20      11      11     104       0       3      29       1       1 
     20      11      11     104       1       2      28       1       1 
     20      11      11     104       2       1      27       1       1 
     20      11      11     104       3       0      26       1       1 
     20      11      11     104       4       7      25       1       1 
     20      11      11     104       5       6      24       1       1 
     20      11      11     104       6       5      23       1       1 
     20      11      11     104       7       4      22       1       1 
     20      11      11     104       8      11      21       1       1 
     20      11      11     104       9      10      20       1       1 
     20      11      11     104      10       9      19       1       1 
     20      11      11     104      11       8      18       1       1 
     20      11      11     104      12      14      17       1       1 
     20      11      11     104      13      13      16       1       1 
     20      11      11     104      14      12      15       1       1 
     20      11      12     104       0       3      11       1       1 
     20      11      12     104       1       2      10       1       1 
     20      11      12     104       2       1       9       1       1 
     20      11      12     104       3       0       8       1       1 
     20      11      12     104       4       7       7       1       1 
     20      11      12     104       5       6       6       1       1 
     20      11      12     104       6       5       5       1       1 
     20      11      12     104       7       4       4       1       1 
     20      11      12     104       8      11       3       1       1 
     20      11      12     104       9      10       2       1       1 
     20      11      12     104      10       9       1       1       1 
     20      11      12     104      11       8       0       1       1 
     20      11      12     104      12      14      14       1       1 
     20      11      12     104      13      13      13       1       1 
     20      11      12     104      14      12      12       1       1 
     20      11      13     104       0       3      26       0       0 
     20      11      13     104       1       2      27       0       0 
     20      11      13     104       2       1      28       0       0 
     20      11      13     104       3       0      29       0       0 
     20      11      13     104       4       7      22       0       0 
     20      11      13     104       5       6      23       0       0 
     20      11      13     104       6       5      24       0       0 
     20      11      13     104       7       4      25       0       0 
     20      11      13     104       8      11      18       0       0 
     20      11      13     104       9      10      19       0       0 
     20      11      13     104      10       9      20       0       0 
     20      11      13     104      11       8      21       0       0 
     20      11      13     104      12      14      15       0       0 
     20      11      13     104      13      13      16       0       0 
     20      11      13     104      14      12      17       0       0 
     20      11      14     104       0       3       8       0       0 
     20      11      14     104       1       2       9       0       0 
     20      11      14     104       2       1      10       0       0 
     20      11      14     104       3       0      11       0       0 
     20      11      14     104       4       7       4       0       0 
     20      11      14     104       5       6       5       0       0 
     20      11      14     104       6       5       6       0       0 
     20      11      14     104       7       4       7       0       0 
     20      11      14     104       8      11       0       0       0 
     20      11      14     104       9      10       1       0       0 
     20      11      14     104      10       9       2       0       0 
     20      11      14     104      11       8       3       0       0 
     20      11      14     104      12      14      12       0       0 
     20      11      14     104      13      13      13       0       0 
     20      11      14     104      14      12      14       0       0 




################ NOW LET'S START TIME-DEPENDENT ENTRIES for the parameters that ARE expected to change frequently: #################################

-------------[ 2022-07-01 00:00:00 ] # tracking and clustering parameters:

############ parameters searched by SBSGEMModule::ReadDatabase() #################
############ offline thresholds and angle constraints: ############

# start with lower nominal thresholds applied to all GEMs for HV plateau/efficiency scans:
bb.gem.threshold_sample = 100.0
bb.gem.threshold_stripsum = 300.0
bb.gem.threshold_clustersum = 600.0

bb.gem.ADCasym_cut = 0.75 
bb.gem.deltat_cut = 30.0
bb.gem.corrcoeff_cut = 0.5
bb.gem.filterflag1D = 1 # -1 = no filtering: don't require 1D hits to pass any cuts other than basic zero suppression, 0 = "soft" filtering
bb.gem.filterflag2D = -1  # 1 = "hard" filtering: require 2D hits to pass all cuts. 0 = "soft" filtering

bb.gem.peakprominence_minsigma = 2.5 
bb.gem.peakprominence_minfraction = 0.1

# limit cluster size growth to +/- 4 strips for cluster charge calculation
bb.gem.maxnu_charge = 4
bb.gem.maxnv_charge = 4 

# limit cluster size to +/-2 strips from maximum for cluster position calculation
bb.gem.maxnu_pos = 2
bb.gem.maxnv_pos = 2

bb.gem.sigmahitshape = 0.0004
bb.gem.zerosuppress = 1
bb.gem.zerosuppress_nsigma = 5.0
bb.gem.onlinezerosuppress = 0 # note that this parameter only provides a default value, actual behavior is determined by the flags seen in the raw data:

bb.gem.do_neg_signal_study = 0

bb.gem.plot_common_mode = 1
bb.gem.plot_event_info = 1
# default values will suffice for the time being.
#bb.gem.chan_cm_flags = 512

# when zero suppression is enabled again we will turn this to 1: 
bb.gem.pedsub_online = 1 # under normal conditions, this should always be 1, unless running normal data taking in pedestal mode:
bb.gem.max2Dhits = 10000 # per-module

bb.gem.usestriptimingcut = 0
bb.gem.useTSchi2cut = 0

bb.gem.addstrip_tcut = 80.0
bb.gem.addstrip_ccor_cut = -1.1
bb.gem.suppressfirstlast = -1

############### Parameters searched by SBSGEMSpectrometerTracker::ReadDatabase() ######################

# parameters controlling tracking:
bb.gem.minhitsontrack = 3

bb.gem.maxhitcombos = 5000
bb.gem.maxhitcombos_inner = 25000
bb.gem.maxhitcombos_total = 1000000000000000

bb.gem.tryfasttrack = 1

# typical values after alignment:

bb.gem.gridbinwidthx = 0.01
bb.gem.gridbinwidthy = 0.01
bb.gem.gridedgetolerancex = 0.0025
bb.gem.gridedgetolerancey = 0.0025

bb.gem.trackchi2cut = 50.0

# below are wider values to use if we don't have a good initial alignment:
#bb.gem.gridbinwidthx = 0.05
#bb.gem.gridbinwidthy = 0.05
#bb.gem.gridedgetolerancex = 0.02
#bb.gem.gridedgetolerancey = 0.02
#bb.gem.trackchi2cut = 300.0

# For initial alignment with cosmics, we want to start with no constraints on track-finding:
bb.gem.useconstraint = 0
bb.gem.useslopeconstraint = 0
bb.gem.useopticsconstraint = 0
bb.gem.useforwardopticsconstraint = 0

bb.gem.sigmahitpos = 0.0001
bb.gem.do_efficiencies = 1
bb.gem.dump_geometry_info = 0

bb.gem.efficiency_bin_width_1D = 0.02
bb.gem.efficiency_bin_width_2D = 0.04

# these should probably be tighter later on:
bb.gem.xptar_min = -0.35
bb.gem.xptar_max = 0.35

bb.gem.yptar_min = -0.16
bb.gem.yptar_max = 0.16

# be careful with these, they are angle-dependent:
bb.gem.ytar_min = -0.45
bb.gem.ytar_max = 0.45

# In all of the SBS-GEN experiment, the maximum electron momentum should be around 4-4.5 GeV:
# the values below are applicable to GEN-2 kinematics:
bb.gem.pmin = 0.6
bb.gem.pmax = 3.5

bb.gem.xpfp_min = -0.3
bb.gem.xpfp_max = 0.3
bb.gem.ypfp_min = -0.16
bb.gem.ypfp_max = 0.16


bb.gem.pedsub_online = 1  #special run where full readout was done
bb.gem.suppressfirstlast = 0
bb.gem.useconstraint = 1
bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0

#################### BEGIN TIME-DEPENDENT ALIGNMENT PARAMETERS ##############################

# Default BB GEM alignment at the start of GEN:

--------[ 2022-07-01 14:30:00 ] # New alignment with cosmic data 
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.001911928     -0.01125671        0.165075
bb.gem.m1.angle =      -0.1045636      0.03398512      0.05979535
bb.gem.m2.position =    -0.007453875     0.006105974       0.2792567
bb.gem.m2.angle =     -0.01946687           0.032      -0.2967879
bb.gem.m3.position =    -0.008993083     0.004983439       0.4568277
bb.gem.m3.angle =     -0.03679291      0.05628952      -0.4555769
bb.gem.m4.position =      -0.7643594     0.001922466        1.575923
bb.gem.m4.angle =     -0.06423467      -0.1929917      -0.3477203
bb.gem.m5.position =      -0.2522177    -0.002406637        1.534186
bb.gem.m5.angle =      -0.1933844      -0.0859325      -0.3064016
bb.gem.m6.position =       0.2586571    -0.008294649         1.57827
bb.gem.m6.angle =     -0.01082531      -0.1947286      -0.2585426
bb.gem.m7.position =       0.7710201     -0.01163987        1.536401
bb.gem.m7.angle =      -0.2508493      -0.1232231      -0.2878157

--------[ 2022-09-22 16:00:00 ] # New cosmic alighment before GEn starts
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.001866869     -0.01142967       0.1650005
bb.gem.m1.angle =      -0.1065888      0.03268089      0.06006474
bb.gem.m2.position =    -0.007406738     0.005938152       0.2792381
bb.gem.m2.angle =     -0.01993594      0.03360998      -0.2996637
bb.gem.m3.position =    -0.008898218     0.004865077       0.4568941
bb.gem.m3.angle =     -0.02932631      0.05863983      -0.4565881
bb.gem.m4.position =      -0.7643013     0.002078737        1.575779
bb.gem.m4.angle =     -0.07949925      -0.1503181      -0.3496833
bb.gem.m5.position =      -0.2522381      -0.0022978        1.534052
bb.gem.m5.angle =      -0.2054036      -0.0428951      -0.3128763
bb.gem.m6.position =       0.2586138    -0.008327183        1.578055
bb.gem.m6.angle =     -0.01938281      -0.2853453      -0.2736628
bb.gem.m7.position =       0.7709555     -0.01183456        1.536362
bb.gem.m7.angle =      -0.2720498      -0.0815385      -0.2664114


--------[ 2022-10-09 16:00:00 ] # First beam with GEn
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.001813287     -0.01148825       0.1649284
bb.gem.m1.angle =     -0.01337377      0.03778753      0.05843874
bb.gem.m2.position =    -0.007336263     0.006543051       0.2789751
bb.gem.m2.angle =      0.05703568      0.02887926       -0.300589
bb.gem.m3.position =    -0.008889876     0.004795453       0.4570474
bb.gem.m3.angle =      0.08164018      0.06866334       -0.458511
bb.gem.m4.position =      -0.7641923     0.001900159        1.575263
bb.gem.m4.angle =     -0.09707593      -0.1777915      -0.3084363
bb.gem.m5.position =      -0.2523488    -0.002388624        1.534548
bb.gem.m5.angle =       -0.142905    -0.008593625      -0.3037286
bb.gem.m6.position =       0.2586028    -0.008230969        1.577708
bb.gem.m6.angle =      -0.0146093      0.02256499      -0.2596993
bb.gem.m7.position =       0.7705939     -0.01191207        1.535826
bb.gem.m7.angle =      -0.1138798       0.2948534      -0.3205358


--------[ 2022-10-14 12:00:00 ] # New alignment for GEN-2 kinematic
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.001871172     -0.01123758       0.1648883
bb.gem.m1.angle =     -0.02751445      0.05961589      0.05669622
bb.gem.m2.position =    -0.007444413     0.006055783       0.2788449
bb.gem.m2.angle =       0.0136676      0.08176941      -0.3022625
bb.gem.m3.position =    -0.009023344     0.005194937       0.4572169
bb.gem.m3.angle =     0.005799047       0.1098537       -0.470227
bb.gem.m4.position =      -0.7640715     0.001810726        1.575345
bb.gem.m4.angle =      0.02191327      -0.2947144      -0.3091873
bb.gem.m5.position =      -0.2523318    -0.002419563        1.534806
bb.gem.m5.angle =    -0.007689561     -0.03660694      -0.2863788
bb.gem.m6.position =       0.2586709    -0.008268992         1.57823
bb.gem.m6.angle =       0.2061367       0.1375006      -0.2596586
bb.gem.m7.position =       0.7703097     -0.01188029        1.534868
bb.gem.m7.angle =     -0.04195899      0.03440736      -0.3519004

----------[ 2022-11-07 00:00:00 ] # start GEN-3 kinematics:
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.001931935     -0.01142927        0.165205
bb.gem.m1.angle =      0.07756231      0.04990183      0.06161188
bb.gem.m2.position =    -0.007540193     0.005879457       0.2790333
bb.gem.m2.angle =       0.1309815      0.07427616      -0.2973769
bb.gem.m3.position =    -0.009137839     0.004917223       0.4575194
bb.gem.m3.angle =       0.2160082       0.1029109      -0.4551869
bb.gem.m4.position =      -0.7647015       0.0020337        1.578944
bb.gem.m4.angle =      -0.2102473      -0.2975331      -0.3461524
bb.gem.m5.position =      -0.2523657    -0.002284228        1.535895
bb.gem.m5.angle =      -0.2292616     -0.04278965      -0.2910578
bb.gem.m6.position =       0.2586995    -0.008135348        1.578437
bb.gem.m6.angle =      -0.1861139       -0.183984       -0.250579
bb.gem.m7.position =       0.7706357     -0.01182199        1.537177
bb.gem.m7.angle =       -0.204406      -0.0703861      -0.2781818

----------[ 2022-12-07 12:00:00 ] # new alignment after touching the GEMs during a Hall access
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.001942098     -0.01162443       0.1654284
bb.gem.m1.angle =      0.02871134      0.02051214      0.06434025
bb.gem.m2.position =    -0.007499142       0.0131656       0.2795543
bb.gem.m2.angle =     -0.02005052      0.06742029      -0.2867994
bb.gem.m3.position =    -0.009158106     0.004519467       0.4579391
bb.gem.m3.angle =     0.007673261      0.05115498      -0.4546568
bb.gem.m4.position =      -0.7650413    0.0007818384        1.581796
bb.gem.m4.angle =      0.05602827      -0.6792865       -0.242088
bb.gem.m5.position =      -0.2524898     -0.00324836        1.539672
bb.gem.m5.angle =      -0.4121826      -0.1530618      -0.3019665
bb.gem.m6.position =       0.2587498    -0.008983733        1.583229
bb.gem.m6.angle =      -0.2319786       0.4621164      -0.2246378
bb.gem.m7.position =       0.7705579     -0.01305438        1.539855
bb.gem.m7.angle =       0.2554365      -0.1279409      -0.3786771

----------[ 2023-01-10 10:00:00 ] # new alignment after touching the GEMs during the holiday down
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =     -0.00184606     -0.01143894       0.1653674
bb.gem.m1.angle =     -0.07285246      0.03962608      0.05703557
bb.gem.m2.position =    -0.007434567      0.00555417       0.2798466
bb.gem.m2.angle =       0.0254144      0.03674314      -0.2965475
bb.gem.m3.position =    -0.008951187     0.004925419       0.4578114
bb.gem.m3.angle =    -0.009090053      0.05445132      -0.4616836
bb.gem.m4.position =      -0.7641395     0.001942147        1.578375
bb.gem.m4.angle =     -0.08040725      -0.0936849      -0.3432477
bb.gem.m5.position =       -0.252246    -0.002339841        1.537042
bb.gem.m5.angle =      -0.2000638      -0.1888704      -0.3005471
bb.gem.m6.position =       0.2585592    -0.008400348        1.582092
bb.gem.m6.angle =       -0.127859      -0.3902225      -0.2584247
bb.gem.m7.position =       0.7710214     -0.01180104        1.540152
bb.gem.m7.angle =      -0.3304977     -0.03424916      -0.1888506

----------[ 2023-01-14 0:00:00 ] # new alignment at start of GEN4
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.001950848      -0.0114178       0.1655041
bb.gem.m1.angle =     0.006446229      0.03651432      0.06191123
bb.gem.m2.position =    -0.007569976     0.005545726       0.2793794
bb.gem.m2.angle =      0.07257305      0.07592777      -0.2929139
bb.gem.m3.position =    -0.009167707      0.00492333       0.4581418
bb.gem.m3.angle =      0.06534614       0.0689524      -0.4572213
bb.gem.m4.position =      -0.7643129     0.001947163        1.579726
bb.gem.m4.angle =      -0.1387062      -0.3369337      -0.3431891
bb.gem.m5.position =       -0.252208     -0.00232776        1.537723
bb.gem.m5.angle =       -0.216146      -0.1124094      -0.2985454
bb.gem.m6.position =       0.2587348    -0.008408943        1.582731
bb.gem.m6.angle =     -0.01742469      -0.4930655      -0.2613264
bb.gem.m7.position =       0.7709444     -0.01180315        1.539787
bb.gem.m7.angle =      -0.1205777       0.1025934      -0.2430478

----------[ 2023-01-19 0:00:00 ] # new alignment after working on layer 2
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.002009465     -0.01152474        0.165502
bb.gem.m1.angle =         0.10034      0.06426284      0.06431978
bb.gem.m2.position =    -0.007622829      0.01037656       0.2799937
bb.gem.m2.angle =       0.1230617       0.1401286      -0.2882853
bb.gem.m3.position =    -0.009328054     0.004735566        0.458129
bb.gem.m3.angle =       0.2000924       0.1699275      -0.4540828
bb.gem.m4.position =      -0.7644491     0.001194524        1.580883
bb.gem.m4.angle =       0.1253841      -0.2660935      -0.3331742
bb.gem.m5.position =       -0.252314    -0.003004339        1.538961
bb.gem.m5.angle =      -0.2526103      -0.1252705      -0.2865513
bb.gem.m6.position =        0.258783    -0.008876612        1.582863
bb.gem.m6.angle =       0.1386627     -0.01606802      -0.2431762
bb.gem.m7.position =       0.7708582     -0.01228868        1.539965
bb.gem.m7.angle =      -0.0331425      0.01782532      -0.2829342

----------[ 2023-01-21 0:00:00 ] # new alignment after working on layer 2
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.001968042     -0.01141095       0.1655572
bb.gem.m1.angle =       0.1609229       0.0613313      0.06244496
bb.gem.m2.position =    -0.007660612     0.005242231       0.2794017
bb.gem.m2.angle =       0.1815154       0.1170145      -0.3007364
bb.gem.m3.position =    -0.009221108     0.004939755       0.4583642
bb.gem.m3.angle =       0.2155462       0.1380199      -0.4547139
bb.gem.m4.position =      -0.7643617     0.001961909        1.580386
bb.gem.m4.angle =       -0.012356      -0.3227884      -0.3183691
bb.gem.m5.position =      -0.2522596    -0.002314401        1.538475
bb.gem.m5.angle =      -0.2356392      -0.1664667       -0.298067
bb.gem.m6.position =       0.2588094    -0.008336306        1.583603
bb.gem.m6.angle =       0.3031136      -0.3801317      -0.2626414
bb.gem.m7.position =       0.7707365     -0.01177448        1.538892
bb.gem.m7.angle =      -0.2068661     -0.01667648      -0.2752892

----------[ 2023-08-20 12:22:00 ] # new alignment after working on layer 0
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =     -0.00193858     -0.01134524         0.16499
bb.gem.m1.angle =      -0.0583935       0.0323442      0.05917932
bb.gem.m2.position =    -0.007502203     0.006310194       0.2791444
bb.gem.m2.angle =    -0.006298305      0.05156421      -0.3054064
bb.gem.m3.position =    -0.009019618     0.004907236       0.4570785
bb.gem.m3.angle =    -0.003106797      0.08509621      -0.4607618
bb.gem.m4.position =       -0.764261     0.001985193        1.575809
bb.gem.m4.angle =     -0.08000751       -0.112856      -0.3557897
bb.gem.m5.position =      -0.2524175    -0.002413908         1.53405
bb.gem.m5.angle =      -0.1797689      0.05900472       -0.316855
bb.gem.m6.position =       0.2583341    -0.008525684        1.577969
bb.gem.m6.angle =     -0.02023956      -0.3355465      -0.2649168
bb.gem.m7.position =       0.7708554      -0.0119063        1.535161
bb.gem.m7.angle =      -0.1956102      0.02594648      -0.3035511

----------[ 2023-09-13 00:00:00 ] # approximate start of fall 2023 running:
bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.002060446     -0.01134932       0.1649865
bb.gem.m1.angle =       0.1537661         0.07854      0.05764346
bb.gem.m2.position =    -0.007707609     0.006252719       0.2789296
bb.gem.m2.angle =       0.1384817       0.1345991      -0.3063009
bb.gem.m3.position =    -0.009311901     0.004908867       0.4575496
bb.gem.m3.angle =       0.1611543       0.1731637      -0.4595488
bb.gem.m4.position =      -0.7646127     0.001913562        1.579897
bb.gem.m4.angle =       0.1275886      -0.1623317      -0.3348091
bb.gem.m5.position =      -0.2524839    -0.002386069        1.537319
bb.gem.m5.angle =      -0.3484715     -0.07720465      -0.3065612
bb.gem.m6.position =       0.2585995     -0.00834048        1.580018
bb.gem.m6.angle =       0.5124344      -0.2019018      -0.2596834
bb.gem.m7.position =        0.770319     -0.01202493        1.534337
bb.gem.m7.angle =       0.1543703      -0.1288245       -0.333122

----------[ 2023-10-05 20:00:00 ] # after working on layer 2

bb.gem.m0.position =               0               0               0
bb.gem.m0.angle =               0               0               0
bb.gem.m1.position =    -0.001944807     -0.01137309       0.1646421
bb.gem.m1.angle =       0.1277139      0.04179052      0.05324231
bb.gem.m2.position =       -0.007505     0.005352609       0.2783303
bb.gem.m2.angle =       0.1461723      0.05426488      -0.3113272
bb.gem.m3.position =    -0.008982012     0.004854915       0.4565449
bb.gem.m3.angle =       0.1901333      0.06292248      -0.4674243
bb.gem.m4.position =      -0.7641676     0.002198854        1.576011
bb.gem.m4.angle =      -0.2970232      0.05928018      -0.4015076
bb.gem.m5.position =      -0.2515506     -0.00283137        1.532427
bb.gem.m5.angle =      -0.7232566      0.07099211      -0.2519372
bb.gem.m6.position =       0.2600601    -0.008812006        1.587475
bb.gem.m6.angle =        2.150863      -0.9955862      -0.2454232
bb.gem.m7.position =       0.7719042     -0.01264669        1.535455
bb.gem.m7.angle =      -0.2715125    -0.006344476       -0.140722

#################### END TIME-DEPENDENT ALIGNMENT PARAMETERS ##############################

#################### BEGIN TIME-DEPENDENT GAIN MATCH PARAMETERS ##############################
# these are cleared out at the beginning of GEN, we will put in later:


########################### END TIME-DEPENDENT GAIN-MATCH PARAMETERS #########################

###################### TIME-DEPENDENT PEDESTAL FILES ###############################
#      NOTE: cleared out older GMN pedestal files from this version of the DB:     #
####################################################################################

--------[ 2022-07-01 14:30:00 ] # new pedestal after replacing multiple APVs and backplanes during the break after GMn
bb.gem.pedfile = gemped/daq_ped_bb_gem_run14035.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run14035.dat

--------[ 2022-08-01 16:10:00 ] # new pedestal after some APVs has shifted
bb.gem.pedfile = gemped/daq_ped_bb_gem_run1039.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run1039.dat

--------[ 2022-08-25 16:35:00 ] # new pedestal after some APVs has shifted
bb.gem.pedfile = gemped/daq_ped_bb_gem_run1224.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run1224.dat

--------[ 2022-10-04 14:00:00 ] # new pedestal after some APVs has shifted
bb.gem.pedfile = gemped/daq_ped_bb_gem_run1653.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run1653.dat

--------[ 2022-10-07 14:00:00 ] # new pedestal after some APVs have been fixed
bb.gem.pedfile = gemped/daq_ped_bb_gem_run1670.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run1670.dat

--------[ 2022-10-12 13:50:00 ] 
bb.gem.pedfile = gemped/daq_ped_bb_gem_run1899.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run1899.dat

--------[ 2022-11-03 10:30:00 ] 
bb.gem.pedfile = gemped/daq_ped_bb_gem_run2360.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run2360.dat

--------[ 2023-01-10 21:30:00 ] 
bb.gem.pedfile = gemped/daq_ped_bb_gem_run3433.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run3433.dat

--------[ 2023-01-18 17:06:00 ] 
bb.gem.pedfile = gemped/daq_ped_bb_gem_run3648.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run3648.dat

--------[ 2023-01-20 17:00:00 ] 
bb.gem.pedfile = gemped/daq_ped_bb_gem_run3691.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run3691.dat

--------[ 2023-01-24 13:22:00 ] 
bb.gem.pedfile = gemped/daq_ped_bb_gem_run3772.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run3772.dat

--------[ 2023-08-21 0:00:00  ]
bb.gem.pedfile = gemped/daq_ped_bb_gem_run4739.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run4739.dat

--------[ 2023-09-01 13:04:00 ]
bb.gem.pedfile = gemped/daq_ped_bb_gem_run4845.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run4845.dat

--------[ 2023-09-20 19:00:00 ] #new pedestal after replacing a backplane
bb.gem.pedfile = gemped/daq_ped_bb_gem_run5228.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run5228.dat

--------[ 2023-10-05 15:35:00 ] #new pedestal after replacing layer2 backplane in BigBite
bb.gem.pedfile = gemped/daq_ped_bb_gem_run5566.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run5566.dat

--------[ 2023-10-05 15:35:00 ] #new pedestal after replacing layer2 backplane in BigBite
bb.gem.pedfile = gemped/daq_ped_bb_gem_run5566.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run5566.dat

--------[ 2023-10-25 20:15:00 ] 
bb.gem.pedfile = gemped/daq_ped_bb_gem_run5963.dat
bb.gem.cmfile = gemped/db_cmr_bb_gem_run5963.dat

######################  END TIME-DEPENDENT PEDESTAL FILES #####################

-------[ 2022-01-01 00:00:00 ]

bb.gem.suppressfirstlast=0

#bb.gem.m5.suppressfirstlast=0

bb.gem.usestriptimingcut = 0
bb.gem.maxstrip_t0 = 85.0 
bb.gem.maxstrip_tcut = 40.0

bb.gem.addstrip_tcut = 80.0
bb.gem.addstrip_ccor_cut = -1.1

bb.gem.m1.suppressfirstlast = 0
bb.gem.m1.maxstrip_tcut = 85.0

-------[ 2022-10-14 20:00:00 ] # start GEN-2 kinematics

bb.gem.use_enhanced_chi2 = 1
bb.gem.minhighqualityhitsontrack = 2

bb.gem.trackchi2cut = 30.0
bb.gem.trackchi2cut_hitquality = 50.0

bb.gem.addstrip_tcut = 35.0
bb.gem.addstrip_ccor_cut = 0.4

bb.gem.suppressfirstlast = 0
bb.gem.m0.suppressfirstlast = 0
bb.gem.m2.suppressfirstlast = 0

bb.gem.filterflag1D = -1 # basically, apply cluster sum thresholds and require at least 2 strips in the cluster
bb.gem.filterflag2D = -1

bb.gem.clustering_flag = 0
bb.gem.deconvolution_flag = 0


bb.gem.threshold_sample_deconv = 60.0
bb.gem.threshold_stripsum_deconv = 90.0
bb.gem.threshold_clustersum_deconv = 120.0

bb.gem.useopticsconstraint = 1
bb.gem.useslopeconstraint = 1
bb.gem.useforwardopticsconstraint = 1


bb.gem.dxfp0 = 0
bb.gem.dyfp0 = 0
bb.gem.dxpfp0 = 0
bb.gem.dypfp0 = 0

bb.gem.dxfpcut = 0.006
bb.gem.dyfpcut = 0.0003
bb.gem.dxpfpcut = 0.008
bb.gem.dypfpcut = 0.0003

bb.gem.ADCasym_cut = 0.5
#bb.gem.deltat_cut = 30.0
bb.gem.corrcoeff_cut = 0.4

#bb.gem.addstrip_tcut = 35.0
bb.gem.addstrip_tcut = 35.0
bb.gem.addstrip_ccor_cut = 0.4

bb.gem.usestriptimingcut = 1

bb.gem.m0.maxstrip_t0 =         88      87.15
bb.gem.m0.maxstrip_tsigma =      5.431      5.578
bb.gem.m0.maxstrip_tcut =        4.5        4.5

bb.gem.m0.maxstrip_t0_deconv =      48.99      46.12
bb.gem.m0.maxstrip_tsigma_deconv =      11.43      11.62
bb.gem.m0.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m0.maxstrip_t0_fit =      19.24      18.26
bb.gem.m0.maxstrip_tsigma_fit =       9.09       9.24
bb.gem.m0.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m0.deltat_sigma =       1.8296
bb.gem.m0.deltat_cut =       18.296
bb.gem.m0.deltat_sigma_deconv =       5.3984
bb.gem.m0.deltat_cut_deconv =       53.984
bb.gem.m0.deltat_sigma_fit =       2.0986
bb.gem.m0.deltat_cut_fit =       20.986

bb.gem.m0.HitTimeMean =       85.996       85.909
bb.gem.m0.HitTimeSigma =       5.1468       5.2628
bb.gem.m0.HitTimeMeanDeconv =       43.026       42.549
bb.gem.m0.HitTimeSigmaDeconv =       10.806       11.025
bb.gem.m0.HitTimeMeanFit =       16.564       16.573
bb.gem.m0.HitTimeSigmaFit =       7.9023       8.3172

bb.gem.m0.ADCasym_sigma =     0.044131
bb.gem.m0.ADCratio_sigma =     0.088475
bb.gem.m0.ADCratio_sigma_deconv =     0.086497

bb.gem.m0.sigma_tcorr =       4.2447

bb.gem.m1.maxstrip_t0 =      89.03         89
bb.gem.m1.maxstrip_tsigma =      8.629      8.597
bb.gem.m1.maxstrip_tcut =        4.5        4.5

bb.gem.m1.maxstrip_t0_deconv =      55.48      55.04
bb.gem.m1.maxstrip_tsigma_deconv =      19.09       18.3
bb.gem.m1.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m1.maxstrip_t0_fit =      21.94      21.71
bb.gem.m1.maxstrip_tsigma_fit =       15.8      15.73
bb.gem.m1.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m1.deltat_sigma =       2.0115
bb.gem.m1.deltat_cut =       20.115
bb.gem.m1.deltat_sigma_deconv =       5.3302
bb.gem.m1.deltat_cut_deconv =       53.302
bb.gem.m1.deltat_sigma_fit =       2.9903
bb.gem.m1.deltat_cut_fit =       29.903

bb.gem.m1.HitTimeMean =       87.688       88.506
bb.gem.m1.HitTimeSigma =       8.1673        8.033
bb.gem.m1.HitTimeMeanDeconv =       51.232       52.869
bb.gem.m1.HitTimeSigmaDeconv =       18.835       17.402
bb.gem.m1.HitTimeMeanFit =       20.208       20.568
bb.gem.m1.HitTimeSigmaFit =       14.912        15.53

bb.gem.m1.ADCasym_sigma =     0.047975
bb.gem.m1.ADCratio_sigma =      0.09133
bb.gem.m1.ADCratio_sigma_deconv =     0.090596

bb.gem.m1.sigma_tcorr =       6.7088

bb.gem.m2.maxstrip_t0 =      89.02      90.53
bb.gem.m2.maxstrip_tsigma =      5.277        5.9
bb.gem.m2.maxstrip_tcut =        4.5        4.5

bb.gem.m2.maxstrip_t0_deconv =      51.13      52.81
bb.gem.m2.maxstrip_tsigma_deconv =      10.93      11.92
bb.gem.m2.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m2.maxstrip_t0_fit =      20.87      23.46
bb.gem.m2.maxstrip_tsigma_fit =      9.163       10.5
bb.gem.m2.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m2.deltat_sigma =       2.8766
bb.gem.m2.deltat_cut =       28.766
bb.gem.m2.deltat_sigma_deconv =        6.455
bb.gem.m2.deltat_cut_deconv =        64.55
bb.gem.m2.deltat_sigma_fit =       4.5465
bb.gem.m2.deltat_cut_fit =       45.465

bb.gem.m2.HitTimeMean =       87.108       89.217
bb.gem.m2.HitTimeSigma =       5.0718       5.6349
bb.gem.m2.HitTimeMeanDeconv =       45.536        49.19
bb.gem.m2.HitTimeSigmaDeconv =       10.415       11.212
bb.gem.m2.HitTimeMeanFit =        18.25       21.583
bb.gem.m2.HitTimeSigmaFit =       7.9702       9.8036

bb.gem.m2.ADCasym_sigma =     0.044643
bb.gem.m2.ADCratio_sigma =     0.088226
bb.gem.m2.ADCratio_sigma_deconv =     0.091073

bb.gem.m2.sigma_tcorr =       4.3386

bb.gem.m3.maxstrip_t0 =      83.37      82.68
bb.gem.m3.maxstrip_tsigma =      9.154      9.243
bb.gem.m3.maxstrip_tcut =        4.5        4.5

bb.gem.m3.maxstrip_t0_deconv =      45.05      43.56
bb.gem.m3.maxstrip_tsigma_deconv =      19.29      19.41
bb.gem.m3.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m3.maxstrip_t0_fit =      12.69      11.28
bb.gem.m3.maxstrip_tsigma_fit =      13.74      13.02
bb.gem.m3.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m3.deltat_sigma =       1.8182
bb.gem.m3.deltat_cut =       18.182
bb.gem.m3.deltat_sigma_deconv =       5.1989
bb.gem.m3.deltat_cut_deconv =       51.989
bb.gem.m3.deltat_sigma_fit =       2.5504
bb.gem.m3.deltat_cut_fit =       25.504

bb.gem.m3.HitTimeMean =       82.515       82.753
bb.gem.m3.HitTimeSigma =       8.9402       9.2482
bb.gem.m3.HitTimeMeanDeconv =       40.874       41.844
bb.gem.m3.HitTimeSigmaDeconv =       19.342       19.284
bb.gem.m3.HitTimeMeanFit =       11.949       12.222
bb.gem.m3.HitTimeSigmaFit =       13.196       14.028

bb.gem.m3.ADCasym_sigma =     0.048519
bb.gem.m3.ADCratio_sigma =     0.095958
bb.gem.m3.ADCratio_sigma_deconv =     0.093012

bb.gem.m3.sigma_tcorr =       7.6543

bb.gem.m4.maxstrip_t0 =      76.46      78.56
bb.gem.m4.maxstrip_tsigma =      5.537      4.633
bb.gem.m4.maxstrip_tcut =        4.5        4.5

bb.gem.m4.maxstrip_t0_deconv =      28.27      36.59
bb.gem.m4.maxstrip_tsigma_deconv =      10.92      9.144
bb.gem.m4.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m4.maxstrip_t0_fit =      4.107      5.247
bb.gem.m4.maxstrip_tsigma_fit =      6.926      5.895
bb.gem.m4.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m4.deltat_sigma =       1.9537
bb.gem.m4.deltat_cut =       19.537
bb.gem.m4.deltat_sigma_deconv =       5.6217
bb.gem.m4.deltat_cut_deconv =       56.217
bb.gem.m4.deltat_sigma_fit =       2.5481
bb.gem.m4.deltat_cut_fit =       25.481

bb.gem.m4.HitTimeMean =       75.567       77.044
bb.gem.m4.HitTimeSigma =        5.182       4.5181
bb.gem.m4.HitTimeMeanDeconv =       25.991       32.023
bb.gem.m4.HitTimeSigmaDeconv =       9.9949       8.2444
bb.gem.m4.HitTimeMeanFit =       3.1774       3.8069
bb.gem.m4.HitTimeSigmaFit =       6.7791       5.9678

bb.gem.m4.ADCasym_sigma =      0.04536
bb.gem.m4.ADCratio_sigma =     0.082981
bb.gem.m4.ADCratio_sigma_deconv =     0.085354

bb.gem.m4.sigma_tcorr =       3.7615

bb.gem.m5.maxstrip_t0 =      78.53      80.73
bb.gem.m5.maxstrip_tsigma =      5.592      5.217
bb.gem.m5.maxstrip_tcut =        4.5        4.5

bb.gem.m5.maxstrip_t0_deconv =      31.85      39.69
bb.gem.m5.maxstrip_tsigma_deconv =      11.48      10.42
bb.gem.m5.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m5.maxstrip_t0_fit =      6.642      8.329
bb.gem.m5.maxstrip_tsigma_fit =       7.33      7.085
bb.gem.m5.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m5.deltat_sigma =       2.0401
bb.gem.m5.deltat_cut =       20.401
bb.gem.m5.deltat_sigma_deconv =       6.2838
bb.gem.m5.deltat_cut_deconv =       62.838
bb.gem.m5.deltat_sigma_fit =       2.2821
bb.gem.m5.deltat_cut_fit =       22.821

bb.gem.m5.HitTimeMean =       77.431       79.232
bb.gem.m5.HitTimeSigma =       5.4311       5.0268
bb.gem.m5.HitTimeMeanDeconv =       29.043       35.197
bb.gem.m5.HitTimeSigmaDeconv =        10.83       9.9648
bb.gem.m5.HitTimeMeanFit =       5.4518       6.6237
bb.gem.m5.HitTimeSigmaFit =       7.0449       6.4886

bb.gem.m5.ADCasym_sigma =      0.04877
bb.gem.m5.ADCratio_sigma =     0.088656
bb.gem.m5.ADCratio_sigma_deconv =      0.09175

bb.gem.m5.sigma_tcorr =       3.9186

bb.gem.m6.maxstrip_t0 =      78.32      79.25
bb.gem.m6.maxstrip_tsigma =      5.482      5.079
bb.gem.m6.maxstrip_tcut =        4.5        4.5

bb.gem.m6.maxstrip_t0_deconv =      31.39      34.49
bb.gem.m6.maxstrip_tsigma_deconv =      11.01      10.34
bb.gem.m6.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m6.maxstrip_t0_fit =       6.27      7.061
bb.gem.m6.maxstrip_tsigma_fit =       6.78      6.654
bb.gem.m6.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m6.deltat_sigma =       1.9623
bb.gem.m6.deltat_cut =       19.623
bb.gem.m6.deltat_sigma_deconv =       5.9821
bb.gem.m6.deltat_cut_deconv =       59.821
bb.gem.m6.deltat_sigma_fit =       2.2046
bb.gem.m6.deltat_cut_fit =       22.046

bb.gem.m6.HitTimeMean =       77.346       77.643
bb.gem.m6.HitTimeSigma =       5.2945       5.0087
bb.gem.m6.HitTimeMeanDeconv =       28.518       29.703
bb.gem.m6.HitTimeSigmaDeconv =       10.308       10.024
bb.gem.m6.HitTimeMeanFit =       5.5023       5.4793
bb.gem.m6.HitTimeSigmaFit =       6.5371        6.373

bb.gem.m6.ADCasym_sigma =     0.050683
bb.gem.m6.ADCratio_sigma =     0.097312
bb.gem.m6.ADCratio_sigma_deconv =     0.092131

bb.gem.m6.sigma_tcorr =       4.0698

bb.gem.m7.maxstrip_t0 =      75.72      76.53
bb.gem.m7.maxstrip_tsigma =      6.162      5.107
bb.gem.m7.maxstrip_tcut =        4.5        4.5

bb.gem.m7.maxstrip_t0_deconv =       24.7      27.75
bb.gem.m7.maxstrip_tsigma_deconv =       13.1      10.28
bb.gem.m7.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m7.maxstrip_t0_fit =      4.064      4.233
bb.gem.m7.maxstrip_tsigma_fit =      7.686      6.613
bb.gem.m7.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m7.deltat_sigma =         2.34
bb.gem.m7.deltat_cut =         23.4
bb.gem.m7.deltat_sigma_deconv =          7.6
bb.gem.m7.deltat_cut_deconv =           76
bb.gem.m7.deltat_sigma_fit =       2.6269
bb.gem.m7.deltat_cut_fit =       26.269

bb.gem.m7.HitTimeMean =       75.063       74.867
bb.gem.m7.HitTimeSigma =        5.981       5.1551
bb.gem.m7.HitTimeMeanDeconv =       22.938       23.505
bb.gem.m7.HitTimeSigmaDeconv =        12.49       10.285
bb.gem.m7.HitTimeMeanFit =       3.2557       2.7944
bb.gem.m7.HitTimeSigmaFit =       7.2946       6.8566

bb.gem.m7.ADCasym_sigma =     0.049242
bb.gem.m7.ADCratio_sigma =     0.096563
bb.gem.m7.ADCratio_sigma_deconv =     0.090324

bb.gem.m7.sigma_tcorr =       4.5951

#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  0.980533  1.06329  1.13084  1.09744  1.10823  1.18438  1.14591  1.09332  1.06076  1.14718  1.13319  1.09541  1.11917  1.08015  1.15358  1.10993  1.07247  1.05978  1.10342  1.05432  1.34295  1.06799  1.04935  1.07051  0.988761  1  1  1  
bb.gem.m0.ugain = 1  0.851379  0.913709  1.01008  0.996094  0.88726  0.99836  0.966798  1.00951  0.98342  1.03948  1.00884  0.954007  1  1.00501  0.989026  0.970806  0.963424  0.939086  0.94904  0.933869  0.917144  0.891289  0.967954  0.915662  0.916694  1  1  1  1  
bb.gem.m1.vgain = 1  0.891462  1.02981  1.10568  1.18356  1.16349  1.12378  1.15521  1.10962  1.14657  1.12499  1.05188  1.13955  1.10289  1.05874  1.40272  1.39582  1.28118  1.62465  1.45711  1.35611  1.31429  1.20657  1.35028  1.37272  1.19177  1.35209  1  1  1  
bb.gem.m1.ugain = 1  0.829159  0.950603  1.04112  1.05391  1.00702  1.03176  1.07336  1.04383  0.981152  0.978781  1.02272  0.958764  0.970453  1  1.25655  1.40497  1.25949  1.41333  1.24635  1.29511  1.10619  1.15113  1.27056  1.24858  1.15951  1  1  1  1  
bb.gem.m2.vgain = 1  0.970654  1.01767  1.11605  1.12689  1.08353  1.06796  1.12296  1.09306  1.14236  1.08084  1.14396  1.16753  1.13244  1.07288  1.13699  1.0957  1.15353  1.11389  1.04238  1.07734  1.09814  1.08651  1.09925  1.06039  1.07872  1.00719  0.968625  1  1  
bb.gem.m2.ugain = 0.638435  0.716349  0.829207  0.962847  0.914631  0.988032  0.994891  0.950607  0.999085  0.953696  1.00692  1.0107  0.952647  0.976406  1  1.03531  0.972782  1.00232  0.950636  0.970461  1.00225  0.946609  0.956032  0.973335  0.965729  0.989311  1.01389  1  1  1  
bb.gem.m3.vgain = 1  0.921416  1.01999  1.11873  1.18555  1.1141  1.63732  1.15575  1.13626  1.0633  1.1116  1.09951  1.15099  1.08912  1.11155  1.12099  1.10715  1.13592  1.07632  1.025  1.04173  1.01818  2.13455  1.06582  0.996039  1.04349  1.08415  1.00141  1  1  
bb.gem.m3.ugain = 0.679063  0.809766  0.859335  0.848779  0.986049  0.930715  0.941862  0.942713  0.970398  0.979119  0.955754  0.947975  1.01263  0.969082  1  0.978985  0.980277  0.981853  0.917217  0.997311  1.01964  1.18222  0.924069  0.946386  0.917783  0.90879  0.937377  1  1  1  
bb.gem.m4.vgain = 0.645853  0.587662  0.583189  0.56883  0.620864  0.583429  0.572821  0.557858  0.631021  0.59347  0.63447  0.587098  
bb.gem.m4.ugain = 0.911885  0.874944  0.915966  0.915767  0.826871  0.88054  0.911929  0.94299  0.950406  1  
bb.gem.m5.vgain = 0.871818  0.796675  0.79658  0.801406  0.791286  0.711663  0.735543  0.691516  0.692911  0.734993  0.726558  1  
bb.gem.m5.ugain = 1.11621  1.14087  1.10629  1.14069  1.13029  1.0706  0.917172  1.07993  1  0.954507  
bb.gem.m6.vgain = 0.900434  0.929678  0.862128  0.880728  0.944295  0.887855  0.918704  0.875753  0.910005  0.953147  0.963376  1.23785  
bb.gem.m6.ugain = 0.838261  1  0.987526  0.912456  0.893543  0.887056  0.898982  0.851818  0.81183  0.7615  
bb.gem.m7.vgain = 0.733285  0.721194  0.73583  0.707705  0.66442  0.6961  0.708344  0.700864  0.697906  0.687375  0.745614  0.780384  
bb.gem.m7.ugain = 1  1.05744  1.00028  0.988972  0.94685  0.91539  0.961271  0.946227  0.898374  0.924615  

# Module average gains relative to target ADC peak position of 4000
bb.gem.m0.modulegain = 0.958718
bb.gem.m1.modulegain = 0.847694
bb.gem.m2.modulegain = 0.960541
bb.gem.m3.modulegain = 0.947348
bb.gem.m4.modulegain = 1.30796
bb.gem.m5.modulegain = 1.11754
bb.gem.m6.modulegain = 1.10205
bb.gem.m7.modulegain = 1.18808

bb.gem.m0.threshold_sample =          160
bb.gem.m0.threshold_stripsum =          640
bb.gem.m0.threshold_clustersum =         1120

bb.gem.m1.threshold_sample =          134
bb.gem.m1.threshold_stripsum =          530
bb.gem.m1.threshold_clustersum =          940

bb.gem.m2.threshold_sample =          136
bb.gem.m2.threshold_stripsum =          530
bb.gem.m2.threshold_clustersum =          960

bb.gem.m3.threshold_sample =          208
bb.gem.m3.threshold_stripsum =          840
bb.gem.m3.threshold_clustersum =         1520

bb.gem.m4.threshold_sample =          124
bb.gem.m4.threshold_stripsum =          540
bb.gem.m4.threshold_clustersum =          900

bb.gem.m5.threshold_sample =          114
bb.gem.m5.threshold_stripsum =          480
bb.gem.m5.threshold_clustersum =          860

bb.gem.m6.threshold_sample =          136
bb.gem.m6.threshold_stripsum =          600
bb.gem.m6.threshold_clustersum =         1020

bb.gem.m7.threshold_sample =          102
bb.gem.m7.threshold_stripsum =          420
bb.gem.m7.threshold_clustersum =          760

bb.gem.constraintwidth_theta = 0.08
bb.gem.constraintwidth_phi = 0.07


---------[ 2022-11-07 00:00:00 ] # start GEN-3:

bb.gem.useopticsconstraint = 1
bb.gem.useslopeconstraint = 1
bb.gem.useforwardopticsconstraint = 1


bb.gem.dxfp0 = 0
bb.gem.dyfp0 = 0
bb.gem.dxpfp0 = 0
bb.gem.dypfp0 = 0

bb.gem.dxfpcut = 0.006
bb.gem.dyfpcut = 0.0003
bb.gem.dxpfpcut = 0.008
bb.gem.dypfpcut = 0.0003

bb.gem.ADCasym_cut = 0.5
bb.gem.corrcoeff_cut = 0.4

bb.gem.addstrip_tcut = 35.0
bb.gem.addstrip_ccor_cut = 0.4

bb.gem.usestriptimingcut = 1

bb.gem.m0.maxstrip_t0 =      87.29      86.58
bb.gem.m0.maxstrip_tsigma =      7.112      7.304
bb.gem.m0.maxstrip_tcut =        4.5        4.5

bb.gem.m0.maxstrip_t0_deconv =      48.34      45.54
bb.gem.m0.maxstrip_tsigma_deconv =      13.73      14.14
bb.gem.m0.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m0.maxstrip_t0_fit =      18.47      17.89
bb.gem.m0.maxstrip_tsigma_fit =      11.02      10.85
bb.gem.m0.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m0.deltat_sigma =       2.3617
bb.gem.m0.deltat_cut =       23.617
bb.gem.m0.deltat_sigma_deconv =       6.4367
bb.gem.m0.deltat_cut_deconv =       64.367
bb.gem.m0.deltat_sigma_fit =       2.6023
bb.gem.m0.deltat_cut_fit =       26.023

bb.gem.m0.HitTimeMean =       85.377       85.346
bb.gem.m0.HitTimeSigma =       6.8459        7.054
bb.gem.m0.HitTimeMeanDeconv =       42.715       42.044
bb.gem.m0.HitTimeSigmaDeconv =       13.313       13.671
bb.gem.m0.HitTimeMeanFit =       16.122       16.215
bb.gem.m0.HitTimeSigmaFit =       9.6818       10.025

bb.gem.m0.ADCasym_sigma =     0.059071
bb.gem.m0.ADCratio_sigma =      0.11394
bb.gem.m0.ADCratio_sigma_deconv =      0.11499

bb.gem.m0.sigma_tcorr =       4.9558

bb.gem.m1.maxstrip_t0 =      77.89      77.65
bb.gem.m1.maxstrip_tsigma =      9.302       9.32
bb.gem.m1.maxstrip_tcut =        4.5        4.5

bb.gem.m1.maxstrip_t0_deconv =      33.79      32.96
bb.gem.m1.maxstrip_tsigma_deconv =      19.58      19.07
bb.gem.m1.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m1.maxstrip_t0_fit =      6.666      6.225
bb.gem.m1.maxstrip_tsigma_fit =      13.05         13
bb.gem.m1.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m1.deltat_sigma =       2.4062
bb.gem.m1.deltat_cut =       24.062
bb.gem.m1.deltat_sigma_deconv =       7.4648
bb.gem.m1.deltat_cut_deconv =       74.648
bb.gem.m1.deltat_sigma_fit =       3.4106
bb.gem.m1.deltat_cut_fit =       34.106

bb.gem.m1.HitTimeMean =       76.994       77.393
bb.gem.m1.HitTimeSigma =       9.5003       9.5864
bb.gem.m1.HitTimeMeanDeconv =       30.993       31.988
bb.gem.m1.HitTimeSigmaDeconv =       18.954       18.562
bb.gem.m1.HitTimeMeanFit =         6.08        6.328
bb.gem.m1.HitTimeSigmaFit =        13.05        13.27

bb.gem.m1.ADCasym_sigma =     0.065364
bb.gem.m1.ADCratio_sigma =      0.12745
bb.gem.m1.ADCratio_sigma_deconv =      0.12841

bb.gem.m1.sigma_tcorr =       7.3788

bb.gem.m2.maxstrip_t0 =      88.45      88.78
bb.gem.m2.maxstrip_tsigma =      6.945      7.061
bb.gem.m2.maxstrip_tcut =        4.5        4.5

bb.gem.m2.maxstrip_t0_deconv =      50.76       50.1
bb.gem.m2.maxstrip_tsigma_deconv =      13.48      13.69
bb.gem.m2.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m2.maxstrip_t0_fit =      20.67      21.14
bb.gem.m2.maxstrip_tsigma_fit =      11.04       11.4
bb.gem.m2.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m2.deltat_sigma =       2.3369
bb.gem.m2.deltat_cut =       23.369
bb.gem.m2.deltat_sigma_deconv =       6.3844
bb.gem.m2.deltat_cut_deconv =       63.844
bb.gem.m2.deltat_sigma_fit =        2.836
bb.gem.m2.deltat_cut_fit =        28.36

bb.gem.m2.HitTimeMean =       86.634       87.529
bb.gem.m2.HitTimeSigma =        6.722       6.8673
bb.gem.m2.HitTimeMeanDeconv =       45.401       46.735
bb.gem.m2.HitTimeSigmaDeconv =       13.172       13.264
bb.gem.m2.HitTimeMeanFit =       17.903       19.319
bb.gem.m2.HitTimeSigmaFit =       10.189       10.688

bb.gem.m2.ADCasym_sigma =     0.057983
bb.gem.m2.ADCratio_sigma =      0.11095
bb.gem.m2.ADCratio_sigma_deconv =      0.11027

bb.gem.m2.sigma_tcorr =       4.8599

bb.gem.m3.maxstrip_t0 =      82.96      82.44
bb.gem.m3.maxstrip_tsigma =      9.816      10.06
bb.gem.m3.maxstrip_tcut =        4.5        4.5

bb.gem.m3.maxstrip_t0_deconv =      44.44      43.06
bb.gem.m3.maxstrip_tsigma_deconv =      20.54      20.75
bb.gem.m3.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m3.maxstrip_t0_fit =      12.94      11.98
bb.gem.m3.maxstrip_tsigma_fit =       14.6       14.4
bb.gem.m3.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m3.deltat_sigma =       2.2562
bb.gem.m3.deltat_cut =       22.562
bb.gem.m3.deltat_sigma_deconv =       6.2126
bb.gem.m3.deltat_cut_deconv =       62.126
bb.gem.m3.deltat_sigma_fit =       2.9663
bb.gem.m3.deltat_cut_fit =       29.663

bb.gem.m3.HitTimeMean =       82.097       82.392
bb.gem.m3.HitTimeSigma =       9.3686       9.6013
bb.gem.m3.HitTimeMeanDeconv =       40.505       41.268
bb.gem.m3.HitTimeSigmaDeconv =       20.128       20.229
bb.gem.m3.HitTimeMeanFit =       11.893       12.328
bb.gem.m3.HitTimeSigmaFit =       14.227       14.198

bb.gem.m3.ADCasym_sigma =     0.061012
bb.gem.m3.ADCratio_sigma =      0.11873
bb.gem.m3.ADCratio_sigma_deconv =      0.11597

bb.gem.m3.sigma_tcorr =        7.918

bb.gem.m4.maxstrip_t0 =       88.5      90.65
bb.gem.m4.maxstrip_tsigma =      7.233      6.577
bb.gem.m4.maxstrip_tcut =        4.5        4.5

bb.gem.m4.maxstrip_t0_deconv =       50.5      58.57
bb.gem.m4.maxstrip_tsigma_deconv =      14.04       11.6
bb.gem.m4.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m4.maxstrip_t0_fit =      20.04      22.89
bb.gem.m4.maxstrip_tsigma_fit =      12.04      11.71
bb.gem.m4.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m4.deltat_sigma =       2.3246
bb.gem.m4.deltat_cut =       23.246
bb.gem.m4.deltat_sigma_deconv =       6.0218
bb.gem.m4.deltat_cut_deconv =       60.218
bb.gem.m4.deltat_sigma_fit =       3.0969
bb.gem.m4.deltat_cut_fit =       30.969

bb.gem.m4.HitTimeMean =       87.123       88.626
bb.gem.m4.HitTimeSigma =       6.8734       6.4459
bb.gem.m4.HitTimeMeanDeconv =       46.843       52.722
bb.gem.m4.HitTimeSigmaDeconv =       13.301       11.795
bb.gem.m4.HitTimeMeanFit =       18.144       19.906
bb.gem.m4.HitTimeSigmaFit =       10.803       10.167

bb.gem.m4.ADCasym_sigma =     0.050376
bb.gem.m4.ADCratio_sigma =     0.099193
bb.gem.m4.ADCratio_sigma_deconv =      0.10723

bb.gem.m4.sigma_tcorr =       4.5203

bb.gem.m5.maxstrip_t0 =      90.33      91.94
bb.gem.m5.maxstrip_tsigma =      7.299      6.741
bb.gem.m5.maxstrip_tcut =        4.5        4.5

bb.gem.m5.maxstrip_t0_deconv =      54.45       60.7
bb.gem.m5.maxstrip_tsigma_deconv =       14.3      12.45
bb.gem.m5.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m5.maxstrip_t0_fit =      23.38      25.82
bb.gem.m5.maxstrip_tsigma_fit =      12.52      12.44
bb.gem.m5.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m5.deltat_sigma =       2.4073
bb.gem.m5.deltat_cut =       24.073
bb.gem.m5.deltat_sigma_deconv =       6.4097
bb.gem.m5.deltat_cut_deconv =       64.097
bb.gem.m5.deltat_sigma_fit =       3.1468
bb.gem.m5.deltat_cut_fit =       31.468

bb.gem.m5.HitTimeMean =       88.734       89.956
bb.gem.m5.HitTimeSigma =       7.0523       6.6362
bb.gem.m5.HitTimeMeanDeconv =         50.3       55.331
bb.gem.m5.HitTimeSigmaDeconv =       13.719        12.69
bb.gem.m5.HitTimeMeanFit =       21.136        22.67
bb.gem.m5.HitTimeSigmaFit =       11.342       11.307

bb.gem.m5.ADCasym_sigma =     0.057572
bb.gem.m5.ADCratio_sigma =      0.11289
bb.gem.m5.ADCratio_sigma_deconv =        0.118

bb.gem.m5.sigma_tcorr =       4.4476

bb.gem.m6.maxstrip_t0 =      90.96      91.18
bb.gem.m6.maxstrip_tsigma =      7.073      6.866
bb.gem.m6.maxstrip_tcut =        4.5        4.5

bb.gem.m6.maxstrip_t0_deconv =      55.17      57.09
bb.gem.m6.maxstrip_tsigma_deconv =       13.7      13.13
bb.gem.m6.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m6.maxstrip_t0_fit =      24.51      24.79
bb.gem.m6.maxstrip_tsigma_fit =      12.45      11.94
bb.gem.m6.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m6.deltat_sigma =        2.557
bb.gem.m6.deltat_cut =        25.57
bb.gem.m6.deltat_sigma_deconv =       6.3751
bb.gem.m6.deltat_cut_deconv =       63.751
bb.gem.m6.deltat_sigma_fit =       3.0886
bb.gem.m6.deltat_cut_fit =       30.886

bb.gem.m6.HitTimeMean =       89.539       89.147
bb.gem.m6.HitTimeSigma =       6.9088       6.8255
bb.gem.m6.HitTimeMeanDeconv =       51.316       51.339
bb.gem.m6.HitTimeSigmaDeconv =       13.393       13.247
bb.gem.m6.HitTimeMeanFit =       22.371       21.495
bb.gem.m6.HitTimeSigmaFit =       11.698       11.142

bb.gem.m6.ADCasym_sigma =     0.063902
bb.gem.m6.ADCratio_sigma =      0.12267
bb.gem.m6.ADCratio_sigma_deconv =      0.12211

bb.gem.m6.sigma_tcorr =       4.5963

bb.gem.m7.maxstrip_t0 =      87.09      87.45
bb.gem.m7.maxstrip_tsigma =      7.921      6.992
bb.gem.m7.maxstrip_tcut =        4.5        4.5

bb.gem.m7.maxstrip_t0_deconv =      46.01      48.37
bb.gem.m7.maxstrip_tsigma_deconv =      15.94      13.87
bb.gem.m7.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m7.maxstrip_t0_fit =      18.72      18.96
bb.gem.m7.maxstrip_tsigma_fit =      11.91       10.8
bb.gem.m7.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m7.deltat_sigma =       2.5498
bb.gem.m7.deltat_cut =       25.498
bb.gem.m7.deltat_sigma_deconv =       7.3084
bb.gem.m7.deltat_cut_deconv =       73.084
bb.gem.m7.deltat_sigma_fit =       3.0737
bb.gem.m7.deltat_cut_fit =       30.737

bb.gem.m7.HitTimeMean =       85.913       85.546
bb.gem.m7.HitTimeSigma =       7.2765       6.7342
bb.gem.m7.HitTimeMeanDeconv =       42.894       42.814
bb.gem.m7.HitTimeSigmaDeconv =       14.858       13.611
bb.gem.m7.HitTimeMeanFit =       17.035        16.49
bb.gem.m7.HitTimeSigmaFit =       10.459       9.7858

bb.gem.m7.ADCasym_sigma =     0.064131
bb.gem.m7.ADCratio_sigma =       0.1255
bb.gem.m7.ADCratio_sigma_deconv =      0.12341

bb.gem.m7.sigma_tcorr =       4.9107


bb.gem.m0.threshold_sample =          142
bb.gem.m0.threshold_stripsum =          550
bb.gem.m0.threshold_clustersum =         1000

bb.gem.m1.threshold_sample =          118
bb.gem.m1.threshold_stripsum =          500
bb.gem.m1.threshold_clustersum =          880

bb.gem.m2.threshold_sample =          126
bb.gem.m2.threshold_stripsum =          490
bb.gem.m2.threshold_clustersum =          860

bb.gem.m3.threshold_sample =          180
bb.gem.m3.threshold_stripsum =          740
bb.gem.m3.threshold_clustersum =         1320

bb.gem.m4.threshold_sample =          116
bb.gem.m4.threshold_stripsum =          450
bb.gem.m4.threshold_clustersum =          780

bb.gem.m5.threshold_sample =          106
bb.gem.m5.threshold_stripsum =          390
bb.gem.m5.threshold_clustersum =          680

bb.gem.m6.threshold_sample =          126
bb.gem.m6.threshold_stripsum =          450
bb.gem.m6.threshold_clustersum =          780

bb.gem.m7.threshold_sample =           92
bb.gem.m7.threshold_stripsum =          350
bb.gem.m7.threshold_clustersum =          620



#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  1  1.13942  1.13004  1.08163  1.07232  1.13856  1.08695  1.04166  1.01546  1.10154  1.09757  1.05632  1.0919  1.04829  1.126  1.08013  1.04655  1.03638  1.07189  1.02554  1.26212  1.02279  0.988099  1.01795  1  1  1  1  
bb.gem.m0.ugain = 1  1  0.928099  1.02255  1.00056  0.865123  0.97015  0.950398  0.982872  0.970682  1.02711  0.985795  0.950306  0.992071  1  0.989273  0.972028  0.966392  0.930437  0.947477  0.941016  0.918945  0.877746  0.941179  1  1  1  1  1  1  
bb.gem.m1.vgain = 1  1  1  1.1934  1.22853  1.20993  1.14523  1.16389  1.11475  1.13883  1.10317  1.03128  1.10525  1.06616  1.01819  1.32712  1.33214  1.22174  1.5528  1.41072  1.28748  1.28865  1.11011  1.23886  1.25369  1.07567  1  1  1  1  
bb.gem.m1.ugain = 1  0.944292  1.04924  1.11146  1.18875  1.06167  1.05194  1.0898  1.07199  0.990337  0.999199  1.03646  0.96938  0.988537  1  1.2436  1.39472  1.26215  1.40284  1.23865  1.27434  1.09006  1.16569  1.26492  1.18993  1  1  1  1  1  
bb.gem.m2.vgain = 1  1  1.05457  1.13088  1.15457  1.07516  1.06234  1.11762  1.11117  1.15266  1.09506  1.15659  1.1518  1.10527  1.04976  1.05815  1.01772  1.07418  1.03108  0.962209  0.993954  1.02943  1.00465  1.03047  0.971549  1.01027  0.927994  1  1  1  
bb.gem.m2.ugain = 1  0.740102  0.845147  1.00247  0.930885  1.00082  1.00706  0.950658  1.00145  0.955523  1.00059  1.01643  0.960683  0.979118  1  1.04192  0.976056  1.00617  0.954562  0.969019  1.00378  0.942298  0.957543  0.964216  0.980624  1  1  1  1  1  
bb.gem.m3.vgain = 1  1  1.05512  1.14603  1.20886  1.15102  1.64532  1.16567  1.14392  1.04881  1.09374  1.06838  1.12035  1.05967  1.07164  1.077  1.05761  1.09674  1.03609  0.982849  1.00157  0.975683  1.9984  1.00599  0.934149  0.99645  1.0714  1  1  1  
bb.gem.m3.ugain = 0.696917  0.82533  0.880437  1  1.02302  0.973112  0.960101  0.961725  0.983971  0.983424  0.968833  0.950507  1.02035  0.969103  1  0.976491  0.981575  0.97644  0.917889  0.989774  1.00751  1.11889  0.902588  0.908383  0.899647  1  1  1  1  1  
bb.gem.m4.vgain = 1  1  0.594099  0.590991  0.634385  0.59183  0.581101  0.56816  0.649075  0.597377  0.650374  1  
bb.gem.m4.ugain = 1  1  1  0.891544  0.830665  0.884324  0.911028  0.941085  0.943724  1  
bb.gem.m5.vgain = 1  0.820385  0.821999  0.832096  0.833447  0.734802  0.758718  0.706031  0.706522  0.761169  0.727978  1  
bb.gem.m5.ugain = 1.13797  1.15733  1.13325  1.15998  1.15958  1.08959  0.926446  1.08706  1  0.966058  
bb.gem.m6.vgain = 1  0.940439  0.889155  0.909515  0.965431  0.914456  0.954705  0.903767  0.952724  0.988266  1.00557  1.2765  
bb.gem.m6.ugain = 0.961129  1  0.990129  0.934569  0.914051  0.917682  0.932201  0.855508  0.825374  0.778582  
bb.gem.m7.vgain = 1  1  0.759092  0.725073  0.657799  0.735368  0.707852  0.720127  0.695921  0.68222  0.729748  1  
bb.gem.m7.ugain = 1.01979  1.07288  1  0.970873  0.959149  0.94182  0.9496  0.941003  0.874724  0.91265  

# Module average gains relative to target ADC peak position of 4000
bb.gem.m0.modulegain = 0.977814
bb.gem.m1.modulegain = 0.854156
bb.gem.m2.modulegain = 0.975964
bb.gem.m3.modulegain = 0.960879
bb.gem.m4.modulegain = 1.28803
bb.gem.m5.modulegain = 1.09961
bb.gem.m6.modulegain = 1.06489
bb.gem.m7.modulegain = 1.17624




---------[ 2022-11-24 00:00:00 ] # negative signal study for full readout runs
bb.gem.do_neg_signal_study = 1

---------[ 2022-11-24 02:15:00 ] # end negative signal study
bb.gem.do_neg_signal_study = 0

---------[ 2022-11-26 15:00:00 ] # zero-field runs for optics

bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0
bb.gem.useforwardopticsconstraint = 0

--------[ 2022-11-26 19:07:00 ] # back to full-field running

bb.gem.useopticsconstraint = 1
bb.gem.useslopeconstraint = 1
bb.gem.useforwardopticsconstraint = 1 # turning this on, hope it doesn't screw up tracking (AJRP)



--------[ 2023-01-01 00:00:00 ] #start of GEN-4


bb.gem.use_enhanced_chi2 = 1
bb.gem.trackchi2cut_hitquality = 50.0
bb.gem.usestriptimingcut = 1
bb.gem.filterflag1D = -1
bb.gem.filterflag2D = -1

bb.gem.suppressfirstlast = 0


# these should probably be tighter later on:
bb.gem.xptar_min = -0.3
bb.gem.xptar_max = 0.3

bb.gem.yptar_min = -0.14
bb.gem.yptar_max = 0.14

# be careful with these, they are angle-dependent:
bb.gem.ytar_min = -0.3
bb.gem.ytar_max = 0.3


bb.gem.xpfp_min = -0.25
bb.gem.xpfp_max = 0.25
bb.gem.ypfp_min = -0.15
bb.gem.ypfp_max = 0.15


# In all of the SBS-GEN experiment, the maximum electron momentum should be around 4-4.5 GeV:
# the values below are applicable to GEN-4 kinematics:
bb.gem.pmin = 0.7
bb.gem.pmax = 5.0


bb.gem.useopticsconstraint = 1
bb.gem.useslopeconstraint = 1
bb.gem.useforwardopticsconstraint = 1


bb.gem.dxfp0 = 0
bb.gem.dyfp0 = 0
bb.gem.dxpfp0 = 0
bb.gem.dypfp0 = 0

# need to verify these values:
bb.gem.dxfpcut = 0.006
bb.gem.dyfpcut = 0.0003
bb.gem.dxpfpcut = 0.008
bb.gem.dypfpcut = 0.0003

bb.gem.ADCasym_cut = 0.5
bb.gem.corrcoeff_cut = 0.4

bb.gem.addstrip_tcut = 35.0
bb.gem.addstrip_ccor_cut = 0.4

bb.gem.m0.maxstrip_t0 =      87.97      87.38
bb.gem.m0.maxstrip_tsigma =      5.239      5.296
bb.gem.m0.maxstrip_tcut =        4.5        4.5

bb.gem.m0.maxstrip_t0_deconv =      54.32       51.7
bb.gem.m0.maxstrip_tsigma_deconv =      11.03      11.27
bb.gem.m0.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m0.maxstrip_t0_fit =      23.32      22.39
bb.gem.m0.maxstrip_tsigma_fit =      10.05      10.07
bb.gem.m0.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m0.deltat_sigma =       2.2752
bb.gem.m0.deltat_cut =       22.752
bb.gem.m0.deltat_sigma_deconv =       5.9655
bb.gem.m0.deltat_cut_deconv =       59.655
bb.gem.m0.deltat_sigma_fit =       2.7094
bb.gem.m0.deltat_cut_fit =       27.094

bb.gem.m0.HitTimeMean =       85.837       85.917
bb.gem.m0.HitTimeSigma =       5.1863       5.3048
bb.gem.m0.HitTimeMeanDeconv =       48.196       47.669
bb.gem.m0.HitTimeSigmaDeconv =       11.204       11.128
bb.gem.m0.HitTimeMeanFit =       19.802       20.158
bb.gem.m0.HitTimeSigmaFit =       9.3929       9.6312

bb.gem.m0.ADCasym_sigma =     0.050995
bb.gem.m0.ADCratio_sigma =     0.099839
bb.gem.m0.ADCratio_sigma_deconv =     0.093505

bb.gem.m0.sigma_tcorr =       4.3954

bb.gem.m1.maxstrip_t0 =      77.95      77.63
bb.gem.m1.maxstrip_tsigma =      8.648      8.494
bb.gem.m1.maxstrip_tcut =        4.5        4.5

bb.gem.m1.maxstrip_t0_deconv =      39.21      38.12
bb.gem.m1.maxstrip_tsigma_deconv =      18.37      18.25
bb.gem.m1.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m1.maxstrip_t0_fit =      8.277      7.539
bb.gem.m1.maxstrip_tsigma_fit =      13.98      13.41
bb.gem.m1.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m1.deltat_sigma =       2.1457
bb.gem.m1.deltat_cut =       21.457
bb.gem.m1.deltat_sigma_deconv =       6.0941
bb.gem.m1.deltat_cut_deconv =       60.941
bb.gem.m1.deltat_sigma_fit =       3.1767
bb.gem.m1.deltat_cut_fit =       31.767

bb.gem.m1.HitTimeMean =       76.878       77.312
bb.gem.m1.HitTimeSigma =       8.2383        8.245
bb.gem.m1.HitTimeMeanDeconv =       35.411       36.438
bb.gem.m1.HitTimeSigmaDeconv =       17.989       17.847
bb.gem.m1.HitTimeMeanFit =       7.3543       7.4186
bb.gem.m1.HitTimeSigmaFit =       12.987       12.664

bb.gem.m1.ADCasym_sigma =     0.056854
bb.gem.m1.ADCratio_sigma =      0.10975
bb.gem.m1.ADCratio_sigma_deconv =      0.10549

bb.gem.m1.sigma_tcorr =       7.3161

bb.gem.m2.maxstrip_t0 =      88.58      88.27
bb.gem.m2.maxstrip_tsigma =      5.505      5.516
bb.gem.m2.maxstrip_tcut =        4.5        4.5

bb.gem.m2.maxstrip_t0_deconv =      55.73      53.59
bb.gem.m2.maxstrip_tsigma_deconv =      11.16       11.4
bb.gem.m2.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m2.maxstrip_t0_fit =      24.49      23.94
bb.gem.m2.maxstrip_tsigma_fit =       10.5      10.75
bb.gem.m2.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m2.deltat_sigma =        2.256
bb.gem.m2.deltat_cut =        22.56
bb.gem.m2.deltat_sigma_deconv =       5.8215
bb.gem.m2.deltat_cut_deconv =       58.215
bb.gem.m2.deltat_sigma_fit =       2.7216
bb.gem.m2.deltat_cut_fit =       27.216

bb.gem.m2.HitTimeMean =       86.631       86.929
bb.gem.m2.HitTimeSigma =       5.4298       5.4842
bb.gem.m2.HitTimeMeanDeconv =       50.081       49.941
bb.gem.m2.HitTimeSigmaDeconv =       11.291       11.419
bb.gem.m2.HitTimeMeanFit =       21.105       21.904
bb.gem.m2.HitTimeSigmaFit =       9.7501        10.13

bb.gem.m2.ADCasym_sigma =     0.050262
bb.gem.m2.ADCratio_sigma =     0.097829
bb.gem.m2.ADCratio_sigma_deconv =     0.096054

bb.gem.m2.sigma_tcorr =       4.4431

bb.gem.m3.maxstrip_t0 =      83.23      82.78
bb.gem.m3.maxstrip_tsigma =      9.033      9.141
bb.gem.m3.maxstrip_tcut =        4.5        4.5

bb.gem.m3.maxstrip_t0_deconv =      50.75      49.22
bb.gem.m3.maxstrip_tsigma_deconv =      20.06       20.2
bb.gem.m3.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m3.maxstrip_t0_fit =      15.84      14.55
bb.gem.m3.maxstrip_tsigma_fit =      17.04      16.68
bb.gem.m3.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m3.deltat_sigma =       2.0861
bb.gem.m3.deltat_cut =       20.861
bb.gem.m3.deltat_sigma_deconv =       5.2903
bb.gem.m3.deltat_cut_deconv =       52.903
bb.gem.m3.deltat_sigma_fit =       2.8877
bb.gem.m3.deltat_cut_fit =       28.877

bb.gem.m3.HitTimeMean =        82.07        82.44
bb.gem.m3.HitTimeSigma =       8.8961       8.9167
bb.gem.m3.HitTimeMeanDeconv =       46.731       47.343
bb.gem.m3.HitTimeSigmaDeconv =       20.357       20.107
bb.gem.m3.HitTimeMeanFit =       14.266       14.932
bb.gem.m3.HitTimeSigmaFit =       16.476        16.97

bb.gem.m3.ADCasym_sigma =     0.050259
bb.gem.m3.ADCratio_sigma =     0.099743
bb.gem.m3.ADCratio_sigma_deconv =     0.099053

bb.gem.m3.sigma_tcorr =       7.5473

bb.gem.m4.maxstrip_t0 =      86.42      87.83
bb.gem.m4.maxstrip_tsigma =       5.89      6.008
bb.gem.m4.maxstrip_tcut =        4.5        4.5

bb.gem.m4.maxstrip_t0_deconv =      50.77      57.89
bb.gem.m4.maxstrip_tsigma_deconv =      12.52      10.53
bb.gem.m4.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m4.maxstrip_t0_fit =      20.55      22.58
bb.gem.m4.maxstrip_tsigma_fit =       11.8      11.93
bb.gem.m4.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m4.deltat_sigma =       1.9071
bb.gem.m4.deltat_cut =       19.071
bb.gem.m4.deltat_sigma_deconv =       4.6688
bb.gem.m4.deltat_cut_deconv =       46.688
bb.gem.m4.deltat_sigma_fit =       1.6982
bb.gem.m4.deltat_cut_fit =       16.982

bb.gem.m4.HitTimeMean =       84.984       85.989
bb.gem.m4.HitTimeSigma =       5.5794       5.4492
bb.gem.m4.HitTimeMeanDeconv =       46.335       52.173
bb.gem.m4.HitTimeSigmaDeconv =       11.975       10.765
bb.gem.m4.HitTimeMeanFit =       17.384       18.793
bb.gem.m4.HitTimeSigmaFit =       10.643        11.07

bb.gem.m4.ADCasym_sigma =      0.05718
bb.gem.m4.ADCratio_sigma =      0.10081
bb.gem.m4.ADCratio_sigma_deconv =     0.068503

bb.gem.m4.sigma_tcorr =       4.6144

bb.gem.m5.maxstrip_t0 =      90.31      91.61
bb.gem.m5.maxstrip_tsigma =      5.598      5.273
bb.gem.m5.maxstrip_tcut =        4.5        4.5

bb.gem.m5.maxstrip_t0_deconv =      59.24      64.48
bb.gem.m5.maxstrip_tsigma_deconv =      11.55      10.39
bb.gem.m5.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m5.maxstrip_t0_fit =      27.82       30.3
bb.gem.m5.maxstrip_tsigma_fit =      11.24      11.11
bb.gem.m5.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m5.deltat_sigma =       2.2021
bb.gem.m5.deltat_cut =       22.021
bb.gem.m5.deltat_sigma_deconv =       5.6356
bb.gem.m5.deltat_cut_deconv =       56.356
bb.gem.m5.deltat_sigma_fit =       3.1372
bb.gem.m5.deltat_cut_fit =       31.372

bb.gem.m5.HitTimeMean =       88.571       89.557
bb.gem.m5.HitTimeSigma =       5.5802       5.2011
bb.gem.m5.HitTimeMeanDeconv =       54.682       59.121
bb.gem.m5.HitTimeSigmaDeconv =       11.745       10.904
bb.gem.m5.HitTimeMeanFit =       24.665        26.26
bb.gem.m5.HitTimeSigmaFit =       10.801       10.511

bb.gem.m5.ADCasym_sigma =     0.051177
bb.gem.m5.ADCratio_sigma =      0.10072
bb.gem.m5.ADCratio_sigma_deconv =      0.10569

bb.gem.m5.sigma_tcorr =       4.3079

bb.gem.m6.maxstrip_t0 =       91.1      91.18
bb.gem.m6.maxstrip_tsigma =      5.663      5.534
bb.gem.m6.maxstrip_tcut =        4.5        4.5

bb.gem.m6.maxstrip_t0_deconv =      60.02      61.81
bb.gem.m6.maxstrip_tsigma_deconv =      11.85      11.07
bb.gem.m6.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m6.maxstrip_t0_fit =      29.05      29.51
bb.gem.m6.maxstrip_tsigma_fit =      11.49      11.08
bb.gem.m6.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m6.deltat_sigma =       2.3546
bb.gem.m6.deltat_cut =       23.546
bb.gem.m6.deltat_sigma_deconv =       5.7497
bb.gem.m6.deltat_cut_deconv =       57.497
bb.gem.m6.deltat_sigma_fit =       3.0842
bb.gem.m6.deltat_cut_fit =       30.842

bb.gem.m6.HitTimeMean =       89.627       89.088
bb.gem.m6.HitTimeSigma =       5.6431       5.5633
bb.gem.m6.HitTimeMeanDeconv =       56.034       56.248
bb.gem.m6.HitTimeSigmaDeconv =       11.592       11.611
bb.gem.m6.HitTimeMeanFit =       26.333       25.379
bb.gem.m6.HitTimeSigmaFit =       11.033       10.763

bb.gem.m6.ADCasym_sigma =     0.058829
bb.gem.m6.ADCratio_sigma =      0.11445
bb.gem.m6.ADCratio_sigma_deconv =      0.10634

bb.gem.m6.sigma_tcorr =       4.5777

bb.gem.m7.maxstrip_t0 =      86.46      86.92
bb.gem.m7.maxstrip_tsigma =      6.471      5.663
bb.gem.m7.maxstrip_tcut =        4.5        4.5

bb.gem.m7.maxstrip_t0_deconv =       49.6      51.72
bb.gem.m7.maxstrip_tsigma_deconv =      14.18      12.06
bb.gem.m7.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m7.maxstrip_t0_fit =      20.87      21.56
bb.gem.m7.maxstrip_tsigma_fit =      11.49      10.72
bb.gem.m7.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m7.deltat_sigma =       2.2378
bb.gem.m7.deltat_cut =       22.378
bb.gem.m7.deltat_sigma_deconv =       6.4676
bb.gem.m7.deltat_cut_deconv =       64.676
bb.gem.m7.deltat_sigma_fit =       3.0448
bb.gem.m7.deltat_cut_fit =       30.448

bb.gem.m7.HitTimeMean =       85.278       84.813
bb.gem.m7.HitTimeSigma =       6.0214       5.4968
bb.gem.m7.HitTimeMeanDeconv =       46.045        45.79
bb.gem.m7.HitTimeSigmaDeconv =       12.536       11.875
bb.gem.m7.HitTimeMeanFit =       19.114       18.473
bb.gem.m7.HitTimeSigmaFit =       10.755       9.8195

bb.gem.m7.ADCasym_sigma =     0.057069
bb.gem.m7.ADCratio_sigma =     0.096333
bb.gem.m7.ADCratio_sigma_deconv =      0.10037

bb.gem.m7.sigma_tcorr =       4.7834

bb.gem.m0.threshold_sample =          152
bb.gem.m0.threshold_stripsum =          550
bb.gem.m0.threshold_clustersum =          980

bb.gem.m1.threshold_sample =          130
bb.gem.m1.threshold_stripsum =          520
bb.gem.m1.threshold_clustersum =          940

bb.gem.m2.threshold_sample =          132
bb.gem.m2.threshold_stripsum =          490
bb.gem.m2.threshold_clustersum =          860

bb.gem.m3.threshold_sample =          216
bb.gem.m3.threshold_stripsum =          820
bb.gem.m3.threshold_clustersum =         1480

bb.gem.m4.threshold_sample =          120
bb.gem.m4.threshold_stripsum =          440
bb.gem.m4.threshold_clustersum =          780

bb.gem.m5.threshold_sample =          112
bb.gem.m5.threshold_stripsum =          390
bb.gem.m5.threshold_clustersum =          680

bb.gem.m6.threshold_sample =          132
bb.gem.m6.threshold_stripsum =          450
bb.gem.m6.threshold_clustersum =          840

bb.gem.m7.threshold_sample =           94
bb.gem.m7.threshold_stripsum =          350
bb.gem.m7.threshold_clustersum =          640



#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  1  1  1.11036  1.07656  1.08721  1.15526  1.11243  1.06293  1.03306  1.12087  1.11213  1.06951  1.09543  1.06058  1.13744  1.08952  1.05965  1.04452  1.0833  1.03552  1.21687  1.0575  0.998301  1  1  1  1  1  
bb.gem.m0.ugain = 1  1  0.917007  1.02096  0.9847  0.889577  0.993025  0.961228  0.996532  0.972909  1.02656  1.98584  0.951045  0.997696  1  0.987612  0.966623  0.964191  0.935032  0.945287  0.933262  0.921535  0.861858  1.00754  1  1  1  1  1  1  
bb.gem.m1.vgain = 1  1  1  1.18407  1.19208  1.17795  1.15844  1.16731  1.11213  1.14207  1.11567  1.04145  1.11628  1.07129  1.02749  1.33718  1.33912  1.22895  1.56343  1.39764  1.29334  1.28099  1.13858  1.23979  1.27999  1  1  1  1  1  
bb.gem.m1.ugain = 1  1  1.02773  1.08223  1.10556  1.05177  1.06027  1.09019  1.06317  0.996605  0.995149  1.03993  0.968338  0.980948  1  1.25379  1.39838  1.25363  1.3756  1.2365  1.29557  1.10158  1.17651  1.26636  1  1  1  1  1  1  
bb.gem.m2.vgain = 1  1  1  1.1388  1.11622  1.08381  1.06548  1.122  1.05924  1.09999  1.04648  1.09437  1.09096  1.92146  1.60735  1.09805  1.05177  1.10967  1.06734  1.00059  1.0278  1.05615  1.04447  1.04812  1.01535  0.988538  1  1  1  1  
bb.gem.m2.ugain = 1  0.717346  1.5397  0.94995  0.927862  0.994932  1.0111  0.967026  1.01933  0.976596  1.02876  1.01911  0.972277  1.00266  1.02891  1.06203  1  1.03317  0.978496  0.996431  1.02808  0.976525  0.970975  0.998247  1  1  1  1  1  1  
bb.gem.m3.vgain = 1  1  1.13864  1.17187  1.22593  1.16463  1.65346  1.19087  1.16284  1.06819  1.10641  1.09094  1.14293  1.07494  1.09283  1.09409  1.07642  1.11568  1.05965  1.00443  1.0266  1.00375  2.06715  1.03192  0.970964  1  1  1  1  1  
bb.gem.m3.ugain = 1  0.825506  0.903584  1  1.05194  0.9877  0.975611  0.969553  0.990539  1.00354  0.963241  0.952428  1.01927  0.969068  1  0.972309  0.976806  0.980124  0.920434  0.997469  1.02018  1.1123  0.931558  0.95035  1  1  1  1  1  1  
bb.gem.m4.vgain = 1  1  0.613429  0.578174  0.641926  0.609083  0.569078  0.577257  0.603228  0.591487  0.654642  1  
bb.gem.m4.ugain = 1  1  1  1  1  0.88701  0.916497  0.928932  0.93753  1  
bb.gem.m5.vgain = 1  0.822336  0.826906  0.829622  0.824803  0.74157  0.767219  0.713008  0.716228  0.76358  0.729398  1  
bb.gem.m5.ugain = 1.14813  1.16306  1.13565  1.15718  1.17103  1.07899  0.922471  1.07939  1  0.958509  
bb.gem.m6.vgain = 1  1.03201  0.950062  0.978068  1.05088  0.993649  1.0276  0.980415  1.01732  1.0667  1.09134  1.4221  
bb.gem.m6.ugain = 1  1.07103  1.05343  1.00766  0.977466  0.975591  0.982169  0.926459  0.895118  0.842069  
bb.gem.m7.vgain = 1  1  0.741213  0.67646  0.65968  0.702597  0.698492  0.687956  0.67171  0.647462  0.726589  0.752326  
bb.gem.m7.ugain = 1  1.01725  0.966334  0.936992  0.888825  0.90015  0.937455  0.900456  0.887513  1  

# Module average gains relative to target ADC peak position of 4000
bb.gem.m0.modulegain = 0.938334
bb.gem.m1.modulegain = 0.847819
bb.gem.m2.modulegain = 0.926948
bb.gem.m3.modulegain = 0.953376
bb.gem.m4.modulegain = 1.26739
bb.gem.m5.modulegain = 1.1027
bb.gem.m6.modulegain = 0.990139
bb.gem.m7.modulegain = 1.21119


--------[ 2023-01-18 00:00:00 ]
#bb.gem.gridbinwidthx = 0.05
#bb.gem.gridbinwidthy = 0.05
#bb.gem.gridedgetolerancex = 0.02
#bb.gem.gridedgetolerancey = 0.02
#bb.gem.trackchi2cut = 6000.0

#---------[ 2023-02-27 22:55:00 ] # zero-field runs for optics-Holly to update tonight

#bb.gem.useopticsconstraint = 0
#bb.gem.useslopeconstraint = 0
#bb.gem.useforwardopticsconstraint = 0

#--------[ 2023-02-27 XX:07:00 ] # back to full-field running-Holly to update tonight

#bb.gem.useopticsconstraint = 1
#bb.gem.useslopeconstraint = 1
#bb.gem.useforwardopticsconstraint = 1

--------[ 2023-03-01 23:23:00 ] # start zero-field running
bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0
bb.gem.useforwardopticsconstraint = 0

--------[ 2023-03-02 02:47:00 ] # back to full-field running

bb.gem.useopticsconstraint = 1
bb.gem.useslopeconstraint = 1
bb.gem.useforwardopticsconstraint = 0

--------[ 2023-08-20 12:00:00 ] # Cosmic runs during SAD

bb.gem.useconstraint = 1
bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0
bb.gem.useforwardopticsconstraint = 0

bb.gem.usestriptimingcut = 0
bb.gem.filterflag1D = -1
bb.gem.filterflag2D = -1

bb.gem.use_enhanced_chi2 = 0
bb.gem.minhighqualityhitsontrack = 0

# typical values after alignment:
bb.gem.gridbinwidthx = 0.005
bb.gem.gridbinwidthy = 0.005
bb.gem.gridedgetolerancex = 0.0015
bb.gem.gridedgetolerancey = 0.0015
bb.gem.trackchi2cut = 50.0

bb.gem.minhitsontrack = 3


bb.gem.m0.threshold_sample = 50.0
bb.gem.m1.threshold_sample = 50.0
bb.gem.m2.threshold_sample = 50.0
bb.gem.m3.threshold_sample = 50.0
bb.gem.m4.threshold_sample = 50.0
bb.gem.m5.threshold_sample = 50.0
bb.gem.m6.threshold_sample = 50.0
bb.gem.m7.threshold_sample = 50.0

bb.gem.m0.threshold_stripsum = 150.0
bb.gem.m1.threshold_stripsum = 150.0
bb.gem.m2.threshold_stripsum = 150.0
bb.gem.m3.threshold_stripsum = 150.0
bb.gem.m4.threshold_stripsum = 150.0
bb.gem.m5.threshold_stripsum = 150.0
bb.gem.m6.threshold_stripsum = 150.0
bb.gem.m7.threshold_stripsum = 150.0

bb.gem.m0.threshold_clustersum = 300.0
bb.gem.m1.threshold_clustersum = 300.0
bb.gem.m2.threshold_clustersum = 300.0
bb.gem.m3.threshold_clustersum = 300.0
bb.gem.m4.threshold_clustersum = 300.0
bb.gem.m5.threshold_clustersum = 300.0
bb.gem.m6.threshold_clustersum = 300.0
bb.gem.m7.threshold_clustersum = 300.0



--------[ 2023-09-12 22:22:22 ] # somewhat sensible settings which will probably give reasonably good results if/when the beam starts tonight (AJRP 9/12/2023)

# GEN tracking cuts for fall 2023 running updated 10/8/2023 (AJRP)
# still need to do some gain matching.

bb.gem.dxfpcut = 0.01
bb.gem.dyfpcut = 0.0005
bb.gem.dxpfpcut = 0.008
bb.gem.dypfpcut = 0.0005

bb.gem.trackchi2cut = 25.0

bb.gem.use_enhanced_chi2 = 1
bb.gem.trackchi2cut_hitquality = 50.0
bb.gem.minhighqualityhitsontrack = 3

bb.gem.useconstraint = 1
bb.gem.useopticsconstraint = 1 
bb.gem.useslopeconstraint = 1
bb.gem.useforwardopticsconstraint = 1

bb.gem.usestriptimingcut = 1
bb.gem.filterflag1D = -1
bb.gem.filterflag2D = -1

bb.gem.m0.maxstrip_t0 =      88.31      87.39
bb.gem.m0.maxstrip_tsigma =      6.212      6.089
bb.gem.m0.maxstrip_tcut =        4.5        4.5

bb.gem.m0.maxstrip_t0_deconv =      52.33      49.04
bb.gem.m0.maxstrip_tsigma_deconv =      12.91         13
bb.gem.m0.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m0.maxstrip_t0_fit =      22.17      20.96
bb.gem.m0.maxstrip_tsigma_fit =      10.84       10.5
bb.gem.m0.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m0.deltat_sigma =       3.4923
bb.gem.m0.deltat_cut =       34.923
bb.gem.m0.deltat_sigma_deconv =       7.9954
bb.gem.m0.deltat_cut_deconv =       79.954
bb.gem.m0.deltat_sigma_fit =       3.7096
bb.gem.m0.deltat_cut_fit =       37.096

bb.gem.m0.HitTimeMean =       86.482       86.186
bb.gem.m0.HitTimeSigma =       6.3574       6.1711
bb.gem.m0.HitTimeMeanDeconv =       46.839       45.674
bb.gem.m0.HitTimeSigmaDeconv =       13.159       12.928
bb.gem.m0.HitTimeMeanFit =       19.502       19.369
bb.gem.m0.HitTimeSigmaFit =       10.245       10.021

bb.gem.m0.ADCasym_sigma =     0.085414
bb.gem.m0.ADCratio_sigma =      0.15784
bb.gem.m0.ADCratio_sigma_deconv =      0.15291

bb.gem.m0.sigma_tcorr =       5.1686

bb.gem.m1.maxstrip_t0 =      87.37      87.82
bb.gem.m1.maxstrip_tsigma =      8.661      8.327
bb.gem.m1.maxstrip_tcut =        4.5        4.5

bb.gem.m1.maxstrip_t0_deconv =      54.88      54.82
bb.gem.m1.maxstrip_tsigma_deconv =      19.38      18.46
bb.gem.m1.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m1.maxstrip_t0_fit =      22.17      22.15
bb.gem.m1.maxstrip_tsigma_fit =      16.16      16.16
bb.gem.m1.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m1.deltat_sigma =       3.9102
bb.gem.m1.deltat_cut =       39.102
bb.gem.m1.deltat_sigma_deconv =       9.0841
bb.gem.m1.deltat_cut_deconv =       90.841
bb.gem.m1.deltat_sigma_fit =       4.7375
bb.gem.m1.deltat_cut_fit =       47.375

bb.gem.m1.HitTimeMean =       86.213       87.082
bb.gem.m1.HitTimeSigma =       8.4107       8.1257
bb.gem.m1.HitTimeMeanDeconv =       51.193       52.823
bb.gem.m1.HitTimeSigmaDeconv =       19.155       18.022
bb.gem.m1.HitTimeMeanFit =         20.5       21.292
bb.gem.m1.HitTimeSigmaFit =       15.335       15.206

bb.gem.m1.ADCasym_sigma =     0.091592
bb.gem.m1.ADCratio_sigma =      0.17165
bb.gem.m1.ADCratio_sigma_deconv =      0.16871

bb.gem.m1.sigma_tcorr =       6.9591

bb.gem.m2.maxstrip_t0 =      88.54      87.74
bb.gem.m2.maxstrip_tsigma =      6.005      5.993
bb.gem.m2.maxstrip_tcut =        4.5        4.5

bb.gem.m2.maxstrip_t0_deconv =      52.94      49.92
bb.gem.m2.maxstrip_tsigma_deconv =      12.86      12.97
bb.gem.m2.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m2.maxstrip_t0_fit =      22.89       21.5
bb.gem.m2.maxstrip_tsigma_fit =      10.56      10.68
bb.gem.m2.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m2.deltat_sigma =       3.1855
bb.gem.m2.deltat_cut =       31.855
bb.gem.m2.deltat_sigma_deconv =       7.5613
bb.gem.m2.deltat_cut_deconv =       75.613
bb.gem.m2.deltat_sigma_fit =       3.5442
bb.gem.m2.deltat_cut_fit =       35.442

bb.gem.m2.HitTimeMean =       86.785       86.552
bb.gem.m2.HitTimeSigma =       6.0021       5.9005
bb.gem.m2.HitTimeMeanDeconv =       47.913       46.672
bb.gem.m2.HitTimeSigmaDeconv =       12.797       12.851
bb.gem.m2.HitTimeMeanFit =        20.22       19.819
bb.gem.m2.HitTimeSigmaFit =       10.055        10.15

bb.gem.m2.ADCasym_sigma =     0.090278
bb.gem.m2.ADCratio_sigma =      0.15688
bb.gem.m2.ADCratio_sigma_deconv =       0.1497

bb.gem.m2.sigma_tcorr =       4.8861

bb.gem.m3.maxstrip_t0 =      82.86      82.54
bb.gem.m3.maxstrip_tsigma =      9.211      9.337
bb.gem.m3.maxstrip_tcut =        4.5        4.5

bb.gem.m3.maxstrip_t0_deconv =      46.21      45.02
bb.gem.m3.maxstrip_tsigma_deconv =      20.53      20.76
bb.gem.m3.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m3.maxstrip_t0_fit =      14.19      13.24
bb.gem.m3.maxstrip_tsigma_fit =      15.39      15.13
bb.gem.m3.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m3.deltat_sigma =       2.7848
bb.gem.m3.deltat_cut =       27.848
bb.gem.m3.deltat_sigma_deconv =       7.2168
bb.gem.m3.deltat_cut_deconv =       72.168
bb.gem.m3.deltat_sigma_fit =       3.5485
bb.gem.m3.deltat_cut_fit =       35.485

bb.gem.m3.HitTimeMean =       81.907       82.183
bb.gem.m3.HitTimeSigma =        9.026       9.1235
bb.gem.m3.HitTimeMeanDeconv =       42.713       43.366
bb.gem.m3.HitTimeSigmaDeconv =       20.561       20.397
bb.gem.m3.HitTimeMeanFit =       13.311       13.273
bb.gem.m3.HitTimeSigmaFit =       15.181       14.951

bb.gem.m3.ADCasym_sigma =     0.075083
bb.gem.m3.ADCratio_sigma =      0.14973
bb.gem.m3.ADCratio_sigma_deconv =      0.14363

bb.gem.m3.sigma_tcorr =       7.7838

bb.gem.m4.maxstrip_t0 =      86.28      87.92
bb.gem.m4.maxstrip_tsigma =      6.215      5.655
bb.gem.m4.maxstrip_tcut =        4.5        4.5

bb.gem.m4.maxstrip_t0_deconv =      48.51      55.67
bb.gem.m4.maxstrip_tsigma_deconv =      13.04       10.9
bb.gem.m4.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m4.maxstrip_t0_fit =       18.6      20.43
bb.gem.m4.maxstrip_tsigma_fit =      10.82      10.97
bb.gem.m4.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m4.deltat_sigma =       2.5802
bb.gem.m4.deltat_cut =       25.802
bb.gem.m4.deltat_sigma_deconv =       6.3868
bb.gem.m4.deltat_cut_deconv =       63.868
bb.gem.m4.deltat_sigma_fit =       3.2945
bb.gem.m4.deltat_cut_fit =       32.945

bb.gem.m4.HitTimeMean =       85.043       86.028
bb.gem.m4.HitTimeSigma =       5.9055       5.8964
bb.gem.m4.HitTimeMeanDeconv =        45.07       49.945
bb.gem.m4.HitTimeSigmaDeconv =       12.755       11.119
bb.gem.m4.HitTimeMeanFit =       16.957       17.597
bb.gem.m4.HitTimeSigmaFit =        9.985       10.318

bb.gem.m4.ADCasym_sigma =     0.063088
bb.gem.m4.ADCratio_sigma =      0.11325
bb.gem.m4.ADCratio_sigma_deconv =      0.11507

bb.gem.m4.sigma_tcorr =       4.7988

bb.gem.m5.maxstrip_t0 =      90.04      91.72
bb.gem.m5.maxstrip_tsigma =      6.214       5.92
bb.gem.m5.maxstrip_tcut =        4.5        4.5

bb.gem.m5.maxstrip_t0_deconv =      56.23      62.54
bb.gem.m5.maxstrip_tsigma_deconv =      13.19      11.61
bb.gem.m5.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m5.maxstrip_t0_fit =      25.36      28.11
bb.gem.m5.maxstrip_tsigma_fit =      11.57      11.67
bb.gem.m5.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m5.deltat_sigma =       3.0274
bb.gem.m5.deltat_cut =       30.274
bb.gem.m5.deltat_sigma_deconv =       7.1636
bb.gem.m5.deltat_cut_deconv =       71.636
bb.gem.m5.deltat_sigma_fit =       3.7746
bb.gem.m5.deltat_cut_fit =       37.746

bb.gem.m5.HitTimeMean =       88.513       89.845
bb.gem.m5.HitTimeSigma =       6.0999       5.9057
bb.gem.m5.HitTimeMeanDeconv =       52.342         57.6
bb.gem.m5.HitTimeSigmaDeconv =       13.068       12.081
bb.gem.m5.HitTimeMeanFit =        22.98       24.702
bb.gem.m5.HitTimeSigmaFit =       10.725       11.012

bb.gem.m5.ADCasym_sigma =     0.070862
bb.gem.m5.ADCratio_sigma =      0.13119
bb.gem.m5.ADCratio_sigma_deconv =      0.13874

bb.gem.m5.sigma_tcorr =       4.7767

bb.gem.m6.maxstrip_t0 =      91.27      91.42
bb.gem.m6.maxstrip_tsigma =      6.119      5.883
bb.gem.m6.maxstrip_tcut =        4.5        4.5

bb.gem.m6.maxstrip_t0_deconv =      57.72      59.81
bb.gem.m6.maxstrip_tsigma_deconv =      12.84      12.21
bb.gem.m6.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m6.maxstrip_t0_fit =      27.28      27.66
bb.gem.m6.maxstrip_tsigma_fit =      11.72      11.24
bb.gem.m6.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m6.deltat_sigma =       3.2776
bb.gem.m6.deltat_cut =       32.776
bb.gem.m6.deltat_sigma_deconv =        7.324
bb.gem.m6.deltat_cut_deconv =        73.24
bb.gem.m6.deltat_sigma_fit =       3.5859
bb.gem.m6.deltat_cut_fit =       35.859

bb.gem.m6.HitTimeMean =        89.87       89.487
bb.gem.m6.HitTimeSigma =       6.0023        5.944
bb.gem.m6.HitTimeMeanDeconv =       54.192       54.447
bb.gem.m6.HitTimeSigmaDeconv =       12.656       12.655
bb.gem.m6.HitTimeMeanFit =       25.177       24.475
bb.gem.m6.HitTimeSigmaFit =       10.818       10.578

bb.gem.m6.ADCasym_sigma =     0.078064
bb.gem.m6.ADCratio_sigma =      0.15144
bb.gem.m6.ADCratio_sigma_deconv =      0.14763

bb.gem.m6.sigma_tcorr =       4.9474

bb.gem.m7.maxstrip_t0 =      85.68      86.48
bb.gem.m7.maxstrip_tsigma =      7.287      6.283
bb.gem.m7.maxstrip_tcut =        4.5        4.5

bb.gem.m7.maxstrip_t0_deconv =      45.72      48.85
bb.gem.m7.maxstrip_tsigma_deconv =      16.44      13.44
bb.gem.m7.maxstrip_tcut_deconv =        4.5        4.5

bb.gem.m7.maxstrip_t0_fit =      18.67      19.57
bb.gem.m7.maxstrip_tsigma_fit =      11.92      10.69
bb.gem.m7.maxstrip_tcut_fit =        4.5        4.5

bb.gem.m7.deltat_sigma =       3.0786
bb.gem.m7.deltat_cut =       30.786
bb.gem.m7.deltat_sigma_deconv =       7.9644
bb.gem.m7.deltat_cut_deconv =       79.644
bb.gem.m7.deltat_sigma_fit =       3.2577
bb.gem.m7.deltat_cut_fit =       32.577

bb.gem.m7.HitTimeMean =       84.514       84.694
bb.gem.m7.HitTimeSigma =       6.8068       6.1423
bb.gem.m7.HitTimeMeanDeconv =       42.568       43.895
bb.gem.m7.HitTimeSigmaDeconv =       15.179       13.025
bb.gem.m7.HitTimeMeanFit =       17.047       17.213
bb.gem.m7.HitTimeSigmaFit =        11.01       9.5884

bb.gem.m7.ADCasym_sigma =     0.075393
bb.gem.m7.ADCratio_sigma =      0.14533
bb.gem.m7.ADCratio_sigma_deconv =      0.14412

bb.gem.m7.sigma_tcorr =       5.5193



bb.gem.addstrip_tcut = 35.0

#bb.gem.deltat_cut = 30.0

bb.gem.ADCasym_cut = 0.5 
bb.gem.ccor_cut = 0.5
bb.gem.addstrip_ccor_cut = 0.5 

bb.gem.m0.threshold_sample =          104
bb.gem.m0.threshold_stripsum =          400
bb.gem.m0.threshold_clustersum =          740

bb.gem.m1.threshold_sample =           96
bb.gem.m1.threshold_stripsum =          370
bb.gem.m1.threshold_clustersum =          660

bb.gem.m2.threshold_sample =          100
bb.gem.m2.threshold_stripsum =          380
bb.gem.m2.threshold_clustersum =          700

bb.gem.m3.threshold_sample =          134
bb.gem.m3.threshold_stripsum =          510
bb.gem.m3.threshold_clustersum =          900

bb.gem.m4.threshold_sample =           92
bb.gem.m4.threshold_stripsum =          310
bb.gem.m4.threshold_clustersum =          580

bb.gem.m5.threshold_sample =           88
bb.gem.m5.threshold_stripsum =          310
bb.gem.m5.threshold_clustersum =          560

bb.gem.m6.threshold_sample =          110
bb.gem.m6.threshold_stripsum =          390
bb.gem.m6.threshold_clustersum =          700

bb.gem.m7.threshold_sample =           78
bb.gem.m7.threshold_stripsum =          290
bb.gem.m7.threshold_clustersum =          540

bb.gem.constraintwidth_theta = 0.04
bb.gem.constraintwidth_phi = 0.05

# Preliminary GEM Gain Match coefficients applicable to GEN-4 fall 2023 running:

#Module internal relative gains by APV card: 
bb.gem.m0.vgain = 1  1  1  1.08801  1.25468  1.15208  1.18405  1.18173  1.23717  1.18913  1.09886  1.11822  1.13674  1.04038  1.0409  1.02009  1.09632  1.03823  1.01798  0.992574  1.03096  0.972516  1.14613  0.997034  0.969684  1.02391  1  1  1  1  
bb.gem.m0.ugain = 1  1  0.97516  1.05663  1.03687  0.907839  1.00783  0.985772  1.00413  0.976772  1.03189  1.98431  0.952814  0.997065  1  0.969309  0.948212  0.938389  0.907145  0.928262  0.922982  0.920853  0.853558  0.936214  0.923576  1  1  1  1  1  
bb.gem.m1.vgain = 1  1  1  1.18527  1.29226  1.26441  1.1664  1.22893  2.01839  1.10817  1.08983  1.0321  1.1144  1.07959  1.04367  1.32991  1.33379  1.21737  1.5447  1.37869  1.25855  1.24119  1.11504  1.25754  1.28858  1.13223  1  1  1  1  
bb.gem.m1.ugain = 1  0.931093  1.044  1.13834  1.13719  1.05971  1.08084  1.0935  1.07402  1.00061  0.986965  1.0416  0.970589  0.980839  1  1.24335  1.4036  1.24962  1.45212  1.20472  1.26015  1.09696  1.10936  1.224  1.17934  1  1  1  1  1  
bb.gem.m2.vgain = 1  1  1.03654  1.07783  1.08003  1.02484  1.0067  1.03868  0.958956  1.01892  0.97347  0.972154  1.63512  1.0848  1.02529  1.052  1.00714  1.0726  1.03058  0.957499  0.992206  1.02949  0.993292  1.00487  0.971469  0.989282  0.981341  1  1  1  
bb.gem.m2.ugain = 0.646384  0.68209  1.59494  0.918643  0.886129  0.952847  0.968699  0.910837  0.977666  0.932763  0.985534  1.02111  0.938669  0.96704  1  1.04001  0.984862  1.01538  0.967425  0.986168  0.99611  0.947162  0.947846  0.96382  0.999362  1  1  1  1  1  
bb.gem.m3.vgain = 1  1  1.07385  1.21509  1.25853  1.15818  1.46623  1.17199  1.13134  1.04584  1.0772  1.0523  1.09765  1.03097  1.05523  1.0503  1.02782  1.06879  1.00573  0.961885  0.967416  0.957485  1.96671  1.00539  0.949688  0.967565  1.09299  0.996208  1  1  
bb.gem.m3.ugain = 0.72028  0.900081  0.941099  1.08053  1.04248  0.966601  0.96417  0.966647  0.98322  0.988676  0.958878  0.95047  1.01764  0.962964  1  0.971373  0.96767  0.962784  0.921694  0.887373  0.946613  0.975582  0.891079  0.930239  0.89356  0.993624  1  1  1  1  
bb.gem.m4.vgain = 1  1  0.613347  0.613764  0.664021  0.613778  0.592217  0.585466  0.642363  0.61053  0.671934  0.615253  
bb.gem.m4.ugain = 1  1  1  0.897133  0.813499  0.870908  0.903594  0.933568  0.953332  1  
bb.gem.m5.vgain = 1  0.823244  0.846784  0.869699  0.86614  0.773636  0.792406  0.740771  0.746255  0.804884  0.762628  1  
bb.gem.m5.ugain = 1.18892  1.19271  1.13002  1.17475  1.18236  1.09551  0.92951  1.09075  1  0.95521  
bb.gem.m6.vgain = 1  1.02252  1.03049  1.0446  1.10101  1.07052  1.09837  1.04309  1.09684  1.13701  1.15937  1.57689  
bb.gem.m6.ugain = 1  1.11321  1.10561  1.04293  1.01824  1.00917  1.03712  0.955073  0.939937  0.896992  
bb.gem.m7.vgain = 1  1  0.741211  0.723348  0.660639  0.681746  0.714966  0.695779  0.670144  0.666522  0.765477  0.706602  
bb.gem.m7.ugain = 1  1.02861  0.975405  0.959483  0.899933  0.897488  0.951737  0.9243  0.939214  0.898136  

# Module average gains relative to target ADC peak position of 4000
bb.gem.m0.modulegain = 0.950241
bb.gem.m1.modulegain = 0.844138
bb.gem.m2.modulegain = 0.980337
bb.gem.m3.modulegain = 0.982849
bb.gem.m4.modulegain = 1.28315
bb.gem.m5.modulegain = 1.08298
bb.gem.m6.modulegain = 0.931452
bb.gem.m7.modulegain = 1.20195

#bb.gem.useslopeconstraint=0

#--------[ 2023-10-05 20:00:00 ] 
#bb.gem.dump_geometry_info

---------[ 2023-10-19 14:36:00 ] # getting ready for straight-through, zero-field running:

bb.gem.useopticsconstraint = 0
bb.gem.useslopeconstraint = 0
bb.gem.useforwardopticsconstraint = 0

---------[ 2023-10-19 15:38:00 ] # Back to full field running

bb.gem.useopticsconstraint = 1
bb.gem.useslopeconstraint = 1
bb.gem.useforwardopticsconstraint = 1

